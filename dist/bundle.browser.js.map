{"version":3,"file":"bundle.browser.js","sources":["../src/browser/components/AdminPageContext.ts","../node_modules/classnames/index.js","../node_modules/style-inject/dist/style-inject.es.js","../src/browser/components/Loading/Loading.tsx","../src/browser/components/UiFlowLayout/UiFlowLayout.tsx","../src/browser/components/UiCard/UiCard.tsx","../src/browser/components/UiCardContent/UiCardContent.tsx","../src/browser/components/UiCardTitle/UiCardTitle.tsx","../src/browser/components/UiLoadingCard/UiLoadingCard.tsx","../src/browser/components/UiOverlay/OverlayManager.ts","../src/browser/components/UiOverlay/UiOverlay.tsx","../src/browser/components/UiTabs/UiTab.tsx","../src/browser/components/UiButton/UiButton.tsx","../src/browser/components/UiTabs/UiTabs.tsx","../src/browser/components/ModuleManagerPage/AddModuleCard/AddModuleCard.tsx","../src/browser/components/ModuleManagerPage/CommandResult/CommandResult.tsx","../src/browser/components/UiCardButtonRow/UiCardButtonRow.tsx","../src/browser/components/ModuleManagerPage/ModuleCard/ModuleCard.tsx","../src/browser/components/ModuleManagerPage/ModuleCatalog/catalog.ts","../src/browser/components/ModuleManagerPage/ModuleCatalog/ModuleCatalog.tsx","../src/browser/components/ModuleManagerPage/UpdateModulesCard/UpdateModulesCard.tsx","../src/browser/components/ModuleManagerPage/ModuleManagerPage.tsx","../src/browser/components/Navigation/Navigation.tsx","../src/browser/components/confirmDialog.ts","../src/common/optionsHelper.ts","../src/browser/components/ErrorBoundary/ErrorBoundary.tsx","../node_modules/guid-typescript/dist/guid.js","../src/browser/components/OptionCard/SimpleEvent.ts","../src/browser/components/OptionCard/OptionCardContext.ts","../src/browser/components/OptionItem/InputControls/ArrayInputControl/ArrayForm.tsx","../src/browser/components/OptionItem/InputControls/ArrayInputControl/ArrayControlsProvider.tsx","../src/browser/components/OptionItem/InputControls/BooleanInputControl/BooleanInputControl.tsx","../src/browser/components/OptionItem/InputControls/BooleanInputControl/BooleanControlsProvider.ts","../src/browser/components/OptionItem/InputControls/NumberInputControl/NumberInputControl.tsx","../src/browser/components/OptionItem/InputControls/NumberInputControl/RangeInputControl.tsx","../src/browser/components/OptionItem/InputControls/NumberInputControl/NumberControlsProvider.tsx","../src/browser/components/OptionItem/InputControls/ObjectInputControl/ObjectInputControl.tsx","../src/browser/components/OptionItem/InputControls/ObjectInputControl/ObjectControlsProvider.tsx","../src/browser/components/OptionItem/InputControls/PasswordInputControl/PasswordInputControl.tsx","../src/browser/components/OptionItem/InputControls/PasswordInputControl/PasswordControlsProvider.tsx","../src/browser/components/OptionItem/InputControls/StyleInputControl/StyleForm.tsx","../src/browser/components/OptionItem/InputControls/StyleInputControl/StyleControlsProvider.tsx","../src/browser/components/OptionItem/InputControls/TextInputControl/TextAreaInputControl.tsx","../src/browser/components/OptionItem/InputControls/TextInputControl/TextBoxInputControl.tsx","../src/browser/components/OptionItem/InputControls/TextInputControl/TextControlsProvider.tsx","../src/browser/components/OptionItem/InputControls/ValuesInputControl/ValuesInputControl.tsx","../src/browser/components/OptionItem/InputControls/ValuesInputControl/ValuesControlsProvider.tsx","../src/browser/components/OptionItem/InputControls/WebComponentInputControl/WebComponentFormContext.ts","../src/browser/components/OptionItem/InputControls/WebComponentInputControl/WebComponentForm.tsx","../src/browser/components/OptionItem/InputControls/WebComponentInputControl/WebComponentTitle.tsx","../src/browser/components/OptionItem/InputControls/WebComponentInputControl/WebComponentControlsProvider.tsx","../src/browser/components/OptionItem/InputControls/getInputControls.tsx","../src/browser/components/OptionItem/OptionItem.tsx","../src/browser/components/OptionList/OptionList.tsx","../src/browser/components/OptionCard/OptionCard.tsx","../src/browser/components/PageManagerPage/PageCard/PageCard.tsx","../src/browser/components/PageManagerPage/pageOptionsFields.tsx","../src/browser/components/PageManagerPage/PageManagerPage.tsx","../src/browser/components/RoundButton/RoundButton.tsx","../src/browser/components/ServiceManagerPage/ServiceListItem/ServiceListItem.tsx","../src/browser/components/ServiceManagerPage/ServiceGroupCard/ServiceGroupCard.tsx","../src/browser/components/ServiceManagerPage/ServiceLogCard/ServiceLogCard.tsx","../src/browser/components/ServiceManagerPage/ServiceManagerPage.tsx","../src/browser/components/SettingsManagerPage/PageInputControl.tsx","../src/browser/components/SettingsManagerPage/systemSettingsFields.tsx","../src/browser/components/SettingsManagerPage/SettingsManagerPage.tsx","../src/browser/components/SystemPage/SystemPage.tsx","../src/browser/components/Admin/Admin.tsx","../src/browser/index.ts"],"sourcesContent":["import { IReactronComponentContext } from \"@schirkan/reactron-interfaces\";\r\nimport * as React from \"react\";\r\n\r\nexport const AdminPageContext = React.createContext<IReactronComponentContext>({} as IReactronComponentContext);","/*!\n  Copyright (c) 2017 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg) && arg.length) {\n\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\tif (inner) {\n\t\t\t\t\tclasses.push(inner);\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import * as SvgIcons from '@fortawesome/free-solid-svg-icons';\r\nimport * as FontAwesome from '@fortawesome/react-fontawesome';\r\nimport classname from 'classnames';\r\nimport * as React from 'react';\r\nimport { ILoadingProps } from './ILoadingProps';\r\n\r\nimport './Loading.scss';\r\n\r\nexport default class Loading extends React.Component<ILoadingProps> {\r\n  public static defaultProps: Partial<ILoadingProps> = {\r\n    iconSize: \"4x\"\r\n  };\r\n\r\n  public render() {\r\n    return (\r\n      <section className={classname('Loading', { 'center': this.props.center })}>\r\n        <FontAwesome.FontAwesomeIcon icon={SvgIcons.faSpinner} size={this.props.iconSize} spin={true} />\r\n        {this.props.text && (\r\n          <div className=\"text\">{this.props.text}</div>\r\n        )}\r\n      </section>\r\n    );\r\n  }\r\n}\r\n","import classname from 'classnames';\r\nimport * as React from 'react';\r\nimport { IUiComponentProps } from '../IUiComponentProps';\r\n\r\nimport './UiFlowLayout.scss';\r\n\r\nexport default class UiFlowLayout extends React.Component<IUiComponentProps> {\r\n  private renderChildren() {\r\n    if (Array.isArray(this.props.children)) {\r\n      return this.props.children.map((child, index) => <div key={index}>{child}</div>);\r\n    } else {\r\n      return <div>{this.props.children}</div>;\r\n    }\r\n  }\r\n\r\n  public render() {\r\n    return (\r\n      <section className={classname('UiFlowLayout', this.props.className)} style={this.props.style}>\r\n        {this.renderChildren()}\r\n      </section>\r\n    );\r\n  }\r\n}\r\n","import classname from 'classnames';\r\nimport * as React from 'react';\r\nimport { IUiComponentProps } from '../IUiComponentProps';\r\n\r\nimport './UiCard.scss';\r\n\r\nexport default class UiCard extends React.Component<IUiComponentProps> {\r\n  private root: HTMLElement | null;\r\n\r\n  constructor(props: IUiComponentProps) {\r\n    super(props);\r\n    this.scrollToTop = this.scrollToTop.bind(this);\r\n    this.scrollToBottom = this.scrollToBottom.bind(this);\r\n  }\r\n\r\n  public render() {\r\n    return (\r\n      <section className={classname('UiCard', this.props.className)} style={this.props.style} ref={el => this.root = el}>\r\n        {this.props.children}\r\n      </section>\r\n    );\r\n  }\r\n\r\n  public scrollToTop() {\r\n    if (!this.root) {\r\n      return;\r\n    }\r\n    this.root.scrollTo({ top: 0 });\r\n  }\r\n\r\n  public scrollToBottom() {\r\n    if (!this.root) {\r\n      return;\r\n    }\r\n    const scrollHeight = this.root.scrollHeight;\r\n    const height = this.root.clientHeight;\r\n    const maxScrollTop = scrollHeight - height;\r\n    this.root.scrollTo({ top: maxScrollTop > 0 ? maxScrollTop : 0 });\r\n  }\r\n}\r\n","import classname from 'classnames';\r\nimport * as React from 'react';\r\nimport { IUiComponentProps } from '../IUiComponentProps';\r\n\r\nimport './UiCardContent.scss';\r\n\r\nexport default class UiCardContent extends React.Component<IUiComponentProps> {\r\n  public render() {\r\n    return (\r\n      <div className={classname('UiCardContent', this.props.className)} style={this.props.style}>\r\n        {this.props.children}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import classname from 'classnames';\r\nimport * as React from 'react';\r\nimport { IUiComponentProps } from '../IUiComponentProps';\r\n\r\nimport './UiCardTitle.scss';\r\n\r\nexport default class UiCardTitle extends React.Component<IUiComponentProps> {\r\n  public render() {\r\n    return (\r\n      <div className={classname('UiCardTitle', this.props.className)} style={this.props.style}>\r\n        {this.props.children}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import * as React from 'react';\r\nimport Loading from '../Loading/Loading';\r\nimport UiCard from '../UiCard/UiCard';\r\nimport UiCardContent from '../UiCardContent/UiCardContent';\r\nimport UiCardTitle from '../UiCardTitle/UiCardTitle';\r\n\r\nimport './UiLoadingCard.scss';\r\n\r\nexport default class UiLoadingCard extends React.Component {\r\n  public render() {\r\n    return (\r\n      <UiCard className=\"UiLoadingCard\">\r\n        <UiCardTitle>\r\n          Loading...\r\n        </UiCardTitle>\r\n        <UiCardContent>\r\n          <Loading />\r\n        </UiCardContent>\r\n        {this.props.children}\r\n      </UiCard>\r\n    );\r\n  }\r\n}\r\n","import UiOverlay from './UiOverlay';\r\n\r\nclass OverlayManager {\r\n  private items: UiOverlay[] = [];\r\n\r\n  public add(instance: UiOverlay) {\r\n    if (this.items.length > 0) {\r\n      const lastItem = this.items[this.items.length - 1];\r\n      lastItem.hide();\r\n    }\r\n    this.items.push(instance);\r\n  }\r\n\r\n  public remove(instance: UiOverlay) {\r\n    const index = this.items.indexOf(instance);\r\n    if (index >= 0) {\r\n      this.items.splice(index);\r\n      if (this.items.length > 0) {\r\n        const lastItem = this.items[this.items.length - 1];\r\n        lastItem.show();\r\n      }\r\n    }\r\n  }\r\n};\r\n\r\nexport const overlayManager = new OverlayManager();","import classname from 'classnames';\r\nimport * as React from 'react';\r\nimport { IUiComponentProps } from '../IUiComponentProps';\r\nimport { overlayManager } from './OverlayManager';\r\n\r\nimport './UiOverlay.scss';\r\n\r\ninterface IUiComponentState {\r\n  visible: boolean;\r\n}\r\n\r\nexport default class UiOverlay extends React.Component<IUiComponentProps, IUiComponentState> {\r\n  constructor(props: IUiComponentProps) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      visible: true\r\n    };\r\n  }\r\n\r\n  public componentDidMount() {\r\n    overlayManager.add(this);\r\n  }\r\n\r\n  public componentWillUnmount() {\r\n    overlayManager.remove(this);\r\n  }\r\n\r\n  public show() {\r\n    this.setState({ visible: true });\r\n  }\r\n  public hide() {\r\n    this.setState({ visible: false });\r\n  }\r\n\r\n  public render() {\r\n    return (\r\n      <div hidden={!this.state.visible} className={classname('UiOverlay', this.props.className)} style={this.props.style}>\r\n        {this.props.children}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import classname from 'classnames';\r\nimport * as React from 'react';\r\nimport { IUiComponentProps } from '../IUiComponentProps';\r\n\r\ninterface IUiTabProps extends IUiComponentProps {\r\n  title: string;\r\n}\r\n\r\nexport default class UiTab extends React.Component<IUiTabProps> {\r\n  public render() {\r\n    return (\r\n      <div className={classname('UiTab', this.props.className)} style={this.props.style}>\r\n        {this.props.children}\r\n      </div>\r\n    );\r\n  }\r\n}","import classname from 'classnames';\r\nimport * as React from 'react';\r\nimport { IUiComponentProps } from \"../IUiComponentProps\";\r\n\r\nimport './UiButton.scss';\r\n\r\nexport interface IUiButtonProps extends IUiComponentProps {\r\n  disabled?: boolean;\r\n  onClick?: (e: React.MouseEvent) => any;\r\n}\r\n\r\ninterface IUiButtonState {\r\n  running: boolean;\r\n}\r\n\r\nexport default class UiButton extends React.Component<IUiButtonProps, IUiButtonState> {\r\n  private disposed = false;\r\n\r\n  constructor(props: IUiButtonProps) {\r\n    super(props);\r\n\r\n    this.state = { running: false };\r\n\r\n    this.onClick = this.onClick.bind(this);\r\n  }\r\n\r\n  private onClick(e: React.MouseEvent) {    \r\n    if (!this.props.onClick || this.props.disabled || this.state.running) {\r\n      return;\r\n    }\r\n    e.preventDefault();\r\n    e.bubbles = false;\r\n    e.stopPropagation();\r\n    \r\n    this.setState({ running: true }, () => {\r\n      Promise.resolve(this.props.onClick && this.props.onClick(e))\r\n        .catch()\r\n        .then(() => {\r\n          if (!this.disposed) {\r\n            this.setState({ running: false });\r\n          }\r\n        });\r\n    });\r\n  }\r\n\r\n  public componentWillUnmount() {\r\n    this.disposed = true;\r\n  }\r\n\r\n  public render() {\r\n    const className = classname('UiButton', 'clickable',\r\n      this.props.className, { 'disabled': this.props.disabled || this.state.running });\r\n\r\n    return (\r\n      <div className={className} onClick={this.onClick} style={this.props.style}>\r\n        {this.props.children}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import classname from 'classnames';\r\nimport * as React from 'react';\r\nimport { IUiComponentProps } from '../IUiComponentProps';\r\nimport UiButton from '../UiButton/UiButton';\r\nimport UiTab from './UiTab';\r\n\r\nimport './UiTabs.scss';\r\n\r\ninterface IUiTabsState {\r\n  selectedTabIndex: number;\r\n}\r\n\r\nexport default class UiTabs extends React.Component<IUiComponentProps, IUiTabsState> {\r\n  constructor(props: IUiComponentProps) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      selectedTabIndex: 0\r\n    };\r\n  }\r\n\r\n  private renderTabHeader(tab: UiTab, index: number) {\r\n    if (!tab || !tab.props || !tab.props.title) {\r\n      return null;\r\n    }\r\n    const toggleSelectedTab = () => this.setState({ selectedTabIndex: index });\r\n    const className = classname('UiTabHeader', { 'selected': this.state.selectedTabIndex === index });\r\n    return (\r\n      <UiButton key={index} className={className} onClick={toggleSelectedTab}>\r\n        {tab.props.title}\r\n      </UiButton>\r\n    );\r\n  }\r\n\r\n  private renderTabHeaders() {\r\n    if (!this.props.children) {\r\n      return null;\r\n    }\r\n    const tabs = this.props.children as UiTab[];\r\n    return (\r\n      <header>\r\n        {tabs.map((tab, index) => this.renderTabHeader(tab, index))}\r\n      </header>\r\n    );\r\n  }\r\n\r\n  private renderTabContents() {\r\n    if (!this.props.children) {\r\n      return null;\r\n    }\r\n    return this.props.children[this.state.selectedTabIndex];\r\n  }\r\n\r\n  public render() {\r\n    return (\r\n      <section className={classname('UiTabs', this.props.className)} style={this.props.style}>\r\n        {this.renderTabHeaders()}\r\n        {this.renderTabContents()}\r\n      </section>\r\n    );\r\n  }\r\n}","import * as SolidIcons from '@fortawesome/free-solid-svg-icons';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport * as React from 'react';\r\nimport UiButton from '../../UiButton/UiButton';\r\nimport UiCard from '../../UiCard/UiCard';\r\n\r\nimport './AddModuleCard.scss';\r\n\r\nexport interface IAddModuleCardProps {\r\n  onAdd: (repository: string | null) => void;\r\n}\r\n\r\nexport default class AddModuleCard extends React.Component<IAddModuleCardProps> {\r\n  public render() {\r\n    let input: HTMLInputElement | null;\r\n    const onAdd = () => this.props.onAdd(input && input.value);\r\n\r\n    return (\r\n      <UiCard className=\"AddModuleCard\">\r\n        <input ref={el => input = el} placeholder=\"GitHub Repository URL\" />\r\n        <UiButton className=\"addButton\" onClick={onAdd}>\r\n          <FontAwesomeIcon icon={SolidIcons.faPlus} /> Add\r\n        </UiButton>\r\n      </UiCard>\r\n    );\r\n  }\r\n}\r\n","import * as SolidIcons from '@fortawesome/free-solid-svg-icons';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { ICommandResult } from '@schirkan/reactron-interfaces';\r\nimport * as React from 'react';\r\nimport UiButton from '../../UiButton/UiButton';\r\nimport UiCard from '../../UiCard/UiCard';\r\nimport UiCardContent from '../../UiCardContent/UiCardContent';\r\nimport UiCardTitle from '../../UiCardTitle/UiCardTitle';\r\n\r\nimport './CommandResult.scss';\r\n\r\nexport interface ICommandResultProps {\r\n  results: ICommandResult[];\r\n  onClose: () => void;\r\n}\r\n\r\nexport default class CommandResult extends React.Component<ICommandResultProps> {\r\n  constructor(props: ICommandResultProps) {\r\n    super(props);\r\n  }\r\n\r\n  public renderCommandResult(result: ICommandResult, key: string) {\r\n    const icon = result.success === false ?\r\n      <FontAwesomeIcon icon={SolidIcons.faTimes} /> :\r\n      result.success === true ?\r\n        <FontAwesomeIcon icon={SolidIcons.faCheck} /> :\r\n        <FontAwesomeIcon icon={SolidIcons.faQuestion} />;\r\n\r\n    let log: JSX.Element | undefined;\r\n    if (result.log && result.log.length) {\r\n      log = (\r\n        <ul className=\"log\">\r\n          {result.log.map((item, i) => <li key={i}>{item}</li>)}\r\n        </ul>\r\n      );\r\n    }\r\n\r\n    let title = result.command || '';\r\n    if (result.args) {\r\n      title += ' | args: ' + result.args;\r\n    }\r\n\r\n    return (\r\n      <React.Fragment key={key}>\r\n        <div className=\"result\">\r\n          <div className=\"commandTitle\">{icon} {title}</div>\r\n          {log}\r\n        </div>\r\n        {result.children && result.children.map((child, index) =>\r\n          this.renderCommandResult(child, key + '.' + index))}\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  public render() {\r\n    return (\r\n      <UiCard className=\"CommandResult\">\r\n        <UiCardTitle>\r\n          Result\r\n          <UiButton onClick={this.props.onClose}>\r\n            <FontAwesomeIcon icon={SolidIcons.faTimes} />\r\n          </UiButton>\r\n        </UiCardTitle>\r\n        <UiCardContent>\r\n          {this.props.results.map((item, index) => this.renderCommandResult(item, index.toString()))}\r\n        </UiCardContent>\r\n      </UiCard>\r\n    );\r\n  }\r\n}\r\n","import classname from 'classnames';\r\nimport * as React from 'react';\r\nimport { IUiComponentProps } from '../IUiComponentProps';\r\n\r\nimport './UiCardButtonRow.scss';\r\n\r\nexport interface IUiCardButtonRowProps extends IUiComponentProps {\r\n  divider?: 'full' | 'half';\r\n}\r\n\r\nexport default class UiCardButtonRow extends React.Component<IUiCardButtonRowProps> {\r\n  public render() {\r\n    const className = classname('UiCardButtonRow', this.props.className, {\r\n      'UiCardButtonRowDividerFull': this.props.divider === 'full',\r\n      'UiCardButtonRowDividerHalf': this.props.divider === 'half',\r\n    });\r\n\r\n    return (\r\n      <div className={className} style={this.props.style}>\r\n        {this.props.children}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import * as BrandIcons from '@fortawesome/free-brands-svg-icons';\r\nimport * as SolidIcons from '@fortawesome/free-solid-svg-icons';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { IModuleRepositoryItem } from '@schirkan/reactron-interfaces';\r\nimport classname from 'classnames';\r\nimport * as React from 'react';\r\nimport UiButton from '../../UiButton/UiButton';\r\nimport UiCard from '../../UiCard/UiCard';\r\nimport UiCardButtonRow from '../../UiCardButtonRow/UiCardButtonRow';\r\nimport UiCardContent from '../../UiCardContent/UiCardContent';\r\nimport UiCardTitle from '../../UiCardTitle/UiCardTitle';\r\n\r\nimport './ModuleCard.scss';\r\n\r\nexport interface IModuleCardProps {\r\n  module: IModuleRepositoryItem;\r\n  onUpdate: (module: IModuleRepositoryItem) => void;\r\n  onRebuild: (module: IModuleRepositoryItem) => void;\r\n  onRemove: (module: IModuleRepositoryItem) => void;\r\n}\r\n\r\ninterface IModuleCardState {\r\n  showActions: boolean;\r\n}\r\n\r\nexport default class ModuleCard extends React.Component<IModuleCardProps, IModuleCardState> {\r\n  constructor(props: IModuleCardProps) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      showActions: false\r\n    };\r\n\r\n    this.showActions = this.showActions.bind(this);\r\n    this.hideActions = this.hideActions.bind(this);\r\n    this.onUpdate = this.onUpdate.bind(this);\r\n    this.onRebuild = this.onRebuild.bind(this);\r\n    this.onRemove = this.onRemove.bind(this);\r\n  }\r\n\r\n  private showActions() {\r\n    this.setState({ showActions: true });\r\n  }\r\n\r\n  private hideActions() {\r\n    this.setState({ showActions: false });\r\n  }\r\n\r\n  private onUpdate() {\r\n    this.hideActions();\r\n    this.props.onUpdate(this.props.module);\r\n  }\r\n\r\n  private onRebuild() {\r\n    this.hideActions();\r\n    this.props.onRebuild(this.props.module);\r\n  }\r\n\r\n  private onRemove() {\r\n    if (window.confirm('Remove?')) {\r\n      this.hideActions();\r\n      this.props.onRemove(this.props.module);\r\n    }\r\n  }\r\n\r\n  public renderTitle() {\r\n    let updateIcon: JSX.Element | undefined;\r\n    if (this.props.module.hasUpdate) {\r\n      updateIcon = <span className=\"hasUpdate\"><FontAwesomeIcon icon={SolidIcons.faStarOfLife} /></span>;\r\n    }\r\n\r\n    return (\r\n      <UiCardTitle>\r\n        <FontAwesomeIcon icon={SolidIcons.faCube} /> {this.props.module.name}\r\n        {updateIcon}\r\n      </UiCardTitle>\r\n    );\r\n  }\r\n\r\n  public renderDescription() {\r\n    return (\r\n      <UiCardContent className=\"description\">\r\n        {this.props.module.description || 'no description'}\r\n      </UiCardContent>\r\n    );\r\n  }\r\n\r\n  public renderAuthor() {\r\n    let authorName: string | undefined = 'unknown';\r\n    let authorMail: string | undefined;\r\n    if (typeof this.props.module.author === 'string') {\r\n      authorName = this.props.module.author;\r\n    } else if (typeof this.props.module.author === 'object') {\r\n      authorName = this.props.module.author.name || this.props.module.author.email;\r\n      authorMail = this.props.module.author.email;\r\n    }\r\n    const author = (authorMail) ? (<a href={'mailto://' + authorMail}>{authorName}</a>) : authorName;\r\n\r\n    return (\r\n      <UiCardContent className=\"author\">by {author}</UiCardContent>\r\n    );\r\n  }\r\n\r\n  public renderFooter() {\r\n    let repoLink = <div />;\r\n    if (this.props.module.repository) {\r\n      repoLink = (\r\n        <a className=\"clickable\" href={this.props.module.repository} target=\"_blank\">\r\n          <FontAwesomeIcon icon={BrandIcons.faGithub} /> GitHub\r\n        </a>\r\n      );\r\n    }\r\n\r\n    const className = classname('footer', 'default', { 'hide': this.state.showActions });\r\n\r\n    return (\r\n      <UiCardButtonRow className={className} divider=\"half\">\r\n        <div className=\"version\">{this.props.module.version}</div>\r\n        {repoLink}\r\n        <UiButton onClick={this.showActions}><FontAwesomeIcon icon={SolidIcons.faCog} /> Modify</UiButton>\r\n      </UiCardButtonRow>\r\n    );\r\n  }\r\n\r\n  public renderActions() {\r\n    const className = classname('footer', 'actions', { 'hide': !this.state.showActions });\r\n\r\n    return (\r\n      <UiCardButtonRow className={className} divider=\"full\">\r\n        <UiButton disabled={!this.props.module.hasUpdate} onClick={this.onUpdate}>\r\n          <FontAwesomeIcon icon={SolidIcons.faDownload} /> Update\r\n        </UiButton>\r\n        {/* <UiButton disabled={!this.props.module.canBuild} onClick={this.onRebuild}>Rebuild</UiButton> */}\r\n        <UiButton disabled={!this.props.module.canRemove} onClick={this.onRemove}>\r\n          <FontAwesomeIcon icon={SolidIcons.faTrashAlt} /> Remove\r\n        </UiButton>\r\n        <UiButton onClick={this.hideActions}>\r\n          <FontAwesomeIcon icon={SolidIcons.faTimes} /> Close\r\n        </UiButton>\r\n      </UiCardButtonRow>\r\n    );\r\n  }\r\n\r\n  public render() {\r\n    return (\r\n      <UiCard className=\"ModuleCard\">\r\n        {this.renderTitle()}\r\n        {this.renderDescription()}\r\n        {this.renderAuthor()}\r\n        {this.renderFooter()}\r\n        {this.renderActions()}\r\n      </UiCard>\r\n    );\r\n  }\r\n}\r\n","interface IModuleCatalogItem {\r\n  name: string;\r\n  title: string;\r\n  url: string;\r\n}\r\n\r\n// TODO load from url\r\nexport const catalog: IModuleCatalogItem[] = [{\r\n  name: 'reactron-openweathermap',\r\n  title: 'Weather (openweathermap.com)',\r\n  url: 'https://github.com/schirkan/reactron-openweathermap'\r\n}, {\r\n  name: 'reactron-analog-clock',\r\n  title: 'Analog clock',\r\n  url: 'https://github.com/schirkan/reactron-analog-clock'\r\n}, {\r\n  name: 'reactron-scifi-dashboard',\r\n  title: 'Scifi-Dashboard',\r\n  url: 'https://github.com/schirkan/reactron-scifi-dashboard'\r\n}, {\r\n  name: 'reactron-bring-shopping-list',\r\n  title: 'Shopping list (getbring.com)',\r\n  url: 'https://github.com/schirkan/reactron-bring-shopping-list'\r\n}, {\r\n  name: 'reactron-vrr-departure',\r\n  title: 'Public transport (vrr.de)',\r\n  url: 'https://github.com/schirkan/reactron-vrr-departure'\r\n}, {\r\n  name: 'reactron-icalendar',\r\n  title: 'Calendar (via iCal-URL)',\r\n  url: 'https://github.com/schirkan/reactron-icalendar'\r\n}, {\r\n  name: 'reactron-rss-feed',\r\n  title: 'RSS Feed',\r\n  url: 'https://github.com/schirkan/reactron-rss-feed'\r\n}];\r\n","import * as BrandIcons from '@fortawesome/free-brands-svg-icons';\r\nimport * as SolidIcons from '@fortawesome/free-solid-svg-icons';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { IModuleRepositoryItem } from '@schirkan/reactron-interfaces';\r\nimport * as React from 'react';\r\nimport UiButton from '../../UiButton/UiButton';\r\nimport UiCard from '../../UiCard/UiCard';\r\nimport UiCardTitle from '../../UiCardTitle/UiCardTitle';\r\nimport { catalog } from './catalog';\r\n\r\nimport './ModuleCatalog.scss';\r\n\r\nexport interface IModuleCatalogProps {\r\n  modules: IModuleRepositoryItem[];\r\n  onAdd: (url: string) => void;\r\n}\r\n\r\nexport default class ModuleCatalog extends React.Component<IModuleCatalogProps> {\r\n  private renderCatalogItems() {\r\n    const items: JSX.Element[] = catalog.map(item => {\r\n      const installed = this.props.modules.some(x => x.name === item.name);\r\n      const install = () => this.props.onAdd(item.url);\r\n      return (\r\n        <div className=\"ModuleCatalogItem\" key={item.name}>\r\n          <a className=\"clickable\" href={item.url} target=\"_blank\">\r\n            <FontAwesomeIcon icon={BrandIcons.faGithub} /> {item.title}\r\n          </a>\r\n          <UiButton disabled={installed} onClick={install}>\r\n            <FontAwesomeIcon icon={SolidIcons.faDownload} /> Add\r\n          </UiButton>\r\n        </div>\r\n      );\r\n    });\r\n\r\n    return items;\r\n  }\r\n\r\n  public render() {\r\n    return (\r\n      <UiCard className=\"ModuleCatalog\">\r\n        <UiCardTitle><FontAwesomeIcon icon={SolidIcons.faCubes} /> Module Catalog</UiCardTitle>\r\n        {this.renderCatalogItems()}\r\n      </UiCard>\r\n    );\r\n  }\r\n}\r\n","import * as SolidIcons from '@fortawesome/free-solid-svg-icons';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { IModuleRepositoryItem } from '@schirkan/reactron-interfaces';\r\nimport * as React from 'react';\r\nimport UiButton from '../../UiButton/UiButton';\r\nimport UiCard from '../../UiCard/UiCard';\r\nimport UiCardButtonRow from '../../UiCardButtonRow/UiCardButtonRow';\r\n\r\nimport './UpdateModulesCard.scss';\r\n\r\nexport interface IUpdateModulesCardProps {\r\n  checkingUpdates: boolean;\r\n  modules: IModuleRepositoryItem[];\r\n  onCheckUpdates: () => void;\r\n  onUpdateAll: () => void;\r\n  onUpdateModule: (module: IModuleRepositoryItem) => void;\r\n}\r\n\r\nexport default class UpdateModulesCard extends React.Component<IUpdateModulesCardProps> {\r\n  public render() {\r\n    const modulesWithUpdates = this.props.modules.filter(x => x.hasUpdate);\r\n    const isChecked = this.props.modules.some(x => x.hasUpdate !== undefined);\r\n    const updatesTitle = isChecked ? modulesWithUpdates.length : '-';\r\n\r\n    return (\r\n      <UiCard className=\"UpdateModulesCard\">\r\n        <UiCardButtonRow divider=\"full\">\r\n          <div>Updates: {updatesTitle}</div>\r\n          <UiButton className=\"checkUpdatesButton\" onClick={this.props.onCheckUpdates} disabled={this.props.checkingUpdates}>\r\n            <FontAwesomeIcon icon={SolidIcons.faSyncAlt} spin={this.props.checkingUpdates} /> Check\r\n          </UiButton>\r\n          <UiButton className=\"updateAllButton\" onClick={this.props.onUpdateAll} disabled={!modulesWithUpdates.length}>\r\n            <FontAwesomeIcon icon={SolidIcons.faDownload} /> Update All\r\n          </UiButton>\r\n        </UiCardButtonRow>\r\n      </UiCard>\r\n    );\r\n  }\r\n}\r\n","import { ICommandResult, IModuleRepositoryItem, IReactronComponentContext } from '@schirkan/reactron-interfaces';\r\nimport * as React from 'react';\r\nimport Loading from '../Loading/Loading';\r\nimport UiFlowLayout from '../UiFlowLayout/UiFlowLayout';\r\nimport UiLoadingCard from '../UiLoadingCard/UiLoadingCard';\r\nimport UiOverlay from '../UiOverlay/UiOverlay';\r\nimport UiTab from '../UiTabs/UiTab';\r\nimport UiTabs from '../UiTabs/UiTabs';\r\nimport AddModuleCard from './AddModuleCard/AddModuleCard';\r\nimport CommandResult from './CommandResult/CommandResult';\r\nimport ModuleCard from './ModuleCard/ModuleCard';\r\nimport ModuleCatalog from './ModuleCatalog/ModuleCatalog';\r\nimport UpdateModulesCard from './UpdateModulesCard/UpdateModulesCard';\r\nimport { AdminPageContext } from '../AdminPageContext';\r\n\r\nimport './ModuleManagerPage.scss';\r\n\r\nexport interface IModuleManagerPageState {\r\n  loading: boolean;\r\n  checkingUpdates: boolean;\r\n  showResult: boolean;\r\n  results: ICommandResult[];\r\n  modules: IModuleRepositoryItem[];\r\n}\r\n\r\nexport default class ModuleManagerPage extends React.Component<any, IModuleManagerPageState> {\r\n  public static contextType = AdminPageContext;\r\n  public context: IReactronComponentContext;\r\n\r\n  constructor(props: any) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      loading: false,\r\n      checkingUpdates: false,\r\n      showResult: false,\r\n      results: [],\r\n      modules: []\r\n    };\r\n\r\n    this.loadModules = this.loadModules.bind(this);\r\n    this.checkUpdates = this.checkUpdates.bind(this);\r\n    this.updateAll = this.updateAll.bind(this);\r\n    this.updateModule = this.updateModule.bind(this);\r\n    this.removeModule = this.removeModule.bind(this);\r\n    this.rebuildModule = this.rebuildModule.bind(this);\r\n    this.addModule = this.addModule.bind(this);\r\n    this.hideResult = this.hideResult.bind(this);\r\n  }\r\n\r\n  public componentDidMount() {\r\n    this.loadModules();\r\n  }\r\n\r\n  public loadModules(): Promise<void> {\r\n    return this.context.services.modules.getAll()\r\n      .then(modules => this.setState({ modules }))\r\n      .catch(); // TODO\r\n  }\r\n\r\n  public async checkUpdates(): Promise<void> {\r\n    this.setState({ checkingUpdates: true });\r\n    await this.context.services.modules.checkUpdates();\r\n    this.setState({ checkingUpdates: false });\r\n    await this.loadModules();\r\n  }\r\n\r\n  public async updateAll(): Promise<void> {\r\n    const modulesWithUpdates = this.state.modules.filter(x => x.hasUpdate);\r\n    if (!modulesWithUpdates.length) {\r\n      return;\r\n    }\r\n\r\n    const results: ICommandResult[] = [];\r\n    this.setState({ loading: true });\r\n    try {\r\n      for (const module of modulesWithUpdates) {\r\n        const result = await this.context.services.modules.update(module.name);\r\n        results.push(...result);\r\n      }\r\n      this.showResult(results);\r\n    } catch (error) {\r\n      this.showError(error);\r\n    }\r\n    await this.loadModules();\r\n  }\r\n\r\n  public async updateModule(module: IModuleRepositoryItem): Promise<void> {\r\n    if (!module.hasUpdate) {\r\n      return;\r\n    };\r\n\r\n    this.setState({ loading: true });\r\n    try {\r\n      const result = await this.context.services.modules.update(module.name);\r\n      this.showResult(result);\r\n    } catch (error) {\r\n      this.showError(error);\r\n    }\r\n    await this.loadModules();\r\n  }\r\n\r\n  public async rebuildModule(module: IModuleRepositoryItem): Promise<void> {\r\n    if (!module.canBuild) {\r\n      return;\r\n    };\r\n\r\n    this.setState({ loading: true });\r\n    try {\r\n      const result = await this.context.services.modules.rebuild(module.name);\r\n      this.showResult(result);\r\n    } catch (error) {\r\n      this.showError(error);\r\n    }\r\n    await this.loadModules();\r\n  }\r\n\r\n  public async removeModule(module: IModuleRepositoryItem): Promise<void> {\r\n    if (!module.canRemove) {\r\n      return;\r\n    };\r\n\r\n    this.setState({ loading: true });\r\n    try {\r\n      const result = await this.context.services.modules.remove(module.name);\r\n      this.showResult(result);\r\n    } catch (error) {\r\n      this.showError(error);\r\n    }\r\n    await this.loadModules();\r\n  }\r\n\r\n  public async addModule(repository: string | null): Promise<void> {\r\n    if (!repository || !repository.trim()) {\r\n      return;\r\n    };\r\n\r\n    this.setState({ loading: true });\r\n    try {\r\n      const result = await this.context.services.modules.add(repository);\r\n      this.showResult(result);\r\n    } catch (error) {\r\n      this.showError(error);\r\n    }\r\n    await this.loadModules();\r\n  }\r\n\r\n  private showError(err: any) {\r\n    const message = err && err.message || JSON.stringify(err);\r\n    const result = { command: 'Error', success: false, log: [message] } as ICommandResult;\r\n    this.setState({ loading: false, showResult: true, results: [result] });\r\n  }\r\n\r\n  private showResult(results: ICommandResult[]) {\r\n    this.setState({ loading: false, showResult: true, results });\r\n  }\r\n\r\n  public hideResult() {\r\n    this.setState({ showResult: false });\r\n  }\r\n\r\n  public render() {\r\n    return (\r\n      <section className=\"ModuleManagerPage\">\r\n        {this.state.loading && (\r\n          <UiOverlay><Loading center={true} /></UiOverlay>\r\n        )}\r\n        {this.state.showResult && (\r\n          <UiOverlay>\r\n            <CommandResult results={this.state.results} onClose={this.hideResult} />\r\n          </UiOverlay>\r\n        )}\r\n\r\n        <UiTabs>\r\n          <UiTab title=\"Installed\">\r\n            <UiFlowLayout>\r\n              <UpdateModulesCard\r\n                checkingUpdates={this.state.checkingUpdates}\r\n                modules={this.state.modules}\r\n                onCheckUpdates={this.checkUpdates}\r\n                onUpdateAll={this.updateAll}\r\n                onUpdateModule={this.updateModule} />\r\n            </UiFlowLayout>\r\n            {!this.state.modules.length && (\r\n              <UiFlowLayout>\r\n                <UiLoadingCard />\r\n              </UiFlowLayout>\r\n            )}\r\n            <UiFlowLayout>\r\n              {this.state.modules.map(item =>\r\n                <ModuleCard key={item.name}\r\n                  module={item}\r\n                  onRemove={this.removeModule}\r\n                  onRebuild={this.rebuildModule}\r\n                  onUpdate={this.updateModule} />)}\r\n            </UiFlowLayout>\r\n          </UiTab>\r\n          <UiTab title=\"Add New\">\r\n            <UiFlowLayout>\r\n              <AddModuleCard onAdd={this.addModule} />\r\n            </UiFlowLayout>\r\n            <UiFlowLayout>\r\n              <ModuleCatalog onAdd={this.addModule} modules={this.state.modules} />\r\n            </UiFlowLayout>\r\n          </UiTab>\r\n        </UiTabs>\r\n\r\n      </section>\r\n    );\r\n  }\r\n}\r\n","import * as React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nimport './Navigation.scss';\r\n\r\nexport default class Navigation extends React.Component {\r\n  public render() {\r\n    return (\r\n      <section className=\"Navigation\">\r\n        <NavLink activeClassName=\"active\" to=\"/admin/ModuleManager\" role=\"button\">Modules</NavLink>\r\n        <NavLink activeClassName=\"active\" to=\"/admin/ServiceManager\" role=\"button\">Services</NavLink>\r\n        <NavLink activeClassName=\"active\" to=\"/admin/Pages\" role=\"button\">Pages</NavLink>\r\n        <NavLink activeClassName=\"active\" to=\"/admin/Settings\" role=\"button\">Settings</NavLink>\r\n        <NavLink activeClassName=\"active\" to=\"/admin/System\" role=\"button\">System</NavLink>\r\n      </section>\r\n    );\r\n  }\r\n}\r\n","export const confirm = <TArgs = any>(callback: (args?: TArgs) => any, text: string) => {\r\n    return (args?: TArgs) => {\r\n        if (window.confirm(text)) {\r\n            return callback(args);\r\n        }\r\n    }\r\n};","import { IFieldDefinition } from \"@schirkan/reactron-interfaces\";\r\n\r\nexport const getDefaultFieldValue = (field: IFieldDefinition) => {\r\n  const defaultValue = field.defaultValue;\r\n\r\n  if (field.isArray) {\r\n    if (defaultValue && Array.isArray(defaultValue)) {\r\n      return defaultValue;\r\n    }\r\n    return [];\r\n  }\r\n\r\n  switch (field.valueType) {\r\n    case 'object':\r\n      let result: any = defaultValue;\r\n\r\n      if (result === undefined) {\r\n        result = getDefaultObjectValue(field.fields);\r\n      }\r\n\r\n      return result;\r\n    case 'number':\r\n      return defaultValue || 0;\r\n    case 'boolean':\r\n      return defaultValue || false;\r\n    case 'string':\r\n      return defaultValue || '';\r\n    case 'style':\r\n      return defaultValue || {};\r\n    case 'webComponent':\r\n      return undefined;\r\n  }\r\n  return undefined;\r\n};\r\n\r\nexport const getDefaultObjectValue = (fields?: IFieldDefinition[]) => {\r\n  const result = {};\r\n  if (fields) {\r\n    fields.forEach(f => {\r\n      result[f.name] = getDefaultFieldValue(f);\r\n    });\r\n  }\r\n  return result;\r\n};","import * as React from 'react';\r\n\r\ninterface IErrorBoundaryState {\r\n  error: any;\r\n}\r\n\r\nexport default class ErrorBoundary extends React.Component<any, IErrorBoundaryState> {\r\n  constructor(props: any) {\r\n    super(props);\r\n    this.state = { error: null };\r\n  }\r\n\r\n  public componentDidCatch(error: any, info: any) {\r\n    console.log(error);\r\n    console.log(info);\r\n    this.setState({ error });\r\n  }\r\n\r\n  public render() {\r\n    if (this.state.error) {\r\n      return <h1>Something went wrong.</h1>;\r\n    }\r\n    return this.props.children;\r\n  }\r\n}","\"use strict\";\r\nexports.__esModule = true;\r\nvar Guid = /** @class */ (function () {\r\n    function Guid(guid) {\r\n        if (!guid) {\r\n            throw new TypeError(\"Invalid argument; `value` has no value.\");\r\n        }\r\n        this.value = Guid.EMPTY;\r\n        if (guid && Guid.isGuid(guid)) {\r\n            this.value = guid;\r\n        }\r\n    }\r\n    Guid.isGuid = function (guid) {\r\n        var value = guid.toString();\r\n        return guid && (guid instanceof Guid || Guid.validator.test(value));\r\n    };\r\n    Guid.create = function () {\r\n        return new Guid([Guid.gen(2), Guid.gen(1), Guid.gen(1), Guid.gen(1), Guid.gen(3)].join(\"-\"));\r\n    };\r\n    Guid.createEmpty = function () {\r\n        return new Guid(\"emptyguid\");\r\n    };\r\n    Guid.parse = function (guid) {\r\n        return new Guid(guid);\r\n    };\r\n    Guid.raw = function () {\r\n        return [Guid.gen(2), Guid.gen(1), Guid.gen(1), Guid.gen(1), Guid.gen(3)].join(\"-\");\r\n    };\r\n    Guid.gen = function (count) {\r\n        var out = \"\";\r\n        for (var i = 0; i < count; i++) {\r\n            // tslint:disable-next-line:no-bitwise\r\n            out += (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\r\n        }\r\n        return out;\r\n    };\r\n    Guid.prototype.equals = function (other) {\r\n        // Comparing string `value` against provided `guid` will auto-call\r\n        // toString on `guid` for comparison\r\n        return Guid.isGuid(other) && this.value === other.toString();\r\n    };\r\n    Guid.prototype.isEmpty = function () {\r\n        return this.value === Guid.EMPTY;\r\n    };\r\n    Guid.prototype.toString = function () {\r\n        return this.value;\r\n    };\r\n    Guid.prototype.toJSON = function () {\r\n        return {\r\n            value: this.value\r\n        };\r\n    };\r\n    Guid.validator = new RegExp(\"^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$\", \"i\");\r\n    Guid.EMPTY = \"00000000-0000-0000-0000-000000000000\";\r\n    return Guid;\r\n}());\r\nexports.Guid = Guid;\r\n","type Callback<TData> = (data?: TData) => any;\r\n\r\nexport class SimpleEvent<TData = undefined> {\r\n    private subscriptions: Array<Callback<TData>> = [];\r\n\r\n    public subscribe(callback: Callback<TData>) {\r\n        this.subscriptions.push(callback);\r\n    }\r\n\r\n    public unsubscribe(callback: Callback<TData>) {\r\n        const index = this.subscriptions.indexOf(callback);\r\n        if (index >= 0) {\r\n            this.subscriptions.splice(index);\r\n        }\r\n    }\r\n\r\n    public async publish(data?: TData): Promise<void> {\r\n        for (const sub of this.subscriptions) {\r\n            await Promise.resolve(sub(data));\r\n        }\r\n    }\r\n}","import { IWebComponentOptions, IReactronComponentContext, IReactronComponentDefinition } from \"@schirkan/reactron-interfaces\";\r\nimport * as React from \"react\";\r\nimport { SimpleEvent } from \"./SimpleEvent\";\r\n\r\nexport interface IReactronComponentDefinitionItem {\r\n  key: string;\r\n  moduleName: string;\r\n  definition: IReactronComponentDefinition;\r\n}\r\n\r\nexport class OptionsCardContextData {\r\n  public readonly onSave = new SimpleEvent();\r\n  public readonly onChange = new SimpleEvent<IWebComponentOptions[]>();\r\n  private removedWebComponents: IWebComponentOptions[] = [];\r\n  private changedWebComponents: IWebComponentOptions[] = [];\r\n  private createdWebComponents: IWebComponentOptions[] = [];\r\n  private components: IWebComponentOptions[] = [];\r\n  private componentDefinitions: IReactronComponentDefinitionItem[] = [];\r\n\r\n  constructor(public componentContext?: IReactronComponentContext) {\r\n    this.getAllComponents = this.getAllComponents.bind(this);\r\n    this.getAllComponentDefinitions = this.getAllComponentDefinitions.bind(this);\r\n    this.getComponentDefinition = this.getComponentDefinition.bind(this);\r\n    this.saveWebComponents = this.saveWebComponents.bind(this);\r\n    this.onSave.subscribe(this.saveWebComponents);    \r\n  }\r\n\r\n  public async init() {\r\n    if (this.componentContext) {\r\n      // load all configured components\r\n      this.components = await this.componentContext.services.components.getAll();\r\n      \r\n      // create copy\r\n      this.components = JSON.parse(JSON.stringify(this.components));\r\n\r\n      // load all defined components\r\n      const result = await this.componentContext.componentLoader.getAllComponents();\r\n      Object.keys(result).forEach(moduleName => {\r\n        const components = result[moduleName];\r\n        components.forEach(definition => {\r\n          const key = moduleName + '.' + definition.name;\r\n          this.componentDefinitions.push({ moduleName, definition, key });\r\n        });\r\n      });\r\n    }\r\n  }\r\n\r\n  public getClipBoardComponents() {\r\n    return this.components.filter(x => !x.parentId);\r\n  }\r\n\r\n  public getAllComponents() {\r\n    return this.components;\r\n  }\r\n\r\n  public getAllComponentDefinitions() {\r\n    return this.componentDefinitions;\r\n  }\r\n\r\n  public getComponentDefinition(componentId: string):IReactronComponentDefinition|undefined {\r\n    if (!componentId) {\r\n      return undefined;\r\n    }\r\n    const component = this.components.find(x => x.id === componentId);\r\n    if (!component) {\r\n      return undefined;\r\n    }\r\n\r\n    const componentKey = component.moduleName + '.' + component.componentName;\r\n    const componentDefinition = this.componentDefinitions.find(x => x.key === componentKey);\r\n    return componentDefinition && componentDefinition.definition;\r\n  }\r\n\r\n  private async saveWebComponents(): Promise<void> {\r\n    console.log('removedWebComponents', this.removedWebComponents);\r\n    console.log('createdWebComponents', this.createdWebComponents);\r\n    console.log('changedWebComponents', this.changedWebComponents);\r\n\r\n    if (this.componentContext) {\r\n      // add webComponents\r\n      for (const item of this.createdWebComponents) {\r\n        await this.componentContext.services.components.createOrUpdate(item);\r\n      }\r\n\r\n      // change webComponents\r\n      for (const item of this.changedWebComponents) {\r\n        await this.componentContext.services.components.createOrUpdate(item);\r\n      }\r\n\r\n      // delete webComponents\r\n      for (const item of this.removedWebComponents) {\r\n        await this.componentContext.services.components.delete(item.id);\r\n      }\r\n    }\r\n\r\n    // reset context\r\n    this.removedWebComponents = [];\r\n    this.changedWebComponents = [];\r\n    this.createdWebComponents = [];\r\n  }\r\n\r\n  public removeWebComponentById(id: string) {\r\n    const component = this.components.find(x => x.id === id);\r\n    if (component) {\r\n      this.webComponentRemoved(component);\r\n    }\r\n  }\r\n\r\n  public webComponentRemoved(item: IWebComponentOptions) {\r\n    console.log('webComponentRemoved', item);\r\n\r\n    // check if previously created\r\n    const createdItemIndex = this.createdWebComponents.findIndex(x => x.id === item.id);\r\n    if (createdItemIndex >= 0) {\r\n      // remove from createdWebComponents\r\n      this.createdWebComponents.splice(createdItemIndex, 1);\r\n    } else {\r\n      // add to removedWebComponents\r\n      this.removedWebComponents.push(item);\r\n    }\r\n\r\n    // remove from list\r\n    this.components = this.components.filter(x => x.id !== item.id);\r\n    this.onChange.publish(this.components);\r\n  }\r\n\r\n  public webComponentChanged(item: IWebComponentOptions) {\r\n    console.log('webComponentChanged', item);\r\n\r\n    // check if previously created\r\n    const createdItemIndex = this.createdWebComponents.findIndex(x => x.id === item.id);\r\n    if (createdItemIndex >= 0) {\r\n      // remove old item from createdWebComponents\r\n      this.createdWebComponents.splice(createdItemIndex, 1);\r\n      // and add new item to createdWebComponents\r\n      this.changedWebComponents.push(item);\r\n    } else {\r\n      // remove previously changed items\r\n      this.changedWebComponents = this.changedWebComponents.filter(x => x.id !== item.id);\r\n      // add to changedWebComponents\r\n      this.changedWebComponents.push(item);\r\n    }\r\n\r\n    // check if previously removed\r\n    const removedItemIndex = this.removedWebComponents.findIndex(x => x.id === item.id);\r\n    if (removedItemIndex >= 0) {\r\n      // remove old item from removedWebComponents\r\n      this.removedWebComponents.splice(removedItemIndex, 1);\r\n    }\r\n\r\n    // add / update list\r\n    const existingComponentIndex = this.components.findIndex(x => x.id === item.id);\r\n    if (existingComponentIndex >= 0) {\r\n      this.components[existingComponentIndex] = item;\r\n    } else {\r\n      this.components.push(item);\r\n    }\r\n    this.onChange.publish(this.components);\r\n  }\r\n\r\n  public webComponentCreated(item: IWebComponentOptions) {\r\n    console.log('webComponentCreated', item);\r\n\r\n    // add to createdWebComponents\r\n    this.createdWebComponents.push(item);\r\n    \r\n    // add to list\r\n    this.components.push(item);\r\n    this.onChange.publish(this.components);\r\n  }\r\n}\r\n\r\nexport const OptionCardContext = React.createContext<OptionsCardContextData>(new OptionsCardContextData());","import * as RegularIcons from '@fortawesome/free-regular-svg-icons';\r\nimport * as SolidIcons from '@fortawesome/free-solid-svg-icons';\r\nimport * as React from 'react';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { IFieldDefinition, IInputComponentProps } from '@schirkan/reactron-interfaces';\r\nimport { Guid } from 'guid-typescript';\r\nimport { getDefaultFieldValue } from 'src/common/optionsHelper';\r\nimport UiButton from '../../../UiButton/UiButton';\r\nimport OptionItem from '../../OptionItem';\r\n\r\nimport './ArrayForm.scss';\r\nimport { OptionCardContext, OptionsCardContextData } from 'src/browser/components/OptionCard/OptionCardContext';\r\n\r\nexport default class ArrayForm extends React.Component<IInputComponentProps> {\r\n  public static contextType = OptionCardContext;\r\n  public context: OptionsCardContextData;\r\n  private arrayKeys: string[] = [];\r\n\r\n  constructor(props: IInputComponentProps) {\r\n    super(props);\r\n\r\n    this.arrayItemAdd = this.arrayItemAdd.bind(this);\r\n    this.arrayItemRemove = this.arrayItemRemove.bind(this);\r\n    this.arrayItemMoveUp = this.arrayItemMoveUp.bind(this);\r\n    this.arrayItemMoveDown = this.arrayItemMoveDown.bind(this);\r\n  }\r\n\r\n  private arrayItemChange(index: number, definition: IFieldDefinition, newValue: any) {\r\n    let array = this.props.value || [];\r\n    array = array.slice();\r\n    array[index] = newValue;\r\n    this.props.valueChange(this.props.definition, array);\r\n  }\r\n\r\n  private arrayItemRemove(index: number) {\r\n    let array: any[] = this.props.value || [];\r\n    array = array.slice();\r\n    const deleted = array.splice(index, 1);\r\n    this.findAndRemoveWebComponents(deleted[0], this.props.definition);\r\n\r\n    this.arrayKeys.splice(index, 1);\r\n    this.props.valueChange(this.props.definition, array);\r\n  }\r\n\r\n  private findAndRemoveWebComponents(item: any, definition: IFieldDefinition) {\r\n    if (definition.valueType === 'webComponent') {\r\n      this.context.removeWebComponentById(item);\r\n    } else if (definition.valueType === 'object') {\r\n      if (definition.fields) {\r\n        definition.fields.forEach(field => {\r\n          const fieldValue = item[field.name];\r\n          if (fieldValue) {\r\n            if (field.isArray) {\r\n              fieldValue.forEach((arrayItem: any) => {\r\n                this.findAndRemoveWebComponents(arrayItem, field);\r\n              });\r\n            } else {\r\n              this.findAndRemoveWebComponents(fieldValue, field);\r\n            }\r\n          }\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  private arrayItemMoveUp(index: number) {\r\n    const array = this.props.value || [];\r\n    if (index > 0) {\r\n      const item = array.splice(index, 1)[0];\r\n      array.splice(index - 1, 0, item);\r\n\r\n      const keyItem = this.arrayKeys.splice(index, 1)[0];\r\n      this.arrayKeys.splice(index - 1, 0, keyItem);\r\n\r\n      this.props.valueChange(this.props.definition, array);\r\n    }\r\n  }\r\n\r\n  private arrayItemMoveDown(index: number) {\r\n    const array = this.props.value || [];\r\n    if (index < array.length - 1) {\r\n      const item = array.splice(index, 1)[0];\r\n      array.splice(index + 1, 0, item);\r\n\r\n      const keyItem = this.arrayKeys.splice(index, 1)[0];\r\n      this.arrayKeys.splice(index + 1, 0, keyItem);\r\n\r\n      this.props.valueChange(this.props.definition, array);\r\n    }\r\n  }\r\n\r\n  private arrayItemAdd() {\r\n    const arrayItemDefinition = { ...this.props.definition };\r\n    arrayItemDefinition.isArray = false;\r\n    const newItem = getDefaultFieldValue(arrayItemDefinition);\r\n\r\n    if (typeof newItem === 'object') {\r\n      newItem.__new = true;\r\n    }\r\n\r\n    let array = this.props.value || [];\r\n    array = array.slice(); // copy\r\n    array.push(newItem); // add item\r\n    this.props.valueChange(this.props.definition, array);\r\n  }\r\n\r\n  private renderArrayItem(value: any, index: number) {\r\n    const arrayItemDefinition = { ...this.props.definition };\r\n    arrayItemDefinition.isArray = false;\r\n    arrayItemDefinition.displayName = 'Item ' + (index + 1);\r\n\r\n    let key = this.arrayKeys[index];\r\n    if (!key) {\r\n      key = this.arrayKeys[index] = Guid.raw();\r\n    }\r\n\r\n    return (\r\n      <React.Fragment key={key}>\r\n        <OptionItem definition={arrayItemDefinition} value={value}\r\n          valueChange={this.arrayItemChange.bind(this, index)}>\r\n          <UiButton onClick={this.arrayItemRemove.bind(this, index)}>\r\n            <FontAwesomeIcon icon={RegularIcons.faTrashAlt} />\r\n          </UiButton>\r\n          <UiButton onClick={this.arrayItemMoveUp.bind(this, index)}>\r\n            <FontAwesomeIcon icon={RegularIcons.faArrowAltCircleUp} />\r\n          </UiButton>\r\n          <UiButton onClick={this.arrayItemMoveDown.bind(this, index)}>\r\n            <FontAwesomeIcon icon={RegularIcons.faArrowAltCircleDown} />\r\n          </UiButton>\r\n        </OptionItem>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  public render() {\r\n    const array: any[] = this.props.value || [];\r\n    return (\r\n      <React.Fragment>\r\n        {array.map((value, index) => this.renderArrayItem(value, index))}\r\n        <UiButton className=\"add-array-item\" onClick={this.arrayItemAdd}>\r\n          <FontAwesomeIcon icon={SolidIcons.faPlus} /> Add item\r\n        </UiButton>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n","import * as SolidIcons from '@fortawesome/free-solid-svg-icons';\r\nimport { IFieldDefinition, IInputComponentProps } from '@schirkan/reactron-interfaces';\r\nimport { IInputControls, IInputControlsProvider } from '../IInputControls';\r\nimport ArrayForm from './ArrayForm';\r\n\r\nexport class ArrayControlsProvider implements IInputControlsProvider {\r\n  public match(definition: IFieldDefinition): boolean {\r\n    return !!definition.isArray;\r\n  }\r\n\r\n  public get(): IInputControls {\r\n    return {\r\n      icon: SolidIcons.faList,\r\n      detailsControl: ArrayForm,\r\n      inputControl: (props: IInputComponentProps) => {\r\n        const array = props && props.value as any[] || [];\r\n        return '(' + array.length + ' items)';\r\n      }\r\n    };\r\n  }\r\n}","import { IInputComponentProps } from '@schirkan/reactron-interfaces';\r\nimport * as React from 'react';\r\n\r\nimport './BooleanInputControl.scss';\r\n\r\nexport class BooleanInputControl extends React.Component<IInputComponentProps> {\r\n  constructor(props: IInputComponentProps) {\r\n    super(props);\r\n    this.onCheckboxChange = this.onCheckboxChange.bind(this);\r\n  }\r\n\r\n  private onCheckboxChange(e: React.ChangeEvent<HTMLInputElement>) {\r\n    this.props.valueChange(this.props.definition, e.currentTarget.checked);\r\n  }\r\n\r\n  public render() {\r\n    const inputProps: { checked?: boolean } = {};\r\n    if (this.props.value) {\r\n      inputProps.checked = true;\r\n    }\r\n    return (\r\n      <label className=\"BooleanInputControl\">\r\n        <input type=\"checkbox\" id={this.props.uniqueId} checked={this.props.value} onChange={this.onCheckboxChange} />\r\n        <span className=\"slider\" />\r\n      </label>\r\n    );\r\n  }\r\n}","import { IFieldDefinition } from '@schirkan/reactron-interfaces';\r\nimport { IInputControls, IInputControlsProvider } from '../IInputControls';\r\nimport { BooleanInputControl } from './BooleanInputControl';\r\n\r\nexport class BooleanControlsProvider implements IInputControlsProvider {\r\n  public match(definition: IFieldDefinition): boolean {\r\n    return definition.valueType === 'boolean';\r\n  }\r\n\r\n  public get(): IInputControls {\r\n    return {\r\n      inputControl: BooleanInputControl\r\n    }\r\n  }\r\n}\r\n","import { IInputComponentProps } from '@schirkan/reactron-interfaces';\r\nimport * as React from 'react';\r\n\r\nexport class NumberInputControl extends React.Component<IInputComponentProps> {\r\n  constructor(props: IInputComponentProps) {\r\n    super(props);\r\n    this.onInputChange = this.onInputChange.bind(this);\r\n  }\r\n\r\n  private onInputChange(e: React.ChangeEvent<HTMLInputElement>) {\r\n    this.props.valueChange(this.props.definition, e.currentTarget.value);\r\n  }\r\n\r\n  public render() {\r\n    const click = (e: React.MouseEvent) => {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n    };\r\n    return (\r\n      <input style={{ width: '100%' }} type=\"number\" onClick={click}\r\n        id={this.props.uniqueId} value={this.props.value}\r\n        onChange={this.onInputChange} step={this.props.definition.stepSize}\r\n        min={this.props.definition.minValue} max={this.props.definition.maxValue} />\r\n    );\r\n  }\r\n}\r\n","import { IInputComponentProps } from '@schirkan/reactron-interfaces';\r\nimport * as React from 'react';\r\n\r\nexport class RangeInputControl extends React.Component<IInputComponentProps> {\r\n  constructor(props: IInputComponentProps) {\r\n    super(props);\r\n    this.onInputChange = this.onInputChange.bind(this);\r\n  }\r\n\r\n  private onInputChange(e: React.ChangeEvent<HTMLInputElement>) {\r\n    this.props.valueChange(this.props.definition, e.currentTarget.value);\r\n  }\r\n\r\n  public render() {\r\n    return (\r\n      <input style={{ width: '100%' }} type=\"range\"\r\n        id={this.props.uniqueId} value={this.props.value}\r\n        onChange={this.onInputChange} step={this.props.definition.stepSize}\r\n        min={this.props.definition.minValue} max={this.props.definition.maxValue} />\r\n    );\r\n  }\r\n}\r\n","import { IFieldDefinition } from '@schirkan/reactron-interfaces';\r\nimport { IInputControls, IInputControlsProvider } from '../IInputControls';\r\nimport { NumberInputControl } from './NumberInputControl';\r\nimport { RangeInputControl } from './RangeInputControl';\r\n\r\nexport class NumberControlsProvider implements IInputControlsProvider {\r\n  public match(definition: IFieldDefinition): boolean {\r\n    return definition.valueType === 'number';\r\n  }\r\n\r\n  public get(definition: IFieldDefinition): IInputControls {\r\n    if (definition.minValue !== undefined && definition.maxValue !== undefined && definition.stepSize !== undefined) {\r\n      return {\r\n        inputControl: NumberInputControl,\r\n        detailsControl: RangeInputControl\r\n      };\r\n    }\r\n\r\n    return {\r\n      inputControl: NumberInputControl\r\n    };\r\n  }\r\n}","import { IInputComponentProps } from '@schirkan/reactron-interfaces';\r\nimport * as React from 'react';\r\nimport OptionList from '../../../OptionList/OptionList';\r\n\r\nexport class ObjectInputControl extends React.Component<IInputComponentProps> {\r\n  constructor(props: IInputComponentProps) {\r\n    super(props);\r\n    this.triggerValueChange = this.triggerValueChange.bind(this);\r\n  }\r\n\r\n  private triggerValueChange(newValue: any) {\r\n    this.props.valueChange(this.props.definition, newValue);\r\n  }\r\n\r\n  public render() {\r\n    return <OptionList fields={this.props.definition.fields} value={this.props.value} valueChange={this.triggerValueChange} />;\r\n  }\r\n}\r\n","import { IFieldDefinition } from '@schirkan/reactron-interfaces';\r\nimport { IInputControls, IInputControlsProvider } from '../IInputControls';\r\nimport { ObjectInputControl } from './ObjectInputControl';\r\n\r\nexport class ObjectControlsProvider implements IInputControlsProvider {\r\n  public match(definition: IFieldDefinition): boolean {\r\n    return definition.valueType === 'object';\r\n  }\r\n\r\n  public get(): IInputControls {\r\n    return {\r\n      detailsControl: ObjectInputControl,\r\n      // inputControl: \r\n    };\r\n  }\r\n}","import * as RegularIcons from '@fortawesome/free-regular-svg-icons';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { IInputComponentProps } from '@schirkan/reactron-interfaces';\r\nimport * as React from 'react';\r\nimport UiButton from 'src/browser/components/UiButton/UiButton';\r\n\r\nexport class PasswordInputControl extends React.Component<IInputComponentProps, { show: boolean }> {\r\n  constructor(props: IInputComponentProps) {\r\n    super(props);\r\n    this.state = { show: false };\r\n    this.onInputChange = this.onInputChange.bind(this);\r\n    this.toggleText = this.toggleText.bind(this);\r\n  }\r\n\r\n  private onInputChange(e: React.ChangeEvent<HTMLInputElement>) {\r\n    this.props.valueChange(this.props.definition, e.currentTarget.value);\r\n  }\r\n\r\n  private toggleText() {\r\n    this.setState(state => ({ show: !state.show }));\r\n  }\r\n\r\n  public render() {\r\n    return (\r\n      <div style={{ display: 'flex' }}>\r\n        <input style={{ width: '100%' }} type={this.state.show ? 'text' : 'password'} id={this.props.uniqueId} value={this.props.value} onChange={this.onInputChange} />\r\n        <UiButton onClick={this.toggleText}><FontAwesomeIcon icon={this.state.show ? RegularIcons.faEyeSlash : RegularIcons.faEye} /></UiButton>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import { IFieldDefinition } from '@schirkan/reactron-interfaces';\r\nimport { IInputControls, IInputControlsProvider } from '../IInputControls';\r\nimport { PasswordInputControl } from './PasswordInputControl';\r\n\r\nexport class PasswordControlsProvider implements IInputControlsProvider {\r\n  public match(definition: IFieldDefinition): boolean {\r\n    return definition.valueType === 'password';\r\n  }\r\n\r\n  public get(): IInputControls {\r\n    return {\r\n      inputControl: PasswordInputControl\r\n    };\r\n  }\r\n}\r\n","import * as RegularIcons from '@fortawesome/free-regular-svg-icons';\r\nimport * as SolidIcons from '@fortawesome/free-solid-svg-icons';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { IFieldDefinition, IInputComponentProps } from '@schirkan/reactron-interfaces';\r\nimport * as React from 'react';\r\nimport UiButton from '../../../UiButton/UiButton';\r\nimport OptionItem from '../../OptionItem';\r\n\r\nimport './StyleForm.scss';\r\n\r\nconst styleProperties = ['background', 'backgroundAttachment', 'backgroundColor', 'backgroundImage',\r\n  'backgroundPosition', 'backgroundRepeat', 'border', 'borderBottom',\r\n  'borderBottomColor', 'borderBottomStyle', 'borderBottomWidth', 'borderColor',\r\n  'borderLeft', 'borderLeftColor', 'borderLeftStyle', 'borderLeftWidth',\r\n  'borderRight', 'borderRightColor', 'borderRightStyle', 'borderRightWidth',\r\n  'borderStyle', 'borderTop', 'borderTopColor', 'borderTopStyle',\r\n  'borderTopWidth', 'borderWidth', 'clear', 'clip',\r\n  'color', 'cursor', 'display', 'filter',\r\n  'float', 'font', 'fontFamily', 'fontSize', 'fontVariant', 'fontWeight',\r\n  'gridArea', 'gridTemplate', 'gridTemplateArea', 'gridTemplateColumns', 'gridTemplateRows',\r\n  'height', 'left', 'letterSpacing', 'lineHeight', 'listStyle', 'listStyleImage',\r\n  'listStylePosition', 'listStyleType', 'margin', 'marginBottom',\r\n  'marginLeft', 'marginRight', 'marginTop', 'maxHeight', 'minHeight', 'maxWidth', 'minWidth',\r\n  'overflow', 'padding', 'paddingBottom', 'paddingLeft', 'paddingRight',\r\n  'paddingTop', 'pageBreakAfter', 'pageBreakBefore', 'position',\r\n  'strokeDasharray', 'strokeDashoffset', 'strokeWidth', 'textAlign',\r\n  'textDecoration', 'textIndent', 'textTransform', 'top',\r\n  'verticalAlign', 'visibility', 'width', 'zIndex'];\r\n\r\ninterface IStyleFormState {\r\n  fields: IFieldDefinition[];\r\n}\r\n\r\nexport default class StyleForm extends React.Component<IInputComponentProps, IStyleFormState> {\r\n  private newPropertySelect: HTMLSelectElement | null;\r\n\r\n  constructor(props: IInputComponentProps) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      fields: this.getFields(this.props.value)\r\n    };\r\n\r\n    this.addField = this.addField.bind(this);\r\n    this.valueChange = this.valueChange.bind(this);\r\n  }\r\n\r\n  public componentDidUpdate(prevProps: IInputComponentProps) {\r\n    if (prevProps !== this.props) {\r\n      this.setState({ fields: this.getFields(this.props.value) });\r\n    }\r\n  }\r\n\r\n  private getFields(obj: object): IFieldDefinition[] {\r\n    const fields: IFieldDefinition[] = [];\r\n\r\n    if (obj) {\r\n      Object.keys(obj).forEach(name => {\r\n        const field: IFieldDefinition = {\r\n          name,\r\n          displayName: name,\r\n          valueType: 'string',\r\n        };\r\n        fields.push(field);\r\n      });\r\n    }\r\n\r\n    return fields;\r\n  }\r\n\r\n  private valueChange(field: IFieldDefinition, value: any) {\r\n    const newValue = { ...this.props.value };\r\n    newValue[field.name] = value;\r\n    this.props.valueChange(this.props.definition, newValue);\r\n  }\r\n\r\n  private removeField(fieldName: string) {\r\n    const newValue = { ...this.props.value };\r\n    delete (newValue[fieldName]);\r\n    this.props.valueChange(this.props.definition, newValue);\r\n  }\r\n\r\n  private addField() {\r\n    if (!this.newPropertySelect) {\r\n      return;\r\n    }\r\n\r\n    const fieldName = this.newPropertySelect.value;\r\n\r\n    if (!fieldName || this.props.value && this.props.value.hasOwnProperty(fieldName)) {\r\n      return;\r\n    }\r\n\r\n    const newValue = { ...this.props.value };\r\n    newValue[fieldName] = '';\r\n    this.props.valueChange(this.props.definition, newValue);\r\n  }\r\n\r\n  public render() {\r\n    return (\r\n      <div className=\"StyleForm\">\r\n        {this.state.fields.map(field => {\r\n          const value = this.props.value && this.props.value[field.name];\r\n          return (\r\n            <OptionItem key={field.name} definition={field} value={value} valueChange={this.valueChange}>\r\n              <UiButton onClick={this.removeField.bind(this, field.name)}>\r\n                <FontAwesomeIcon icon={RegularIcons.faTrashAlt} />\r\n              </UiButton>\r\n            </OptionItem>\r\n          );\r\n        })}\r\n        <div className=\"newPropertyRow\">\r\n          <select ref={el => this.newPropertySelect = el}>\r\n            {styleProperties.map(property => <option key={property} value={property}>{property}</option>)}\r\n          </select>\r\n          <UiButton onClick={this.addField}>\r\n            <FontAwesomeIcon icon={SolidIcons.faPlus} /> Add\r\n          </UiButton>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import * as BrandIcons from '@fortawesome/free-brands-svg-icons';\r\nimport { IFieldDefinition, IInputComponentProps } from '@schirkan/reactron-interfaces';\r\nimport { IInputControls, IInputControlsProvider } from '../IInputControls';\r\nimport StyleForm from './StyleForm';\r\n\r\nexport class StyleControlsProvider implements IInputControlsProvider {\r\n  public match(definition: IFieldDefinition): boolean {\r\n    return definition.valueType === 'style';\r\n  }\r\n\r\n  public get(): IInputControls {\r\n    return {\r\n      icon: BrandIcons.faCss3,\r\n      detailsControl: StyleForm,\r\n      inputControl: (props: IInputComponentProps) => {\r\n        const text = JSON.stringify(props && props.value) || '';\r\n        return text === '{}' ? '' : text;\r\n      }\r\n    };\r\n  }\r\n}","import { IInputComponentProps } from '@schirkan/reactron-interfaces';\r\nimport * as React from 'react';\r\n\r\nexport class TextAreaInputControl extends React.Component<IInputComponentProps> {\r\n  constructor(props: IInputComponentProps) {\r\n    super(props);\r\n    this.onTextareaChange = this.onTextareaChange.bind(this);\r\n  }\r\n\r\n  private onTextareaChange(e: React.ChangeEvent<HTMLTextAreaElement>) {\r\n    this.props.valueChange(this.props.definition, e.currentTarget.value);\r\n  }\r\n\r\n  public render() {\r\n    return <textarea id={this.props.uniqueId} value={this.props.value} onChange={this.onTextareaChange} rows={this.props.definition.textRows} />;\r\n  }\r\n}\r\n","import { IInputComponentProps } from '@schirkan/reactron-interfaces';\r\nimport * as React from 'react';\r\n\r\nexport class TextBoxInputControl extends React.Component<IInputComponentProps> {\r\n  constructor(props: IInputComponentProps) {\r\n    super(props);\r\n    this.onInputChange = this.onInputChange.bind(this);\r\n  }\r\n\r\n  private onInputChange(e: React.ChangeEvent<HTMLInputElement>) {\r\n    this.props.valueChange(this.props.definition, e.currentTarget.value);\r\n  }\r\n\r\n  public render() {\r\n    return <input type=\"text\" id={this.props.uniqueId} value={this.props.value} onChange={this.onInputChange} />;\r\n  }\r\n}\r\n","import { IFieldDefinition, IInputComponentProps } from '@schirkan/reactron-interfaces';\r\nimport { IInputControls, IInputControlsProvider } from '../IInputControls';\r\nimport { TextAreaInputControl } from './TextAreaInputControl';\r\nimport { TextBoxInputControl } from './TextBoxInputControl';\r\n\r\nexport class TextControlsProvider implements IInputControlsProvider {\r\n  public match(definition: IFieldDefinition): boolean {\r\n    return definition.valueType === 'string';\r\n  }\r\n\r\n  public get(definition: IFieldDefinition): IInputControls {\r\n    if (definition.textRows !== undefined && definition.textRows > 1) {\r\n      return {\r\n        detailsControl: TextAreaInputControl,\r\n        inputControl: (props: IInputComponentProps) => props && props.value\r\n      };\r\n    }\r\n\r\n    return {\r\n      inputControl: TextBoxInputControl\r\n    };\r\n  }\r\n}\r\n","import { IInputComponentProps, IOptionDefinitionValue } from '@schirkan/reactron-interfaces';\r\nimport * as React from 'react';\r\n\r\ninterface IValuesInputControlState {\r\n  values?: IOptionDefinitionValue<any>[];\r\n}\r\n\r\nexport class ValuesInputControl extends React.Component<IInputComponentProps, IValuesInputControlState> {\r\n  constructor(props: IInputComponentProps) {\r\n    super(props);\r\n    this.state = {};\r\n    this.onSelectValueChange = this.onSelectValueChange.bind(this);\r\n  }\r\n\r\n  private onSelectValueChange = (e: React.ChangeEvent<HTMLSelectElement>) => {\r\n    this.props.valueChange(this.props.definition, e.currentTarget.value);\r\n  };\r\n\r\n  public componentDidMount() {\r\n    let values = this.props.definition.values || [];\r\n\r\n    if (typeof values === 'function') {\r\n      values(this.props.context).then(values => this.setState({ values }));\r\n    } else {\r\n      this.setState({ values });\r\n    }\r\n  }\r\n\r\n  public render() {\r\n    if (!this.state.values || !this.state.values.length) {\r\n      return null;\r\n    }\r\n\r\n    const options = this.state.values.map((item, index) => <option key={index} value={item.value}>{item.text}</option>);\r\n    return (\r\n      <select id={this.props.uniqueId} value={this.props.value} onChange={this.onSelectValueChange}>\r\n        <option>Select item...</option>\r\n        {options}\r\n      </select>\r\n    );\r\n  }\r\n}","import { IFieldDefinition } from '@schirkan/reactron-interfaces';\r\nimport { IInputControls, IInputControlsProvider } from '../IInputControls';\r\nimport { ValuesInputControl } from './ValuesInputControl';\r\n\r\nexport class ValuesControlsProvider implements IInputControlsProvider {\r\n  public match(definition: IFieldDefinition): boolean {\r\n    return !!(definition.values && definition.values.length);\r\n  }\r\n\r\n  public get(): IInputControls {\r\n    return {\r\n      inputControl: ValuesInputControl\r\n    };\r\n  }\r\n}","import { IWebComponentOptions, IWebPageOptions } from \"@schirkan/reactron-interfaces\";\r\nimport * as React from \"react\";\r\n\r\nexport class WebComponentFormContextData {\r\n  constructor(public parentComponent?: IWebComponentOptions, public parentPage?: IWebPageOptions) { }\r\n\r\n  public getParentId() {\r\n    return this.parentComponent && this.parentComponent.id || this.parentPage && this.parentPage.id || '';\r\n  }\r\n}\r\n\r\nexport const WebComponentFormContext = React.createContext<WebComponentFormContextData>(new WebComponentFormContextData());","import * as RegularIcons from '@fortawesome/free-regular-svg-icons';\r\nimport * as SolidIcons from '@fortawesome/free-solid-svg-icons';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { IInputComponentProps, IWebComponentOptions } from '@schirkan/reactron-interfaces';\r\nimport { Guid } from 'guid-typescript';\r\nimport * as React from 'react';\r\nimport { getDefaultObjectValue } from 'src/common/optionsHelper';\r\nimport { OptionCardContext, OptionsCardContextData, IReactronComponentDefinitionItem } from '../../../OptionCard/OptionCardContext';\r\nimport OptionList from '../../../OptionList/OptionList';\r\nimport UiButton from '../../../UiButton/UiButton';\r\nimport { WebComponentFormContext, WebComponentFormContextData } from './WebComponentFormContext';\r\n\r\nimport './WebComponentForm.scss';\r\n\r\ninterface IWebComponentFormState {\r\n  selectedComponentDefinition?: IReactronComponentDefinitionItem;\r\n  selectedWebComponentOptions?: IWebComponentOptions;\r\n}\r\n\r\nexport default class WebComponentForm extends React.Component<IInputComponentProps, IWebComponentFormState> {\r\n  public static contextType = OptionCardContext;\r\n  public context: OptionsCardContextData;\r\n  public webComponentFormContext: WebComponentFormContextData;\r\n\r\n  constructor(props: IInputComponentProps) {\r\n    super(props);\r\n\r\n    this.state = {};\r\n\r\n    this.onOptionsChange = this.onOptionsChange.bind(this);\r\n    this.removeWebComponent = this.removeWebComponent.bind(this);\r\n    this.cutWebComponent = this.cutWebComponent.bind(this);\r\n    this.onContextComponentsChange = this.onContextComponentsChange.bind(this);\r\n    this.onSelectedComponentDefinitionChange = this.onSelectedComponentDefinitionChange.bind(this);\r\n  }\r\n\r\n  private onContextComponentsChange() {\r\n    if (!this.state.selectedWebComponentOptions) {\r\n      this.forceUpdate();\r\n    }\r\n  }\r\n\r\n  public componentDidMount() {\r\n    this.initCurrentComponent();\r\n    this.context.onChange.subscribe(this.onContextComponentsChange);\r\n  }\r\n\r\n  public componentDidUpdate(prevProps: IInputComponentProps) {\r\n    if (prevProps.value !== this.props.value) {\r\n      this.initCurrentComponent();\r\n    }\r\n  }\r\n\r\n  public componentWillUnmount() {\r\n    this.context.onChange.unsubscribe(this.onContextComponentsChange);\r\n  }\r\n\r\n  private initCurrentComponent() {\r\n    if (this.props.value) {\r\n      const selectedWebComponentOptions = this.context.getAllComponents().find(x => x.id === this.props.value);\r\n      if (selectedWebComponentOptions) {\r\n        const key = selectedWebComponentOptions.moduleName + '.' + selectedWebComponentOptions.componentName;\r\n        const selectedComponentDefinition = this.context.getAllComponentDefinitions().find(x => x.key === key);\r\n        if (selectedComponentDefinition) {\r\n          this.setState({ selectedComponentDefinition, selectedWebComponentOptions });\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  private onSelectedComponentDefinitionChange(e: React.ChangeEvent<HTMLSelectElement>) {\r\n    const newKey = e.currentTarget.value;\r\n\r\n    const selectedComponentDefinition = this.context.getAllComponentDefinitions().find(x => x.key === newKey);\r\n\r\n    if (!selectedComponentDefinition) {\r\n      const existingComponent = this.context.getClipBoardComponents().find(x => x.id === newKey);\r\n      if (existingComponent) {\r\n        // update parentId for existing component\r\n        existingComponent.parentId = this.webComponentFormContext.getParentId();\r\n        // notify component changed\r\n        this.context.webComponentChanged(existingComponent);\r\n        // use existing component\r\n        this.props.valueChange(this.props.definition, newKey);\r\n      }\r\n      return;\r\n    }\r\n\r\n    const currentWebComponentOptions = this.state.selectedWebComponentOptions;\r\n    let newWebComponentOptions: IWebComponentOptions | undefined;\r\n\r\n    if (selectedComponentDefinition) {\r\n      const id = currentWebComponentOptions && currentWebComponentOptions.id ||\r\n        selectedComponentDefinition.definition.name + '_' + Guid.raw();\r\n\r\n      newWebComponentOptions = {\r\n        id,\r\n        parentId: this.webComponentFormContext.getParentId(),\r\n        moduleName: selectedComponentDefinition.moduleName,\r\n        componentName: selectedComponentDefinition.definition.name,\r\n        options: getDefaultObjectValue(selectedComponentDefinition.definition.fields)\r\n      };\r\n    }\r\n\r\n    // trigger id change\r\n    const newId = newWebComponentOptions && newWebComponentOptions.id;\r\n    if (this.props.value !== newId) {\r\n      this.props.valueChange(this.props.definition, newId);\r\n\r\n      if (newWebComponentOptions) {\r\n        // notify component created\r\n        this.context.webComponentCreated(newWebComponentOptions);\r\n      } else if (currentWebComponentOptions) {\r\n        // notify component remove\r\n        this.context.webComponentRemoved(currentWebComponentOptions);\r\n      }\r\n    }\r\n\r\n    this.setState({ selectedWebComponentOptions: newWebComponentOptions, selectedComponentDefinition });\r\n  }\r\n\r\n  private cutWebComponent() {\r\n    if (this.state.selectedWebComponentOptions) {\r\n      // notify component cut\r\n      const cutComponent = this.state.selectedWebComponentOptions;\r\n      cutComponent.parentId = '';\r\n      this.context.webComponentChanged(cutComponent);\r\n\r\n      this.props.valueChange(this.props.definition, undefined);\r\n      this.setState({ selectedWebComponentOptions: undefined, selectedComponentDefinition: undefined });\r\n    }\r\n  }\r\n\r\n  private removeWebComponent() {\r\n    if (this.state.selectedWebComponentOptions) {\r\n      // notify component remove\r\n      this.context.webComponentRemoved(this.state.selectedWebComponentOptions);\r\n      this.props.valueChange(this.props.definition, undefined);\r\n      this.setState({ selectedWebComponentOptions: undefined, selectedComponentDefinition: undefined });\r\n    }\r\n  }\r\n\r\n  private onOptionsChange(newOptions: any) {\r\n    if (!this.state.selectedWebComponentOptions) {\r\n      return;\r\n    }\r\n    const newWebComponentOptions: IWebComponentOptions = { ...this.state.selectedWebComponentOptions };\r\n    newWebComponentOptions.options = newOptions;\r\n    this.setState({ selectedWebComponentOptions: newWebComponentOptions });\r\n\r\n    // notify component changed\r\n    this.context.webComponentChanged(newWebComponentOptions);\r\n  }\r\n\r\n  public renderComponentSelection() {\r\n    const selectedComponentKey = this.state.selectedComponentDefinition && this.state.selectedComponentDefinition.key || '';\r\n\r\n    if (this.state.selectedComponentDefinition) {\r\n      return (\r\n        <div className=\"componentTitle\">\r\n          <UiButton>\r\n            <FontAwesomeIcon icon={SolidIcons.faCube} />\r\n          </UiButton>\r\n          <label>\r\n            {this.props.definition.displayName}: {this.state.selectedComponentDefinition.definition.displayName} ({this.state.selectedComponentDefinition.moduleName})\r\n          </label>\r\n          <UiButton onClick={this.cutWebComponent}>\r\n            <FontAwesomeIcon icon={SolidIcons.faExternalLinkAlt} />\r\n          </UiButton>\r\n          <UiButton onClick={this.removeWebComponent}>\r\n            <FontAwesomeIcon icon={RegularIcons.faTrashAlt} />\r\n          </UiButton>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    const optionGroups: { [type: string]: IReactronComponentDefinitionItem[] } = {};\r\n    this.context.getAllComponentDefinitions()\r\n      .filter(x => x.definition.type !== 'admin-input' && x.definition.type !== 'internal')\r\n      .forEach(item => {\r\n        const type = item.definition.type || 'content';\r\n        if (!optionGroups[type]) {\r\n          optionGroups[type] = [];\r\n        }\r\n        optionGroups[type].push(item);\r\n      });\r\n\r\n    return (\r\n      <div className=\"componentSelect\">\r\n        <UiButton>\r\n          <FontAwesomeIcon icon={SolidIcons.faCube} />\r\n        </UiButton>\r\n        <label htmlFor={this.props.uniqueId}>{this.props.definition.displayName}</label>\r\n        <select id={this.props.uniqueId} value={selectedComponentKey} onChange={this.onSelectedComponentDefinitionChange}>\r\n          <option value=\"\">Select Component...</option>\r\n          <optgroup label=\"Clipboard\">\r\n            {this.context.getClipBoardComponents().map(item => (\r\n              <option key={item.id} value={item.id}>{item.componentName} ({item.moduleName})</option>\r\n            ))}\r\n          </optgroup>\r\n          {Object.keys(optionGroups).map(type =>\r\n            <optgroup key={type} label={type}>\r\n              {optionGroups[type].map(item =>\r\n                <option key={item.key} value={item.key}>{item.definition.displayName} ({item.moduleName})</option>\r\n              )}\r\n            </optgroup>\r\n          )}\r\n        </select>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  private renderComponentForm() {\r\n    if (!this.state.selectedWebComponentOptions || !this.state.selectedComponentDefinition) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <WebComponentFormContext.Provider value={new WebComponentFormContextData(this.state.selectedWebComponentOptions, this.webComponentFormContext.parentPage)}>\r\n        <OptionList value={this.state.selectedWebComponentOptions.options}\r\n          fields={this.state.selectedComponentDefinition.definition.fields}\r\n          valueChange={this.onOptionsChange} />\r\n      </WebComponentFormContext.Provider>\r\n    );\r\n  }\r\n\r\n  public render() {\r\n    return (\r\n      <div className=\"WebComponentForm\">\r\n        <WebComponentFormContext.Consumer>{value => (this.webComponentFormContext = value) && null}</WebComponentFormContext.Consumer>\r\n        {this.renderComponentSelection()}\r\n        {this.renderComponentForm()}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import { IInputComponentProps } from '@schirkan/reactron-interfaces';\r\nimport * as React from 'react';\r\n\r\nexport default class WebComponentTitle extends React.Component<IInputComponentProps<string>> {\r\n  public render() {\r\n    const definition = this.props.getComponentDefinition(this.props.value);\r\n    return definition && definition.displayName || null;\r\n  }\r\n}\r\n","import * as SolidIcons from '@fortawesome/free-solid-svg-icons';\r\nimport { IFieldDefinition } from '@schirkan/reactron-interfaces';\r\nimport { IInputControls, IInputControlsProvider } from '../IInputControls';\r\nimport WebComponentForm from './WebComponentForm';\r\nimport WebComponentTitle from './WebComponentTitle';\r\n\r\nexport class WebComponentControlsProvider implements IInputControlsProvider {\r\n  public match(definition: IFieldDefinition): boolean {\r\n    return definition.valueType === 'webComponent';\r\n  }\r\n\r\n  public get(): IInputControls {\r\n    return {\r\n      icon: SolidIcons.faCube,\r\n      detailsControl: WebComponentForm,\r\n      inputControl: WebComponentTitle\r\n    };\r\n  }\r\n}","import { IFieldDefinition, IInputComponentProps, IReactronComponentContext } from '@schirkan/reactron-interfaces';\r\nimport { ArrayControlsProvider } from './ArrayInputControl/ArrayControlsProvider';\r\nimport { BooleanControlsProvider } from './BooleanInputControl/BooleanControlsProvider';\r\nimport { IInputControls, IInputControlsProvider } from './IInputControls';\r\nimport { NumberControlsProvider } from './NumberInputControl/NumberControlsProvider';\r\nimport { ObjectControlsProvider } from './ObjectInputControl/ObjectControlsProvider';\r\nimport { PasswordControlsProvider } from './PasswordInputControl/PasswordControlsProvider';\r\nimport { StyleControlsProvider } from './StyleInputControl/StyleControlsProvider';\r\nimport { TextControlsProvider } from './TextInputControl/TextControlsProvider';\r\nimport { ValuesControlsProvider } from './ValuesInputControl/ValuesControlsProvider';\r\nimport { WebComponentControlsProvider } from './WebComponentInputControl/WebComponentControlsProvider';\r\n\r\nconst providers: IInputControlsProvider[] = [\r\n  new ArrayControlsProvider(),\r\n  new ValuesControlsProvider(),\r\n  new ObjectControlsProvider(),\r\n  new StyleControlsProvider(),\r\n  new WebComponentControlsProvider(),\r\n  new BooleanControlsProvider(),\r\n  new TextControlsProvider(),\r\n  new NumberControlsProvider(),\r\n  new PasswordControlsProvider(),\r\n];\r\n\r\nexport const getInputControls = (definition: IFieldDefinition, context: IReactronComponentContext): IInputControls => {\r\n  const provider = providers.find(x => x.match(definition));\r\n  const result = provider && provider.get(definition) || {};\r\n\r\n  if (!definition.isArray) {\r\n    if (definition.inputControl) {\r\n      if (typeof definition.inputControl === 'function') {\r\n        result.inputControl = definition.inputControl;\r\n      } else if (definition.inputControl.module && definition.inputControl.component) {\r\n        const moduleName = definition.inputControl.module;\r\n        const componentName = definition.inputControl.component;\r\n        result.inputControl = (props: IInputComponentProps) => context.renderComponent({ moduleName, componentName, options: props });\r\n      }\r\n    }\r\n\r\n    if (definition.inputForm) {\r\n      if (typeof definition.inputForm === 'function') {\r\n        result.detailsControl = definition.inputForm;\r\n      } else if (definition.inputForm.module && definition.inputForm.component) {\r\n        const moduleName = definition.inputForm.module;\r\n        const componentName = definition.inputForm.component;\r\n        result.detailsControl = (props: IInputComponentProps) => context.renderComponent({ moduleName, componentName, options: props });\r\n      }\r\n    }\r\n  }\r\n\r\n  return result;\r\n};","import * as SolidIcons from '@fortawesome/free-solid-svg-icons';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { IFieldDefinition, IReactronComponentContext } from '@schirkan/reactron-interfaces';\r\nimport * as React from 'react';\r\nimport { AdminPageContext } from '../AdminPageContext';\r\nimport ErrorBoundary from '../ErrorBoundary/ErrorBoundary';\r\nimport UiButton from '../UiButton/UiButton';\r\nimport { getInputControls } from './InputControls/getInputControls';\r\nimport { IInputControls } from \"./InputControls/IInputControls\";\r\n\r\nimport './OptionItem.scss';\r\nimport { OptionCardContext, OptionsCardContextData } from '../OptionCard/OptionCardContext';\r\n\r\nlet counter = 0;\r\n\r\nexport interface IOptionItemProps {\r\n  definition: IFieldDefinition;\r\n  value: any;\r\n  valueChange: (definition: IFieldDefinition, newValue: any) => void;\r\n  detailsVisible?: boolean;\r\n}\r\n\r\ninterface IOptionItemState extends IInputControls {\r\n  uniqueId: string;\r\n  detailsVisible?: boolean;\r\n}\r\n\r\nexport default class OptionItem extends React.Component<IOptionItemProps, IOptionItemState> {\r\n  public static contextType = OptionCardContext;\r\n  public context: OptionsCardContextData;\r\n\r\n  constructor(props: IOptionItemProps) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      uniqueId: 'ID' + (counter++),\r\n      detailsVisible: props.detailsVisible\r\n    };\r\n\r\n    this.toggleItemDetails = this.toggleItemDetails.bind(this);\r\n  }\r\n\r\n  public componentDidMount() {\r\n    const inputControls = getInputControls(this.props.definition, this.context.componentContext!) as any;\r\n    const isNewArrayItem = this.props.value && this.props.value.__new;\r\n\r\n    // auto open new array items\r\n    if (isNewArrayItem) {\r\n      inputControls.detailsVisible = true;\r\n    }\r\n\r\n    this.setState(inputControls, () => {\r\n      if (isNewArrayItem) {\r\n        delete (this.props.value.__new);\r\n        this.props.valueChange(this.props.definition, this.props.value);\r\n      }\r\n    });\r\n  }\r\n\r\n  private toggleItemDetails() {\r\n    this.setState(state => ({ detailsVisible: !state.detailsVisible }));\r\n  }\r\n\r\n  private renderInputRow() {\r\n    const label = (\r\n      <label htmlFor={this.state.uniqueId}>\r\n        {this.props.children}\r\n        {this.state.icon && (<UiButton><FontAwesomeIcon icon={this.state.icon} /></UiButton>)}\r\n        <span className=\"header-text\">{this.props.definition.displayName}</span>\r\n      </label>\r\n    );\r\n\r\n    let input: JSX.Element | string = '';\r\n\r\n    if (this.state.inputControl) {\r\n      input = (\r\n        <ErrorBoundary>\r\n          <this.state.inputControl {...this.props} uniqueId={this.state.uniqueId} context={this.context.componentContext!}\r\n            getAllComponents={this.context.getAllComponents}\r\n            getAllComponentDefinitions={this.context.getAllComponentDefinitions}\r\n            getComponentDefinition={this.context.getComponentDefinition} />\r\n        </ErrorBoundary>\r\n      );\r\n    }\r\n\r\n    if (this.state.detailsControl) {\r\n      return (\r\n        <UiButton className=\"item-header\" onClick={this.toggleItemDetails}>\r\n          {label}\r\n          <div className=\"sub-header-text\">{input}</div>\r\n          <UiButton>\r\n            <FontAwesomeIcon icon={this.state.detailsVisible ? SolidIcons.faArrowDown : SolidIcons.faArrowRight} />\r\n          </UiButton>\r\n        </UiButton>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <React.Fragment>\r\n        {label}\r\n        {input}\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  private renderDetailsForm() {\r\n    if (!this.state.detailsControl) {\r\n      return null;\r\n    }\r\n    return (\r\n      <div className=\"item-details\" hidden={!this.state.detailsVisible}>\r\n        <ErrorBoundary>\r\n          <this.state.detailsControl {...this.props} uniqueId={this.state.uniqueId} context={this.context.componentContext!}\r\n            getAllComponents={this.context.getAllComponents}\r\n            getAllComponentDefinitions={this.context.getAllComponentDefinitions}\r\n            getComponentDefinition={this.context.getComponentDefinition} />\r\n        </ErrorBoundary>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  public render() {\r\n    return (\r\n      <div className=\"OptionItem\"\r\n        data-hasdetails={this.state.detailsControl ? 'true' : 'false'}\r\n        data-detailsvisible={this.state.detailsVisible ? 'true' : 'false'}\r\n        data-isarray={this.props.definition.isArray ? 'true' : 'false'}\r\n        data-valuetype={this.props.definition.valueType}>\r\n        {this.renderInputRow()}\r\n        {this.renderDetailsForm()}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import { IFieldDefinition } from '@schirkan/reactron-interfaces';\r\nimport * as React from 'react';\r\nimport OptionItem from '../OptionItem/OptionItem';\r\n\r\nimport './OptionList.scss';\r\nimport UiCardContent from '../UiCardContent/UiCardContent';\r\n\r\ninterface IOptionListProps {\r\n  fields?: IFieldDefinition[];\r\n  value: object;\r\n  valueChange: (newValue: object) => void;\r\n}\r\n\r\nexport default class OptionList extends React.Component<IOptionListProps> {\r\n  constructor(props: IOptionListProps) {\r\n    super(props);\r\n\r\n    this.valueChange = this.valueChange.bind(this);\r\n  }\r\n\r\n  private valueChange(field: IFieldDefinition, value: any) {\r\n    const newValue = this.props.value ? { ...this.props.value } : {};\r\n    newValue[field.name] = value;\r\n    this.props.valueChange(newValue);\r\n  }\r\n\r\n  public renderDebug() {\r\n    return (\r\n      <UiCardContent className=\"debug\">\r\n        {JSON.stringify(this.props.value, undefined, 2)}\r\n      </UiCardContent>\r\n    );\r\n  }\r\n\r\n  public render() {\r\n    if (!this.props.fields || !this.props.fields.length) {\r\n      return null;\r\n      // return <span>No options / fields defined</span>;\r\n    }\r\n\r\n    return (\r\n      <div className=\"OptionList\">\r\n        {this.renderDebug()}\r\n        {this.props.fields.map(field => {\r\n          const value = this.props.value && this.props.value[field.name];\r\n          const detailsVisible = (field.valueType === 'webComponent' && !field.isArray) || undefined;\r\n          return <OptionItem key={field.name} detailsVisible={detailsVisible} definition={field} value={value} valueChange={this.valueChange} />;\r\n        })}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import { IconProp } from \"@fortawesome/fontawesome-svg-core\";\r\nimport * as RegularIcons from '@fortawesome/free-regular-svg-icons';\r\nimport * as SolidIcons from '@fortawesome/free-solid-svg-icons';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { IFieldDefinition, IReactronComponentContext } from \"@schirkan/reactron-interfaces\";\r\nimport * as React from 'react';\r\nimport { getDefaultFieldValue } from \"src/common/optionsHelper\";\r\nimport OptionList from '../OptionList/OptionList';\r\nimport UiButton from '../UiButton/UiButton';\r\nimport UiCard from '../UiCard/UiCard';\r\nimport UiCardButtonRow from '../UiCardButtonRow/UiCardButtonRow';\r\nimport UiCardTitle from '../UiCardTitle/UiCardTitle';\r\nimport { OptionCardContext, OptionsCardContextData } from './OptionCardContext';\r\nimport { AdminPageContext } from \"../AdminPageContext\";\r\n\r\nimport './OptionCard.scss';\r\n\r\nexport interface IOptionCardProps {\r\n  className?: string;\r\n  icon: IconProp;\r\n  title: string;\r\n  options: object;\r\n  fields: IFieldDefinition[];\r\n  onSave: (newOptions: object) => any;\r\n  onCancel?: () => any;\r\n  showReset?: boolean;\r\n  showToggleStyleOptions?: boolean;\r\n}\r\n\r\ninterface IOptionCardState {\r\n  newOptions: any;\r\n  formContext?: OptionsCardContextData;\r\n  showDebug: boolean;\r\n  showExpertOptions: boolean;\r\n}\r\n\r\nexport default class OptionCard extends React.Component<IOptionCardProps, IOptionCardState> {\r\n  public static contextType = AdminPageContext;\r\n  public context: IReactronComponentContext;\r\n\r\n  constructor(props: IOptionCardProps) {\r\n    super(props);\r\n\r\n    const newOptions = this.setDefaultValues(props.options || {});\r\n\r\n    this.state = {\r\n      newOptions,\r\n      showDebug: false,\r\n      showExpertOptions: false,\r\n    };\r\n\r\n    this.cancel = this.cancel.bind(this);\r\n    this.save = this.save.bind(this);\r\n    this.reset = this.reset.bind(this);\r\n    this.optionsChange = this.optionsChange.bind(this);\r\n    this.toggleStyleOptions = this.toggleStyleOptions.bind(this);\r\n    this.toggleDebug = this.toggleDebug.bind(this);\r\n  }\r\n\r\n  public async componentDidMount() {\r\n    const formContext = new OptionsCardContextData(this.context);\r\n    await formContext.init();\r\n    this.setState({ formContext });\r\n  }\r\n\r\n  // init fields\r\n  private setDefaultValues(options: object) {\r\n    this.props.fields.forEach(field => {\r\n      let value = options[field.name];\r\n\r\n      if (value === undefined) {\r\n        value = getDefaultFieldValue(field);\r\n        if (value !== undefined) {\r\n          options[field.name] = value;\r\n        }\r\n      }\r\n    });\r\n    return options;\r\n  }\r\n\r\n  private reset() {\r\n    const newOptions = this.setDefaultValues(this.props.options || {});\r\n    this.setState({ newOptions });\r\n  }\r\n\r\n  private async save() {\r\n    if (this.state.formContext) {\r\n      await this.state.formContext.onSave.publish();\r\n      return this.props.onSave(this.state.newOptions);\r\n    }\r\n  }\r\n\r\n  private cancel() {\r\n    return this.props.onCancel && this.props.onCancel();\r\n  }\r\n\r\n  private optionsChange(newValue: any) {\r\n    this.setState({ newOptions: newValue });\r\n  }\r\n\r\n  private toggleStyleOptions() {\r\n    this.setState(prevState => ({ showExpertOptions: !prevState.showExpertOptions }));\r\n  }\r\n\r\n  private toggleDebug() {\r\n    this.setState(prevState => ({ showDebug: !prevState.showDebug }));\r\n  }\r\n\r\n  public renderTitle() {\r\n    return (\r\n      <UiCardTitle>\r\n        <FontAwesomeIcon icon={this.props.icon} /> {this.props.title}\r\n        <div className=\"buttons\">\r\n          {this.props.showToggleStyleOptions && (\r\n            <UiButton onClick={this.toggleStyleOptions}>\r\n              Style options <FontAwesomeIcon icon={this.state.showExpertOptions ? RegularIcons.faEye : RegularIcons.faEyeSlash} />\r\n            </UiButton>\r\n          )}\r\n          <UiButton onClick={this.toggleDebug}>\r\n            Debug <FontAwesomeIcon icon={this.state.showDebug ? RegularIcons.faEye : RegularIcons.faEyeSlash} />\r\n          </UiButton>\r\n        </div>\r\n      </UiCardTitle>\r\n    );\r\n  }\r\n\r\n  public renderContent() {\r\n    if(!this.state.formContext){\r\n      return null;\r\n    }\r\n    return (\r\n      <OptionCardContext.Provider value={this.state.formContext}>\r\n        <OptionList fields={this.props.fields} value={this.state.newOptions} valueChange={this.optionsChange} />\r\n      </OptionCardContext.Provider>\r\n    );\r\n  }\r\n\r\n  public renderStyleOptionsStyle() {\r\n    if (this.state.showExpertOptions) {\r\n      return null;\r\n    }\r\n    return <style>{'[data-valuetype=\"style\"] { display: none; }'}</style>;\r\n  }\r\n\r\n  public renderDebugStyle() {\r\n    if (this.state.showDebug) {\r\n      return null;\r\n    }\r\n    return <style>{'.debug { display: none; }'}</style>;\r\n  }\r\n\r\n  public renderFooter() {\r\n    return (\r\n      <UiCardButtonRow divider=\"half\">\r\n        {this.props.onCancel && (\r\n          <UiButton onClick={this.cancel}>\r\n            <FontAwesomeIcon icon={SolidIcons.faTimes} /> Cancel\r\n          </UiButton>\r\n        )}\r\n        {this.props.showReset && (\r\n          <UiButton onClick={this.reset}>\r\n            <FontAwesomeIcon icon={SolidIcons.faUndo} /> Reset\r\n          </UiButton>\r\n        )}\r\n        <UiButton onClick={this.save}>\r\n          <FontAwesomeIcon icon={SolidIcons.faSave} /> Save\r\n        </UiButton>\r\n      </UiCardButtonRow>\r\n    );\r\n  }\r\n\r\n  public render() {\r\n    const className = 'OptionCard ' + this.props.className;\r\n\r\n    return (\r\n      <UiCard className={className}>\r\n        {this.renderTitle()}\r\n        {this.renderContent()}\r\n        {this.renderFooter()}\r\n        {this.renderStyleOptionsStyle()}\r\n        {this.renderDebugStyle()}\r\n      </UiCard>\r\n    );\r\n  }\r\n}\r\n","import * as RegularIcons from '@fortawesome/free-regular-svg-icons';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { IWebPageOptions } from \"@schirkan/reactron-interfaces\";\r\nimport * as React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport UiButton from '../../UiButton/UiButton';\r\nimport UiCard from '../../UiCard/UiCard';\r\nimport UiCardButtonRow from '../../UiCardButtonRow/UiCardButtonRow';\r\nimport UiCardContent from '../../UiCardContent/UiCardContent';\r\nimport UiCardTitle from '../../UiCardTitle/UiCardTitle';\r\n\r\nimport './PageCard.scss';\r\n\r\nexport interface IPageCardProps {\r\n  page: IWebPageOptions;\r\n  onEdit: (page: IWebPageOptions) => any;\r\n  onDelete: (page: IWebPageOptions) => any;\r\n}\r\n\r\nexport default class PageCard extends React.Component<IPageCardProps> {\r\n  constructor(props: IPageCardProps) {\r\n    super(props);\r\n\r\n    this.onEdit = this.onEdit.bind(this);\r\n    this.onDelete = this.onDelete.bind(this);\r\n  }\r\n\r\n  private onEdit() {\r\n    return this.props.onEdit(this.props.page);\r\n  }\r\n\r\n  private onDelete() {\r\n    return this.props.onDelete(this.props.page);\r\n  }\r\n\r\n  public renderTitle() {\r\n    return (\r\n      <UiCardTitle>\r\n        <FontAwesomeIcon icon={RegularIcons.faFile} /> {this.props.page.title} ({this.props.page.path})\r\n      </UiCardTitle>\r\n    );\r\n  }\r\n\r\n  public renderPath() {\r\n    return (\r\n      <UiCardContent className=\"path\">\r\n        {this.props.page.path}\r\n      </UiCardContent>\r\n    );\r\n  }\r\n\r\n  public renderFooter() {\r\n    return (\r\n      <UiCardButtonRow divider=\"half\">\r\n        <Link to={this.props.page.path}>\r\n          <FontAwesomeIcon icon={RegularIcons.faArrowAltCircleRight} /> View\r\n        </Link>\r\n        <UiButton onClick={this.onEdit}>\r\n          <FontAwesomeIcon icon={RegularIcons.faEdit} /> Edit\r\n        </UiButton>\r\n        <UiButton onClick={this.onDelete}>\r\n          <FontAwesomeIcon icon={RegularIcons.faTrashAlt} /> Delete\r\n        </UiButton>\r\n      </UiCardButtonRow>\r\n    );\r\n  }\r\n\r\n  public render() {\r\n    return (\r\n      <UiCard className=\"PageCard\">\r\n        {this.renderTitle()}\r\n        {/* {this.renderPath()} */}\r\n        {this.renderFooter()}\r\n      </UiCard>\r\n    );\r\n  }\r\n}\r\n","import { IFieldDefinition } from '@schirkan/reactron-interfaces';\r\n\r\nexport const pageOptionsFields: IFieldDefinition[] = [{\r\n  description: 'Path',\r\n  defaultValue: '/',\r\n  displayName: 'Path',\r\n  name: 'path',\r\n  valueType: 'string'\r\n}, {\r\n  description: 'Title',\r\n  defaultValue: 'New Page',\r\n  displayName: 'Title',\r\n  name: 'title',\r\n  valueType: 'string'\r\n}, {\r\n  description: 'Content',\r\n  displayName: 'Content',\r\n  name: 'webComponentId',\r\n  valueType: 'webComponent'\r\n}, {\r\n  description: 'Page Style',\r\n  displayName: 'Page Style',\r\n  name: 'style',\r\n  valueType: 'style'\r\n}];","import * as RegularIcons from '@fortawesome/free-regular-svg-icons';\r\nimport * as SolidIcons from '@fortawesome/free-solid-svg-icons';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { IWebPageOptions, IReactronComponentContext } from '@schirkan/reactron-interfaces';\r\nimport * as React from 'react';\r\nimport { confirm } from '../confirmDialog';\r\nimport OptionCard from '../OptionCard/OptionCard';\r\nimport UiButton from '../UiButton/UiButton';\r\nimport UiCard from '../UiCard/UiCard';\r\nimport UiFlowLayout from '../UiFlowLayout/UiFlowLayout';\r\nimport UiLoadingCard from '../UiLoadingCard/UiLoadingCard';\r\nimport UiOverlay from '../UiOverlay/UiOverlay';\r\nimport PageCard from './PageCard/PageCard';\r\nimport { pageOptionsFields } from './pageOptionsFields';\r\nimport { AdminPageContext } from '../AdminPageContext';\r\n\r\nimport './PageManagerPage.scss';\r\nimport { WebComponentFormContext, WebComponentFormContextData } from '../OptionItem/InputControls/WebComponentInputControl/WebComponentFormContext';\r\n\r\nexport interface IModuleManagerPageState {\r\n  loading: boolean;\r\n  pages: IWebPageOptions[];\r\n  showPageDetailsDialog: boolean;\r\n  selectedPage?: IWebPageOptions;\r\n}\r\n\r\nexport default class PageManagerPage extends React.Component<any, IModuleManagerPageState> {\r\n  public static contextType = AdminPageContext;\r\n  public context: IReactronComponentContext;\r\n\r\n  constructor(props: any) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      loading: true,\r\n      pages: [],\r\n      showPageDetailsDialog: false\r\n    };\r\n\r\n    this.loadPages = this.loadPages.bind(this);\r\n    this.savePage = this.savePage.bind(this);\r\n    this.deletePage = this.deletePage.bind(this);\r\n    this.hidePageDialog = this.hidePageDialog.bind(this);\r\n    this.showPageEditDialog = this.showPageEditDialog.bind(this);\r\n    this.showPageAddDialog = this.showPageAddDialog.bind(this);\r\n  }\r\n\r\n  public componentDidMount() {\r\n    this.loadPages();\r\n  }\r\n\r\n  private loadPages(): Promise<void> {\r\n    this.setState({ loading: true });\r\n\r\n    return this.context.services.pages.getAll()\r\n      .then(pages => this.setState({ pages, loading: false }))\r\n      .catch(err => this.setState({ loading: false })); // TODO\r\n  }\r\n\r\n  private savePage(page: IWebPageOptions): Promise<void> {\r\n    return this.context.services.pages.createOrUpdate(page)\r\n      .then(this.hidePageDialog)\r\n      .then(this.loadPages)\r\n      .catch(err => console.log(err)); // TODO\r\n  }\r\n\r\n  private deletePage(page: IWebPageOptions): Promise<void> {\r\n    return this.context.services.pages.delete(page.id)\r\n      .then(this.hidePageDialog)\r\n      .then(this.loadPages)\r\n      .catch(err => console.log(err)); // TODO\r\n  }\r\n\r\n  private showPageEditDialog(page: IWebPageOptions) {\r\n    this.setState({ showPageDetailsDialog: true, selectedPage: page });\r\n  }\r\n\r\n  private showPageAddDialog() {\r\n    this.setState({ showPageDetailsDialog: true, selectedPage: undefined });\r\n  }\r\n\r\n  private hidePageDialog() {\r\n    this.setState({ showPageDetailsDialog: false, selectedPage: undefined });\r\n  }\r\n\r\n  private renderPageCards() {\r\n    if (this.state.loading) {\r\n      return <UiFlowLayout><UiLoadingCard /></UiFlowLayout>;\r\n    }\r\n\r\n    return (\r\n      <UiFlowLayout>\r\n        {this.state.pages.map((item, index) =>\r\n          <PageCard key={index} page={item} onEdit={this.showPageEditDialog}\r\n            onDelete={confirm(this.deletePage, 'Delete?')} />\r\n        )}\r\n      </UiFlowLayout>\r\n    );\r\n  }\r\n\r\n  private renderPageAddCard() {\r\n    return (\r\n      <UiFlowLayout>\r\n        <UiCard className=\"AddPageCard\">\r\n          <UiButton className=\"addButton\" onClick={this.showPageAddDialog}>\r\n            <FontAwesomeIcon icon={SolidIcons.faPlus} /> Add Page\r\n          </UiButton>\r\n        </UiCard>\r\n      </UiFlowLayout>\r\n    );\r\n  }\r\n\r\n  private renderPageDetailsDialog() {\r\n    if (!this.state.showPageDetailsDialog) {\r\n      return null;\r\n    }\r\n\r\n    const page = this.state.selectedPage;\r\n    const title = page ? 'Edit Page' : 'Add Page';\r\n\r\n    return (\r\n      <UiOverlay>\r\n        <WebComponentFormContext.Provider value={new WebComponentFormContextData(undefined, page)}>\r\n          <OptionCard icon={RegularIcons.faFile} showToggleStyleOptions={true}\r\n            title={title} fields={pageOptionsFields}\r\n            onSave={this.savePage} onCancel={this.hidePageDialog} options={page || {}} />\r\n        </WebComponentFormContext.Provider>\r\n      </UiOverlay>\r\n    );\r\n  }\r\n\r\n  public render() {\r\n    return (\r\n      <section className=\"PageManagerPage\">\r\n        {this.renderPageAddCard()}\r\n        {this.renderPageCards()}\r\n        {this.renderPageDetailsDialog()}\r\n      </section>\r\n    );\r\n  }\r\n}\r\n","import * as React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport './RoundButton.scss';\r\n\r\nexport interface IRoundButtonProps {\r\n  to: string;\r\n}\r\n\r\nexport default class RoundButton extends React.Component<IRoundButtonProps> {\r\n  public render() {\r\n    return <Link className=\"RoundButton\" to={this.props.to} role=\"button\">{this.props.children}</Link>;\r\n  }\r\n}\r\n","import * as SolidIcons from '@fortawesome/free-solid-svg-icons';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { IServiceRepositoryItem } from '@schirkan/reactron-interfaces';\r\nimport * as React from 'react';\r\nimport UiButton from '../../UiButton/UiButton';\r\n\r\nimport './ServiceListItem.scss';\r\n\r\nexport interface IServiceListItemProps {\r\n  service: IServiceRepositoryItem;\r\n  onShowDetails: (service: IServiceRepositoryItem) => void;\r\n}\r\n\r\nexport default class ServiceListItem extends React.Component<IServiceListItemProps> {\r\n  constructor(props: IServiceListItemProps) {\r\n    super(props);\r\n\r\n    this.showDetails = this.showDetails.bind(this);\r\n  }\r\n\r\n  private showDetails() {\r\n    return this.props.onShowDetails(this.props.service);\r\n  }\r\n\r\n  public render() {\r\n    return (\r\n      <UiButton className=\"ServiceListItem UiCardContent\" onClick={this.showDetails}>\r\n        <FontAwesomeIcon icon={SolidIcons.faCogs} /> {this.props.service.displayName}\r\n        <UiButton>\r\n          <FontAwesomeIcon icon={SolidIcons.faArrowRight} />\r\n        </UiButton>\r\n      </UiButton>\r\n    );\r\n  }\r\n}\r\n","import * as SolidIcons from '@fortawesome/free-solid-svg-icons';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { IServiceRepositoryItem } from '@schirkan/reactron-interfaces';\r\nimport * as React from 'react';\r\nimport UiCard from '../../UiCard/UiCard';\r\nimport UiCardTitle from '../../UiCardTitle/UiCardTitle';\r\nimport ServiceListItem from '../ServiceListItem/ServiceListItem';\r\n\r\nimport './ServiceGroupCard.scss';\r\n\r\nexport interface IServiceGroupCardProps {\r\n  services: IServiceRepositoryItem[];\r\n  moduleName: string;\r\n  onShowDetails: (service: IServiceRepositoryItem) => any;\r\n}\r\n\r\nexport default class ServiceGroupCard extends React.Component<IServiceGroupCardProps> {\r\n  public render() {\r\n    return (\r\n      <UiCard className=\"ServiceGroupCard\">\r\n        <UiCardTitle>\r\n          <FontAwesomeIcon icon={SolidIcons.faCube} /> {this.props.moduleName}\r\n        </UiCardTitle>\r\n        {this.props.services.map(item =>\r\n          <ServiceListItem key={item.name} service={item} onShowDetails={this.props.onShowDetails} />\r\n        )}\r\n      </UiCard>\r\n    );\r\n  }\r\n}","import * as RegularIcons from '@fortawesome/free-regular-svg-icons';\r\nimport * as SolidIcons from '@fortawesome/free-solid-svg-icons';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { IServiceRepositoryItem, ILogEntry, IReactronComponentContext } from '@schirkan/reactron-interfaces';\r\nimport * as React from 'react';\r\nimport UiCard from '../../UiCard/UiCard';\r\nimport UiCardTitle from '../../UiCardTitle/UiCardTitle';\r\nimport UiCardContent from '../../UiCardContent/UiCardContent';\r\nimport UiCardButtonRow from '../../UiCardButtonRow/UiCardButtonRow';\r\nimport UiButton from '../../UiButton/UiButton';\r\nimport moment from 'moment';\r\nimport Loading from '../../Loading/Loading';\r\nimport { AdminPageContext } from '../../AdminPageContext';\r\n\r\nimport './ServiceLogCard.scss';\r\n\r\nexport interface IServiceLogCardProps {\r\n  service: IServiceRepositoryItem;\r\n  onClose: () => any;\r\n}\r\n\r\ninterface IServiceLogCardState {\r\n  log: ILogEntry[];\r\n  loading: boolean;\r\n  showDebug: boolean;\r\n  showInfo: boolean;\r\n  showWarning: boolean;\r\n  showError: boolean;\r\n}\r\n\r\nexport default class ServiceLogCard extends React.Component<IServiceLogCardProps, IServiceLogCardState> {\r\n  public static contextType = AdminPageContext;\r\n  public context: IReactronComponentContext;\r\n\r\n  private card: UiCard | null;\r\n\r\n  constructor(props: any) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      log: [],\r\n      loading: true,\r\n      showDebug: true,\r\n      showInfo: true,\r\n      showWarning: true,\r\n      showError: true\r\n    };\r\n\r\n    this.close = this.close.bind(this);\r\n    this.loadLog = this.loadLog.bind(this);\r\n    this.toggleDebug = this.toggleDebug.bind(this);\r\n    this.toggleInfo = this.toggleInfo.bind(this);\r\n    this.toggleWarning = this.toggleWarning.bind(this);\r\n    this.toggleError = this.toggleError.bind(this);\r\n    this.scrollToTop = this.scrollToTop.bind(this);\r\n    this.scrollToBottom = this.scrollToBottom.bind(this);\r\n  }\r\n\r\n  private scrollToTop() {\r\n    this.card && this.card.scrollToTop();\r\n  }\r\n\r\n  private scrollToBottom() {\r\n    this.card && this.card.scrollToBottom();\r\n  }\r\n\r\n  private close() {\r\n    this.props.onClose();\r\n  }\r\n\r\n  public componentDidMount() {\r\n    this.loadLog();\r\n  }\r\n\r\n  // public componentDidUpdate(prevProps: IServiceLogCardProps) {\r\n  //   if (prevProps.service !== this.props.service) {\r\n  //     this.setState({ log: [] }, this.loadLog);\r\n  //   }\r\n  // }\r\n\r\n  private loadLog() {\r\n    const source = this.props.service.moduleName + '.' + this.props.service.name;\r\n    this.context.services.log.getLogEntries(source)\r\n      .then(log => this.setState({ log, loading: false }));\r\n  }\r\n\r\n  private toggleDebug() {\r\n    this.setState(prevState => ({ showDebug: !prevState.showDebug }));\r\n  }\r\n\r\n  private toggleInfo() {\r\n    this.setState(prevState => ({ showInfo: !prevState.showInfo }));\r\n  }\r\n\r\n  private toggleWarning() {\r\n    this.setState(prevState => ({ showWarning: !prevState.showWarning }));\r\n  }\r\n\r\n  private toggleError() {\r\n    this.setState(prevState => ({ showError: !prevState.showError }));\r\n  }\r\n\r\n  private renderSeverityFilter() {\r\n    const debug = this.state.log.filter(x => x.severity === 'debug').length;\r\n    const information = this.state.log.filter(x => x.severity === 'information').length;\r\n    const warning = this.state.log.filter(x => x.severity === 'warning').length;\r\n    const error = this.state.log.filter(x => x.severity === 'error').length;\r\n\r\n    return (\r\n      <div>\r\n        Severity:\r\n        <span className={\"filter-severity clickable debug \" + (this.state.showDebug ? 'active' : '')} onClick={this.toggleDebug}>{debug} Debug</span>\r\n        <span className={\"filter-severity clickable info \" + (this.state.showInfo ? 'active' : '')} onClick={this.toggleInfo}>{information} Info</span>\r\n        <span className={\"filter-severity clickable warning \" + (this.state.showWarning ? 'active' : '')} onClick={this.toggleWarning}>{warning} Warning</span>\r\n        <span className={\"filter-severity clickable error \" + (this.state.showError ? 'active' : '')} onClick={this.toggleError}>{error} Error</span>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  private renderButtons() {\r\n    return (\r\n      <UiCardButtonRow divider=\"half\">\r\n        <UiButton onClick={this.close}><FontAwesomeIcon icon={SolidIcons.faTimes} /> Close</UiButton>\r\n        <UiButton onClick={this.scrollToTop}><FontAwesomeIcon icon={SolidIcons.faArrowUp} /> Top</UiButton>\r\n        <UiButton onClick={this.scrollToBottom}><FontAwesomeIcon icon={SolidIcons.faArrowDown} /> Bottom</UiButton>\r\n      </UiCardButtonRow>\r\n    );\r\n  }\r\n\r\n  private renderContent() {\r\n    if (this.state.loading) {\r\n      return <UiCardContent><Loading /></UiCardContent>;\r\n    }\r\n    return (\r\n      <React.Fragment>\r\n        <UiCardContent>\r\n          {this.renderSeverityFilter()}\r\n        </UiCardContent>\r\n        <UiCardContent>\r\n          {this.filterEntries.map(entry => (\r\n            <div className=\"log-item\" data-severity={entry.severity}>\r\n              <div className=\"timestamp\">{moment(entry.timestamp).toISOString()}</div>\r\n              <div className=\"message\">{entry.message}</div>\r\n              {entry.data && (<div className=\"data\">{JSON.stringify(entry.data)}</div>)}\r\n            </div>\r\n          ))}\r\n        </UiCardContent>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n\r\n  private get filterEntries(): ILogEntry[] {\r\n    const filter = (item: ILogEntry) => {\r\n      return item.severity === 'debug' && this.state.showDebug ||\r\n        item.severity === 'information' && this.state.showInfo ||\r\n        item.severity === 'warning' && this.state.showWarning ||\r\n        item.severity === 'error' && this.state.showError;\r\n    };\r\n    return this.state.log.filter(filter);\r\n  }\r\n\r\n  public render() {\r\n    return (\r\n      <UiCard className=\"ServiceLogCard\" ref={el => this.card = el!}>\r\n        <UiCardTitle>\r\n          <FontAwesomeIcon icon={RegularIcons.faFile} /> Log for {this.props.service.displayName}\r\n        </UiCardTitle>\r\n        {this.renderContent()}\r\n        {this.renderButtons()}\r\n      </UiCard>\r\n    );\r\n  }\r\n}","import * as RegularIcons from '@fortawesome/free-regular-svg-icons';\r\nimport * as SolidIcons from '@fortawesome/free-solid-svg-icons';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { IServiceRepositoryItem, IReactronComponentContext } from '@schirkan/reactron-interfaces';\r\nimport * as React from 'react';\r\nimport Loading from '../Loading/Loading';\r\nimport OptionCard from '../OptionCard/OptionCard';\r\nimport UiButton from '../UiButton/UiButton';\r\nimport UiCard from '../UiCard/UiCard';\r\nimport UiCardButtonRow from '../UiCardButtonRow/UiCardButtonRow';\r\nimport UiCardContent from '../UiCardContent/UiCardContent';\r\nimport UiCardTitle from '../UiCardTitle/UiCardTitle';\r\nimport UiFlowLayout from '../UiFlowLayout/UiFlowLayout';\r\nimport UiLoadingCard from '../UiLoadingCard/UiLoadingCard';\r\nimport UiOverlay from '../UiOverlay/UiOverlay';\r\nimport ServiceGroupCard from './ServiceGroupCard/ServiceGroupCard';\r\nimport ServiceLogCard from './ServiceLogCard/ServiceLogCard';\r\nimport { AdminPageContext } from '../AdminPageContext';\r\n\r\nimport './ServiceManagerPage.scss';\r\n\r\nexport interface IModuleManagerPageState {\r\n  loadingServices: boolean;\r\n  loadingServiceOptions: boolean;\r\n  services: IServiceRepositoryItem[];\r\n  showOptions: boolean,\r\n  showLog: boolean,\r\n  showDetails: boolean,\r\n  selectedService: IServiceRepositoryItem | undefined;\r\n  selectedServiceOptions: any;\r\n}\r\n\r\nexport default class ServiceManagerPage extends React.Component<any, IModuleManagerPageState> {\r\n  public static contextType = AdminPageContext;\r\n  public context: IReactronComponentContext;\r\n\r\n  constructor(props: any) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      loadingServices: true,\r\n      loadingServiceOptions: false,\r\n      services: [],\r\n      showOptions: false,\r\n      showLog: false,\r\n      showDetails: false,\r\n      selectedService: undefined,\r\n      selectedServiceOptions: undefined\r\n    };\r\n\r\n    this.showDetails = this.showDetails.bind(this);\r\n    this.closeDetails = this.closeDetails.bind(this);\r\n    this.showLog = this.showLog.bind(this);\r\n    this.closeLog = this.closeLog.bind(this);\r\n    this.showOptions = this.showOptions.bind(this);\r\n    this.closeOptions = this.closeOptions.bind(this);\r\n    this.loadOptions = this.loadOptions.bind(this);\r\n    this.saveOptions = this.saveOptions.bind(this);\r\n    this.optionsChange = this.optionsChange.bind(this);\r\n  }\r\n\r\n  public componentDidMount() {\r\n    this.loadServices();\r\n  }\r\n\r\n  public loadServices() {\r\n    return this.context.services.services.getAllServices()\r\n      .then(services => this.setState({ services, loadingServices: false }))\r\n      .catch(err => this.setState({ loadingServices: false })); // TODO\r\n  }\r\n\r\n  private showDetails(service: IServiceRepositoryItem) {\r\n    this.setState({ showDetails: true, selectedService: service });\r\n  }\r\n\r\n  private showLog() {\r\n    this.setState({ showLog: true });\r\n  }\r\n\r\n  private showOptions() {\r\n    this.setState({ showOptions: true, selectedServiceOptions: undefined }, this.loadOptions);\r\n  }\r\n\r\n  private closeDetails() {\r\n    this.setState({ showDetails: false, selectedService: undefined });\r\n  }\r\n\r\n  private closeOptions() {\r\n    this.setState({ showOptions: false, showDetails: true });\r\n  }\r\n\r\n  private closeLog() {\r\n    this.setState({ showLog: false, showDetails: true });\r\n  }\r\n\r\n  private loadOptions() {\r\n    if (!this.state.selectedService) {\r\n      return;\r\n    }\r\n\r\n    this.setState({ loadingServiceOptions: true });\r\n\r\n    this.context.services.services.getServiceOptions(this.state.selectedService.moduleName, this.state.selectedService.name)\r\n      .then(options => this.setState({ selectedServiceOptions: options, loadingServiceOptions: false }));\r\n  }\r\n\r\n  private optionsChange(newOptions: any) {\r\n    this.setState({ selectedServiceOptions: newOptions })\r\n  }\r\n\r\n  private saveOptions(newOptions: any) {\r\n    if (!this.state.selectedService) {\r\n      return;\r\n    }\r\n\r\n    this.context.services.services.setServiceOptions(this.state.selectedService.moduleName, this.state.selectedService.name, newOptions)\r\n      .then(() => this.closeOptions());\r\n  }\r\n\r\n  private renderServiceOptionsDialog() {\r\n    if (!this.state.showOptions || !this.state.selectedService) {\r\n      return null;\r\n    }\r\n    if (this.state.loadingServiceOptions) {\r\n      return <UiOverlay><UiLoadingCard /></UiOverlay>;\r\n    }\r\n\r\n    const title = 'Options for ' + this.state.selectedService.displayName;\r\n\r\n    return (\r\n      <UiOverlay>\r\n        <OptionCard icon={SolidIcons.faCog} showReset={true}\r\n          title={title} fields={this.state.selectedService.fields || []}\r\n          options={this.state.selectedServiceOptions}\r\n          onSave={this.saveOptions} onCancel={this.closeOptions}\r\n        />\r\n      </UiOverlay>\r\n    );\r\n  }\r\n\r\n  private renderServiceLogDialog() {\r\n    if (!this.state.showLog || !this.state.selectedService) {\r\n      return null;\r\n    }\r\n\r\n    return (\r\n      <UiOverlay>\r\n        <ServiceLogCard service={this.state.selectedService} onClose={this.closeLog} />\r\n      </UiOverlay>\r\n    );\r\n  }\r\n\r\n  private renderServiceDetailsDialog() {\r\n    if (!this.state.showDetails || !this.state.selectedService) {\r\n      return null;\r\n    }\r\n\r\n    const hasOptions = this.state.selectedService.fields && this.state.selectedService.fields.length;\r\n\r\n    return (\r\n      <UiOverlay>\r\n        <UiCard className=\"ServiceDetailsCard\">\r\n          <UiCardTitle>\r\n            <FontAwesomeIcon icon={SolidIcons.faCogs} /> {this.state.selectedService.displayName}\r\n          </UiCardTitle>\r\n          <UiCardContent>\r\n            {this.state.selectedService.description}\r\n          </UiCardContent>\r\n          <UiCardButtonRow divider=\"half\">\r\n            <UiButton onClick={this.closeDetails}>\r\n              <FontAwesomeIcon icon={SolidIcons.faTimes} /> Close\r\n            </UiButton>\r\n            <UiButton onClick={this.showLog}>\r\n              <FontAwesomeIcon icon={RegularIcons.faFile} /> Log\r\n            </UiButton>\r\n            <UiButton onClick={this.showOptions} disabled={!hasOptions}>\r\n              <FontAwesomeIcon icon={SolidIcons.faCog} /> Options\r\n            </UiButton>\r\n          </UiCardButtonRow>\r\n        </UiCard>\r\n      </UiOverlay>\r\n    );\r\n  }\r\n\r\n  private renderServiceGroups() {\r\n    if (this.state.loadingServices) {\r\n      return <Loading center={true} />;\r\n    }\r\n\r\n    const groups = this.state.services.map(x => x.moduleName).filter(onlyUnique);\r\n\r\n    const groupCards = groups.map(moduleName => {\r\n      const services = this.state.services.filter(x => x.moduleName === moduleName); // TODO: .sort((a, b) => a.displayName > b.displayName)\r\n      return (\r\n        <ServiceGroupCard key={moduleName} moduleName={moduleName} services={services}\r\n          onShowDetails={this.showDetails} />\r\n      );\r\n    });\r\n\r\n    return <UiFlowLayout>{groupCards}</UiFlowLayout>;\r\n  }\r\n\r\n  public render() {\r\n    return (\r\n      <section className=\"ServiceManagerPage\">\r\n        {this.renderServiceGroups()}\r\n        {this.renderServiceOptionsDialog()}\r\n        {this.renderServiceLogDialog()}\r\n        {this.renderServiceDetailsDialog()}\r\n      </section>\r\n    );\r\n  }\r\n}\r\n\r\nfunction onlyUnique(value: any, index: number, self: any[]) {\r\n  return self.indexOf(value) === index;\r\n}","import { IInputComponentProps, IReactronComponentContext, IWebPageOptions } from '@schirkan/reactron-interfaces';\r\nimport * as React from 'react';\r\n\r\nexport interface IPageInputControlState {\r\n  pages: IWebPageOptions[];\r\n}\r\n\r\nexport class PageInputControl extends React.Component<IInputComponentProps, IPageInputControlState> {\r\n  constructor(props: IInputComponentProps) {\r\n    super(props);\r\n\r\n    this.state = { pages: [] };\r\n\r\n    this.onSelectValueChange = this.onSelectValueChange.bind(this);\r\n  }\r\n\r\n  public componentDidMount() {\r\n    this.props.context.services.pages.getAll().then(pages => this.setState({ pages }));\r\n  }\r\n\r\n  private onSelectValueChange = (e: React.ChangeEvent<HTMLSelectElement>) => {\r\n    this.props.valueChange(this.props.definition, e.currentTarget.value);\r\n  };\r\n\r\n  public render() {\r\n    const options = this.state.pages.map(page => <option key={page.id} value={page.path}>{page.title} ({page.path})</option>);\r\n    return (\r\n      <select id={this.props.uniqueId} value={this.props.value} onChange={this.onSelectValueChange}>\r\n        <option>Select page...</option>\r\n        {options}\r\n      </select>\r\n    );\r\n  }\r\n}","import { IFieldDefinition, IInputComponentProps, ISystemSettingsAutoRefresh } from '@schirkan/reactron-interfaces';\r\nimport moment from 'moment';\r\nimport momentTimezone from 'moment-timezone';\r\nimport * as React from 'react';\r\nimport { PageInputControl } from './PageInputControl';\r\n\r\ninterface ITimezone {\r\n  value: string;\r\n  text: string;\r\n}\r\n\r\nconst timezoneNames = momentTimezone.tz.names();\r\nconst timezones: ITimezone[] = [];\r\n\r\ntimezoneNames.forEach(timezone => {\r\n  timezones.push({\r\n    text: \"(GMT\" + moment.tz(timezone).format('Z') + \") \" + timezone.replace('_', ' '),\r\n    value: timezone\r\n  });\r\n});\r\n\r\ntimezones.sort((a, b) => a.text.localeCompare(b.text));\r\n\r\nconst renderFormattedTime = (value: number) => {\r\n  value = value || 0;\r\n  let hour: any = Math.floor(value / 60);\r\n  let minutes: any = value % 60;\r\n\r\n  if (hour < 10) {\r\n    hour = '0' + hour;\r\n  }\r\n  if (minutes < 10) {\r\n    minutes = '0' + minutes;\r\n  }\r\n\r\n  return <span>{hour}:{minutes}</span>;\r\n};\r\n\r\nexport const systemSettingsFields: IFieldDefinition[] = [{\r\n  description: 'Localized text, time format and number format',\r\n  displayName: 'Language',\r\n  name: 'lang',\r\n  valueType: 'string',\r\n  values: [\r\n    { value: 'de', text: 'German' },\r\n    { value: 'en', text: 'English' },\r\n    { value: 'fr', text: 'French' },\r\n    { value: 'es', text: 'Spanish' },\r\n    { value: 'it', text: 'Italian' },\r\n    { value: 'ru', text: 'Russian' },\r\n  ]\r\n  // }, {\r\n  //   description: 'Location',\r\n  //   displayName: 'Location',\r\n  //   name: 'location',\r\n  //   valueType: 'string'\r\n}, {\r\n  description: 'Timezone',\r\n  displayName: 'Timezone',\r\n  name: 'timezone',\r\n  valueType: 'string',\r\n  values: [...timezones]\r\n}, {\r\n  description: 'Page to show on startup',\r\n  displayName: 'Startup page',\r\n  name: 'startupPath',\r\n  valueType: 'string',\r\n  inputControl: PageInputControl\r\n}, {\r\n  description: 'Autorefresh',\r\n  displayName: 'Autorefresh',\r\n  name: 'autorefresh',\r\n  isArray: true,\r\n  valueType: 'object',\r\n  fields: [{\r\n    description: 'From',\r\n    displayName: 'From',\r\n    name: 'from',\r\n    valueType: 'number',\r\n    minValue: 0,\r\n    maxValue: 1440,\r\n    stepSize: 15,\r\n    defaultValue: 480,\r\n    inputControl: props => renderFormattedTime(props.value)\r\n  }, {\r\n    description: 'To',\r\n    displayName: 'To',\r\n    name: 'to',\r\n    valueType: 'number',\r\n    minValue: 0,\r\n    maxValue: 1440,\r\n    stepSize: 15,\r\n    defaultValue: 600,\r\n    inputControl: props => renderFormattedTime(props.value)\r\n  }, {\r\n    description: 'Interval in min',\r\n    displayName: 'Interval in min',\r\n    name: 'interval',\r\n    valueType: 'number',\r\n    minValue: 1,\r\n    maxValue: 120,\r\n    stepSize: 1,\r\n    defaultValue: 10\r\n  }],\r\n  inputControl: (props: IInputComponentProps) => {\r\n    const options = props.value as ISystemSettingsAutoRefresh;\r\n    return <span>{renderFormattedTime(options.from)} - {renderFormattedTime(options.to)} every {options.interval} min</span>;\r\n  }\r\n}];","import * as SolidIcons from '@fortawesome/free-solid-svg-icons';\r\nimport { ISystemSettings, IReactronComponentContext } from '@schirkan/reactron-interfaces';\r\nimport * as React from 'react';\r\nimport OptionCard from '../OptionCard/OptionCard';\r\nimport UiFlowLayout from '../UiFlowLayout/UiFlowLayout';\r\nimport UiLoadingCard from '../UiLoadingCard/UiLoadingCard';\r\nimport { systemSettingsFields } from './systemSettingsFields';\r\nimport { AdminPageContext } from '../AdminPageContext';\r\n\r\nimport './SettingsManagerPage.scss';\r\n\r\nexport interface IModuleManagerPageState {\r\n  loading: boolean;\r\n  settings?: ISystemSettings;\r\n}\r\n\r\nexport default class SettingsManagerPage extends React.Component<any, IModuleManagerPageState>{\r\n  public static contextType = AdminPageContext;\r\n  public context: IReactronComponentContext;\r\n\r\n  constructor(props: any) {\r\n    super(props);\r\n\r\n    this.state = { loading: true };\r\n\r\n    this.loadSettings = this.loadSettings.bind(this);\r\n    this.saveSettings = this.saveSettings.bind(this);\r\n  }\r\n\r\n  public componentDidMount() {\r\n    this.loadSettings();\r\n  }\r\n\r\n  public loadSettings(): Promise<void> {\r\n    return this.context.services.application.getSettings()\r\n      .then(settings => this.setState({ settings, loading: false }))\r\n      .catch(); // TODO\r\n  }\r\n\r\n  public saveSettings(newSettings: ISystemSettings): Promise<void> {\r\n    return this.context.services.application.setSettings(newSettings)\r\n      .catch(); // TODO\r\n  }\r\n\r\n  public render() {\r\n    return (\r\n      <section className=\"SettingsManagerPage\">\r\n        {this.state.loading && (\r\n          <UiFlowLayout>\r\n            <UiLoadingCard />\r\n          </UiFlowLayout>\r\n        )}\r\n        {this.state.settings && (\r\n          <UiFlowLayout>\r\n            <OptionCard options={this.state.settings} onSave={this.saveSettings}\r\n              fields={systemSettingsFields} icon={SolidIcons.faCogs}\r\n              title=\"Settings\" showReset={true}\r\n            />\r\n          </UiFlowLayout>\r\n        )}\r\n      </section>\r\n    );\r\n  }\r\n}\r\n","import * as SvgIcons from '@fortawesome/free-solid-svg-icons';\r\nimport * as FontAwesome from '@fortawesome/react-fontawesome';\r\nimport * as React from 'react';\r\nimport { IServerInfo } from 'src/common/interfaces/IServerInfo';\r\nimport { confirm } from '../confirmDialog';\r\nimport UiButton from '../UiButton/UiButton';\r\nimport UiCard from '../UiCard/UiCard';\r\nimport UiCardButtonRow from '../UiCardButtonRow/UiCardButtonRow';\r\nimport UiCardContent from '../UiCardContent/UiCardContent';\r\nimport UiCardTitle from '../UiCardTitle/UiCardTitle';\r\nimport UiFlowLayout from '../UiFlowLayout/UiFlowLayout';\r\nimport { AdminPageContext } from '../AdminPageContext';\r\nimport { IReactronComponentContext } from '@schirkan/reactron-interfaces';\r\n\r\nimport './SystemPage.scss';\r\n\r\ninterface ISystemPageState {\r\n  info?: IServerInfo;\r\n}\r\n\r\nexport default class SystemPage extends React.Component<any, ISystemPageState> {\r\n  public static contextType = AdminPageContext;\r\n  public context: IReactronComponentContext;\r\n\r\n  constructor(props: any) {\r\n    super(props);\r\n    this.state = {};\r\n\r\n    this.exitApplication = this.exitApplication.bind(this);\r\n    this.restartApplication = this.restartApplication.bind(this);\r\n    this.shutdownSystem = this.shutdownSystem.bind(this);\r\n    this.rebootSystem = this.rebootSystem.bind(this);\r\n    this.resetApplication = this.resetApplication.bind(this);\r\n  }\r\n\r\n  public componentDidMount() {\r\n    this.context.services.application.getServerInfo().then(info => this.setState({ info }));\r\n  }\r\n\r\n  // TODO: confirm dialog\r\n\r\n  private exitApplication() {\r\n    return this.context.services.application.exitApplication();\r\n  }\r\n\r\n  private restartApplication() {\r\n    return this.context.services.application.restartApplication();\r\n  }\r\n\r\n  private shutdownSystem() {\r\n    return this.context.services.application.shutdownSystem();\r\n  }\r\n\r\n  private rebootSystem() {\r\n    return this.context.services.application.rebootSystem();\r\n  }\r\n\r\n  private resetApplication() {\r\n    return this.context.services.application.resetApplication();\r\n  }\r\n\r\n  private renderLoadingDots() {\r\n    return <span className=\"loadingDots\" />;\r\n  }\r\n\r\n  private renderApplicationCard() {\r\n    return (\r\n      <UiCard>\r\n        <UiCardTitle>Application</UiCardTitle>\r\n        <UiCardContent>\r\n          <div className=\"infoRow\">\r\n              <span>Version</span>\r\n              <span>{this.state.info ? this.state.info.version : this.renderLoadingDots()}</span>\r\n          </div>\r\n        </UiCardContent>\r\n        <UiCardButtonRow divider=\"half\">\r\n          <UiButton onClick={this.exitApplication}>\r\n            <FontAwesome.FontAwesomeIcon icon={SvgIcons.faSignOutAlt} /> Exit\r\n          </UiButton>\r\n          <UiButton onClick={this.restartApplication}>\r\n            <FontAwesome.FontAwesomeIcon icon={SvgIcons.faRedo} /> Restart\r\n          </UiButton>\r\n        </UiCardButtonRow>\r\n      </UiCard>\r\n    );\r\n  }\r\n\r\n  private renderSystemCard() {\r\n    const free = this.state.info ? Math.round(this.state.info.memory.free / 1024 / 1024) : 0;\r\n    const total = this.state.info ? Math.round(this.state.info.memory.total / 1024 / 1024) : 0;\r\n    const memInfo = this.state.info ? (free + 'MB / ' + total + 'MB') : '';\r\n    const cpuInfo = this.state.info ? (this.state.info.cpu.count + 'x' + this.state.info.cpu.speed + 'MHz') : '';\r\n\r\n    return (\r\n      <UiCard>\r\n        <UiCardTitle>System</UiCardTitle>\r\n        <UiCardContent>\r\n          <div className=\"infoRow\">\r\n            <span>CPU</span>\r\n            <span>{this.state.info ? cpuInfo : this.renderLoadingDots()}</span>\r\n          </div>\r\n          <div className=\"infoRow\">\r\n            <span>Memory</span>\r\n            <span>{this.state.info ? memInfo : this.renderLoadingDots()}</span>\r\n          </div>\r\n          <div className=\"infoRow\">\r\n            <span>IP</span>\r\n            <span>{this.state.info ? this.state.info.ip : this.renderLoadingDots()}</span>\r\n          </div>\r\n          <div className=\"infoRow\">\r\n            <span>Hostname</span>\r\n            <span>{this.state.info ? this.state.info.hostname : this.renderLoadingDots()}</span>\r\n          </div>\r\n        </UiCardContent>\r\n        <UiCardButtonRow divider=\"half\">\r\n          <UiButton onClick={this.shutdownSystem}>\r\n            <FontAwesome.FontAwesomeIcon icon={SvgIcons.faPowerOff} /> Shutdown\r\n          </UiButton>\r\n          <UiButton onClick={this.rebootSystem}>\r\n            <FontAwesome.FontAwesomeIcon icon={SvgIcons.faRedo} /> Reboot\r\n          </UiButton>\r\n        </UiCardButtonRow>\r\n      </UiCard>\r\n    );\r\n  }\r\n\r\n  private renderDangerCard() {\r\n    return (\r\n      <UiCard className=\"danger\">\r\n        <UiCardTitle>Danger Zone</UiCardTitle>\r\n        <UiCardButtonRow>\r\n          <UiButton onClick={confirm(this.resetApplication, 'Reset?')}>\r\n            <FontAwesome.FontAwesomeIcon icon={SvgIcons.faExclamationTriangle} /> Reset Application\r\n          </UiButton>\r\n        </UiCardButtonRow>\r\n      </UiCard>\r\n    );\r\n  }\r\n\r\n  public render() {\r\n    return (\r\n      <section className=\"SystemPage\">\r\n        <UiFlowLayout>\r\n          {this.renderApplicationCard()}\r\n          {this.renderSystemCard()}\r\n          {this.renderDangerCard()}\r\n        </UiFlowLayout>\r\n      </section>\r\n    );\r\n  }\r\n}\r\n","import * as SvgIcons from '@fortawesome/free-solid-svg-icons';\r\nimport * as FontAwesome from '@fortawesome/react-fontawesome';\r\nimport { IReactronComponentContext } from '@schirkan/reactron-interfaces';\r\nimport * as React from 'react';\r\nimport { Redirect, Route, Switch } from 'react-router-dom'\r\nimport { AdminPageContext } from '../AdminPageContext';\r\nimport ModuleManagerPage from '../ModuleManagerPage/ModuleManagerPage';\r\nimport Navigation from '../Navigation/Navigation';\r\nimport PageManagerPage from '../PageManagerPage/PageManagerPage';\r\nimport RoundButton from '../RoundButton/RoundButton';\r\nimport ServiceManagerPage from '../ServiceManagerPage/ServiceManagerPage';\r\nimport SettingsManagerPage from '../SettingsManagerPage/SettingsManagerPage';\r\nimport SystemPage from '../SystemPage/SystemPage';\r\n\r\nimport './Admin.scss';\r\n\r\nexport default class Admin extends React.Component {\r\n  public context: IReactronComponentContext;\r\n\r\n  public render() {\r\n    return (\r\n      <AdminPageContext.Provider value={this.context}>\r\n        <section className=\"Admin\">\r\n          <header>\r\n            <RoundButton to={this.context.settings.startupPath}>\r\n              <FontAwesome.FontAwesomeIcon icon={SvgIcons.faHome} /> Home\r\n            </RoundButton>\r\n            <div className=\"title\">Reactron Admin</div>\r\n          </header>\r\n          <Navigation />\r\n          <div className=\"content\">\r\n            <Switch>\r\n              <Route path=\"/admin/ModuleManager\" component={ModuleManagerPage} />\r\n              <Route path=\"/admin/ServiceManager\" component={ServiceManagerPage} />\r\n              <Route path=\"/admin/Pages\" component={PageManagerPage} />\r\n              <Route path=\"/admin/Settings\" component={SettingsManagerPage} />\r\n              <Route path=\"/admin/System\" component={SystemPage} />\r\n              <Redirect to=\"/admin/ModuleManager\" />\r\n            </Switch>\r\n          </div>\r\n        </section>\r\n      </AdminPageContext.Provider>\r\n    );\r\n  }\r\n}\r\n","import { IReactronComponentDefinition } from '@schirkan/reactron-interfaces';\r\nimport Admin from './components/Admin/Admin';\r\n\r\nexport const components: IReactronComponentDefinition[] = [{\r\n    component: Admin,\r\n    description: 'Admin Front End',\r\n    displayName: 'Reactron Admin',\r\n    name: 'Admin',\r\n    fields: []\r\n}];"],"names":["React.createContext","React.Component","React.createElement","classname","FontAwesome.FontAwesomeIcon","SvgIcons.faSpinner","SolidIcons.faPlus","SolidIcons.faTimes","SolidIcons.faCheck","SolidIcons.faQuestion","React.Fragment","SolidIcons.faStarOfLife","SolidIcons.faCube","BrandIcons.faGithub","SolidIcons.faCog","SolidIcons.faDownload","SolidIcons.faTrashAlt","SolidIcons.faCubes","SolidIcons.faSyncAlt","exports","Guid","RegularIcons.faTrashAlt","RegularIcons.faArrowAltCircleUp","RegularIcons.faArrowAltCircleDown","SolidIcons.faList","RegularIcons.faEyeSlash","RegularIcons.faEye","BrandIcons.faCss3","SolidIcons.faExternalLinkAlt","SolidIcons.faArrowDown","SolidIcons.faArrowRight","SolidIcons.faUndo","SolidIcons.faSave","RegularIcons.faFile","RegularIcons.faArrowAltCircleRight","RegularIcons.faEdit","SolidIcons.faCogs","SolidIcons.faArrowUp","SvgIcons.faSignOutAlt","SvgIcons.faRedo","SvgIcons.faPowerOff","SvgIcons.faExclamationTriangle","SvgIcons.faHome"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;YAGO,MAAM,gBAAgB,GAAGA,aAAmB,CAA4B,EAA+B,CAAC,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;YCHhH;;;;;;;YAOA,CAAC,YAAY;;aAGZ,IAAI,MAAM,GAAG,EAAE,CAAC,cAAc,CAAC;;aAE/B,SAAS,UAAU,IAAI;cACtB,IAAI,OAAO,GAAG,EAAE,CAAC;;cAEjB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;eAC1C,IAAI,GAAG,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;eACvB,IAAI,CAAC,GAAG,EAAE,SAAS;;eAEnB,IAAI,OAAO,GAAG,OAAO,GAAG,CAAC;;eAEzB,IAAI,OAAO,KAAK,QAAQ,IAAI,OAAO,KAAK,QAAQ,EAAE;gBACjD,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;gBAClB,MAAM,IAAI,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,GAAG,CAAC,MAAM,EAAE;gBAC5C,IAAI,KAAK,GAAG,UAAU,CAAC,KAAK,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;gBACxC,IAAI,KAAK,EAAE;iBACV,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;iBACpB;gBACD,MAAM,IAAI,OAAO,KAAK,QAAQ,EAAE;gBAChC,KAAK,IAAI,GAAG,IAAI,GAAG,EAAE;iBACpB,IAAI,MAAM,CAAC,IAAI,CAAC,GAAG,EAAE,GAAG,CAAC,IAAI,GAAG,CAAC,GAAG,CAAC,EAAE;kBACtC,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;kBAClB;iBACD;gBACD;eACD;;cAED,OAAO,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;cACzB;;aAED,IAAI,AAAiC,MAAM,CAAC,OAAO,EAAE;cACpD,UAAU,CAAC,OAAO,GAAG,UAAU,CAAC;cAChC,cAAc,GAAG,UAAU,CAAC;cAC5B,MAAM,AAKA;cACN,MAAM,CAAC,UAAU,GAAG,UAAU,CAAC;cAC/B;aACD,EAAE,EAAE;;;YCnDL,SAAS,WAAW,CAAC,GAAG,EAAE,GAAG,EAAE;YAC/B,EAAE,KAAK,GAAG,KAAK,KAAK,CAAC,GAAG,GAAG,GAAG,EAAE,CAAC;YACjC,EAAE,IAAI,QAAQ,GAAG,GAAG,CAAC,QAAQ,CAAC;;YAE9B,EAAE,IAAI,CAAC,GAAG,IAAI,OAAO,QAAQ,KAAK,WAAW,EAAE,EAAE,OAAO,EAAE;;YAE1D,EAAE,IAAI,IAAI,GAAG,QAAQ,CAAC,IAAI,IAAI,QAAQ,CAAC,oBAAoB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC;YACvE,EAAE,IAAI,KAAK,GAAG,QAAQ,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;YAC9C,EAAE,KAAK,CAAC,IAAI,GAAG,UAAU,CAAC;;YAE1B,EAAE,IAAI,QAAQ,KAAK,KAAK,EAAE;YAC1B,IAAI,IAAI,IAAI,CAAC,UAAU,EAAE;YACzB,MAAM,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC;YAChD,KAAK,MAAM;YACX,MAAM,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;YAC9B,KAAK;YACL,GAAG,MAAM;YACT,IAAI,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;YAC5B,GAAG;;YAEH,EAAE,IAAI,KAAK,CAAC,UAAU,EAAE;YACxB,IAAI,KAAK,CAAC,UAAU,CAAC,OAAO,GAAG,GAAG,CAAC;YACnC,GAAG,MAAM;YACT,IAAI,KAAK,CAAC,WAAW,CAAC,QAAQ,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC,CAAC;YACpD,GAAG;YACH,CAAC;;;;;kBCjBoB,OAAQ,SAAQC,SAA8B;gBAK1D,MAAM;oBACX,QACEC,2BAAS,SAAS,EAAEC,UAAS,CAAC,SAAS,EAAE,EAAE,QAAQ,EAAE,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC;wBACvED,cAACE,eAA2B,IAAC,IAAI,EAAEC,SAAkB,EAAE,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,IAAI,EAAE,IAAI,GAAI;wBAC/F,IAAI,CAAC,KAAK,CAAC,IAAI,KACdH,uBAAK,SAAS,EAAC,MAAM,IAAE,IAAI,CAAC,KAAK,CAAC,IAAI,CAAO,CAC9C,CACO,EACV;iBACH;;YAba,oBAAY,GAA2B;gBACnD,QAAQ,EAAE,IAAI;aACf,CAAC;;;;;kBCLiB,YAAa,SAAQD,SAAkC;gBAClE,cAAc;oBACpB,IAAI,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,EAAE;wBACtC,OAAO,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,KAAK,EAAE,KAAK,KAAKC,uBAAK,GAAG,EAAE,KAAK,IAAG,KAAK,CAAO,CAAC,CAAC;qBAClF;yBAAM;wBACL,OAAOA,2BAAM,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAO,CAAC;qBACzC;iBACF;gBAEM,MAAM;oBACX,QACEA,2BAAS,SAAS,EAAEC,UAAS,CAAC,cAAc,EAAE,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,EAAE,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,KAAK,IACzF,IAAI,CAAC,cAAc,EAAE,CACd,EACV;iBACH;aACF;;;;;kBChBoB,MAAO,SAAQF,SAAkC;gBAGpE,YAAY,KAAwB;oBAClC,KAAK,CAAC,KAAK,CAAC,CAAC;oBACb,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBAC/C,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;iBACtD;gBAEM,MAAM;oBACX,QACEC,2BAAS,SAAS,EAAEC,UAAS,CAAC,QAAQ,EAAE,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,EAAE,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,GAAG,EAAE,EAAE,IAAI,IAAI,CAAC,IAAI,GAAG,EAAE,IAC9G,IAAI,CAAC,KAAK,CAAC,QAAQ,CACZ,EACV;iBACH;gBAEM,WAAW;oBAChB,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE;wBACd,OAAO;qBACR;oBACD,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;iBAChC;gBAEM,cAAc;oBACnB,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE;wBACd,OAAO;qBACR;oBACD,MAAM,YAAY,GAAG,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC;oBAC5C,MAAM,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC;oBACtC,MAAM,YAAY,GAAG,YAAY,GAAG,MAAM,CAAC;oBAC3C,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE,GAAG,EAAE,YAAY,GAAG,CAAC,GAAG,YAAY,GAAG,CAAC,EAAE,CAAC,CAAC;iBAClE;aACF;;;;;kBCjCoB,aAAc,SAAQF,SAAkC;gBACpE,MAAM;oBACX,QACEC,uBAAK,SAAS,EAAEC,UAAS,CAAC,eAAe,EAAE,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,EAAE,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,KAAK,IACtF,IAAI,CAAC,KAAK,CAAC,QAAQ,CAChB,EACN;iBACH;aACF;;;;;kBCRoB,WAAY,SAAQF,SAAkC;gBAClE,MAAM;oBACX,QACEC,uBAAK,SAAS,EAAEC,UAAS,CAAC,aAAa,EAAE,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,EAAE,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,KAAK,IACpF,IAAI,CAAC,KAAK,CAAC,QAAQ,CAChB,EACN;iBACH;aACF;;;;;kBCNoB,aAAc,SAAQF,SAAe;gBACjD,MAAM;oBACX,QACEC,cAAC,MAAM,IAAC,SAAS,EAAC,eAAe;wBAC/BA,cAAC,WAAW,qBAEE;wBACdA,cAAC,aAAa;4BACZA,cAAC,OAAO,OAAG,CACG;wBACf,IAAI,CAAC,KAAK,CAAC,QAAQ,CACb,EACT;iBACH;aACF;;YCpBD,MAAM,cAAc;gBAApB;oBACU,UAAK,GAAgB,EAAE,CAAC;iBAoBjC;gBAlBQ,GAAG,CAAC,QAAmB;oBAC5B,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE;wBACzB,MAAM,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;wBACnD,QAAQ,CAAC,IAAI,EAAE,CAAC;qBACjB;oBACD,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;iBAC3B;gBAEM,MAAM,CAAC,QAAmB;oBAC/B,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;oBAC3C,IAAI,KAAK,IAAI,CAAC,EAAE;wBACd,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;wBACzB,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE;4BACzB,MAAM,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;4BACnD,QAAQ,CAAC,IAAI,EAAE,CAAC;yBACjB;qBACF;iBACF;aACF;AAAA,YAEM,MAAM,cAAc,GAAG,IAAI,cAAc,EAAE,CAAC;;;;;kBCd9B,SAAU,SAAQD,SAAqD;gBAC1F,YAAY,KAAwB;oBAClC,KAAK,CAAC,KAAK,CAAC,CAAC;oBAEb,IAAI,CAAC,KAAK,GAAG;wBACX,OAAO,EAAE,IAAI;qBACd,CAAC;iBACH;gBAEM,iBAAiB;oBACtB,cAAc,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;iBAC1B;gBAEM,oBAAoB;oBACzB,cAAc,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;iBAC7B;gBAEM,IAAI;oBACT,IAAI,CAAC,QAAQ,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC;iBAClC;gBACM,IAAI;oBACT,IAAI,CAAC,QAAQ,CAAC,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC,CAAC;iBACnC;gBAEM,MAAM;oBACX,QACEC,uBAAK,MAAM,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,SAAS,EAAEC,UAAS,CAAC,WAAW,EAAE,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,EAAE,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,KAAK,IAC/G,IAAI,CAAC,KAAK,CAAC,QAAQ,CAChB,EACN;iBACH;aACF;;kBClCoB,KAAM,SAAQF,SAA4B;gBACtD,MAAM;oBACX,QACEC,uBAAK,SAAS,EAAEC,UAAS,CAAC,OAAO,EAAE,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,EAAE,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,KAAK,IAC9E,IAAI,CAAC,KAAK,CAAC,QAAQ,CAChB,EACN;iBACH;aACF;;;;;kBCDoB,QAAS,SAAQF,SAA+C;gBAGnF,YAAY,KAAqB;oBAC/B,KAAK,CAAC,KAAK,CAAC,CAAC;oBAHP,aAAQ,GAAG,KAAK,CAAC;oBAKvB,IAAI,CAAC,KAAK,GAAG,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC;oBAEhC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;iBACxC;gBAEO,OAAO,CAAC,CAAmB;oBACjC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,IAAI,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE;wBACpE,OAAO;qBACR;oBACD,CAAC,CAAC,cAAc,EAAE,CAAC;oBACnB,CAAC,CAAC,OAAO,GAAG,KAAK,CAAC;oBAClB,CAAC,CAAC,eAAe,EAAE,CAAC;oBAEpB,IAAI,CAAC,QAAQ,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,EAAE;wBAC/B,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,IAAI,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;6BACzD,KAAK,EAAE;6BACP,IAAI,CAAC;4BACJ,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE;gCAClB,IAAI,CAAC,QAAQ,CAAC,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC,CAAC;6BACnC;yBACF,CAAC,CAAC;qBACN,CAAC,CAAC;iBACJ;gBAEM,oBAAoB;oBACzB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;iBACtB;gBAEM,MAAM;oBACX,MAAM,SAAS,GAAGE,UAAS,CAAC,UAAU,EAAE,WAAW,EACjD,IAAI,CAAC,KAAK,CAAC,SAAS,EAAE,EAAE,UAAU,EAAE,IAAI,CAAC,KAAK,CAAC,QAAQ,IAAI,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC;oBAEnF,QACED,uBAAK,SAAS,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,CAAC,OAAO,EAAE,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,KAAK,IACtE,IAAI,CAAC,KAAK,CAAC,QAAQ,CAChB,EACN;iBACH;aACF;;;;;kBC/CoB,MAAO,SAAQD,SAAgD;gBAClF,YAAY,KAAwB;oBAClC,KAAK,CAAC,KAAK,CAAC,CAAC;oBAEb,IAAI,CAAC,KAAK,GAAG;wBACX,gBAAgB,EAAE,CAAC;qBACpB,CAAC;iBACH;gBAEO,eAAe,CAAC,GAAU,EAAE,KAAa;oBAC/C,IAAI,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,KAAK,EAAE;wBAC1C,OAAO,IAAI,CAAC;qBACb;oBACD,MAAM,iBAAiB,GAAG,MAAM,IAAI,CAAC,QAAQ,CAAC,EAAE,gBAAgB,EAAE,KAAK,EAAE,CAAC,CAAC;oBAC3E,MAAM,SAAS,GAAGE,UAAS,CAAC,aAAa,EAAE,EAAE,UAAU,EAAE,IAAI,CAAC,KAAK,CAAC,gBAAgB,KAAK,KAAK,EAAE,CAAC,CAAC;oBAClG,QACED,cAAC,QAAQ,IAAC,GAAG,EAAE,KAAK,EAAE,SAAS,EAAE,SAAS,EAAE,OAAO,EAAE,iBAAiB,IACnE,GAAG,CAAC,KAAK,CAAC,KAAK,CACP,EACX;iBACH;gBAEO,gBAAgB;oBACtB,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE;wBACxB,OAAO,IAAI,CAAC;qBACb;oBACD,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,QAAmB,CAAC;oBAC5C,QACEA,8BACG,IAAI,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,KAAK,KAAK,IAAI,CAAC,eAAe,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC,CACpD,EACT;iBACH;gBAEO,iBAAiB;oBACvB,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE;wBACxB,OAAO,IAAI,CAAC;qBACb;oBACD,OAAO,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,gBAAgB,CAAC,CAAC;iBACzD;gBAEM,MAAM;oBACX,QACEA,2BAAS,SAAS,EAAEC,UAAS,CAAC,QAAQ,EAAE,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,EAAE,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,KAAK;wBACnF,IAAI,CAAC,gBAAgB,EAAE;wBACvB,IAAI,CAAC,iBAAiB,EAAE,CACjB,EACV;iBACH;aACF;;;;;kBCjDoB,aAAc,SAAQF,SAAoC;gBACtE,MAAM;oBACX,IAAI,KAA8B,CAAC;oBACnC,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,KAAK,IAAI,KAAK,CAAC,KAAK,CAAC,CAAC;oBAE3D,QACEC,cAAC,MAAM,IAAC,SAAS,EAAC,eAAe;wBAC/BA,yBAAO,GAAG,EAAE,EAAE,IAAI,KAAK,GAAG,EAAE,EAAE,WAAW,EAAC,uBAAuB,GAAG;wBACpEA,cAAC,QAAQ,IAAC,SAAS,EAAC,WAAW,EAAC,OAAO,EAAE,KAAK;4BAC5CA,cAAC,eAAe,IAAC,IAAI,EAAEI,MAAiB,GAAI;mCACnC,CACJ,EACT;iBACH;aACF;;;;;kBCVoB,aAAc,SAAQL,SAAoC;gBAC7E,YAAY,KAA0B;oBACpC,KAAK,CAAC,KAAK,CAAC,CAAC;iBACd;gBAEM,mBAAmB,CAAC,MAAsB,EAAE,GAAW;oBAC5D,MAAM,IAAI,GAAG,MAAM,CAAC,OAAO,KAAK,KAAK;wBACnCC,cAAC,eAAe,IAAC,IAAI,EAAEK,OAAkB,GAAI;wBAC7C,MAAM,CAAC,OAAO,KAAK,IAAI;4BACrBL,cAAC,eAAe,IAAC,IAAI,EAAEM,OAAkB,GAAI;4BAC7CN,cAAC,eAAe,IAAC,IAAI,EAAEO,UAAqB,GAAI,CAAC;oBAErD,IAAI,GAA4B,CAAC;oBACjC,IAAI,MAAM,CAAC,GAAG,IAAI,MAAM,CAAC,GAAG,CAAC,MAAM,EAAE;wBACnC,GAAG,IACDP,sBAAI,SAAS,EAAC,KAAK,IAChB,MAAM,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,CAAC,KAAKA,sBAAI,GAAG,EAAE,CAAC,IAAG,IAAI,CAAM,CAAC,CAClD,CACN,CAAC;qBACH;oBAED,IAAI,KAAK,GAAG,MAAM,CAAC,OAAO,IAAI,EAAE,CAAC;oBACjC,IAAI,MAAM,CAAC,IAAI,EAAE;wBACf,KAAK,IAAI,WAAW,GAAG,MAAM,CAAC,IAAI,CAAC;qBACpC;oBAED,QACEA,cAACQ,QAAc,IAAC,GAAG,EAAE,GAAG;wBACtBR,uBAAK,SAAS,EAAC,QAAQ;4BACrBA,uBAAK,SAAS,EAAC,cAAc;gCAAE,IAAI;;gCAAG,KAAK,CAAO;4BACjD,GAAG,CACA;wBACL,MAAM,CAAC,QAAQ,IAAI,MAAM,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,KAAK,EAAE,KAAK,KACnD,IAAI,CAAC,mBAAmB,CAAC,KAAK,EAAE,GAAG,GAAG,GAAG,GAAG,KAAK,CAAC,CAAC,CACtC,EACjB;iBACH;gBAEM,MAAM;oBACX,QACEA,cAAC,MAAM,IAAC,SAAS,EAAC,eAAe;wBAC/BA,cAAC,WAAW;;4BAEVA,cAAC,QAAQ,IAAC,OAAO,EAAE,IAAI,CAAC,KAAK,CAAC,OAAO;gCACnCA,cAAC,eAAe,IAAC,IAAI,EAAEK,OAAkB,GAAI,CACpC,CACC;wBACdL,cAAC,aAAa,QACX,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,KAAK,KAAK,IAAI,CAAC,mBAAmB,CAAC,IAAI,EAAE,KAAK,CAAC,QAAQ,EAAE,CAAC,CAAC,CAC5E,CACT,EACT;iBACH;aACF;;;;;kBC3DoB,eAAgB,SAAQD,SAAsC;gBAC1E,MAAM;oBACX,MAAM,SAAS,GAAGE,UAAS,CAAC,iBAAiB,EAAE,IAAI,CAAC,KAAK,CAAC,SAAS,EAAE;wBACnE,4BAA4B,EAAE,IAAI,CAAC,KAAK,CAAC,OAAO,KAAK,MAAM;wBAC3D,4BAA4B,EAAE,IAAI,CAAC,KAAK,CAAC,OAAO,KAAK,MAAM;qBAC5D,CAAC,CAAC;oBAEH,QACED,uBAAK,SAAS,EAAE,SAAS,EAAE,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,KAAK,IAC/C,IAAI,CAAC,KAAK,CAAC,QAAQ,CAChB,EACN;iBACH;aACF;;;;;kBCEoB,UAAW,SAAQD,SAAmD;gBACzF,YAAY,KAAuB;oBACjC,KAAK,CAAC,KAAK,CAAC,CAAC;oBAEb,IAAI,CAAC,KAAK,GAAG;wBACX,WAAW,EAAE,KAAK;qBACnB,CAAC;oBAEF,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBAC/C,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBAC/C,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBACzC,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBAC3C,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;iBAC1C;gBAEO,WAAW;oBACjB,IAAI,CAAC,QAAQ,CAAC,EAAE,WAAW,EAAE,IAAI,EAAE,CAAC,CAAC;iBACtC;gBAEO,WAAW;oBACjB,IAAI,CAAC,QAAQ,CAAC,EAAE,WAAW,EAAE,KAAK,EAAE,CAAC,CAAC;iBACvC;gBAEO,QAAQ;oBACd,IAAI,CAAC,WAAW,EAAE,CAAC;oBACnB,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;iBACxC;gBAEO,SAAS;oBACf,IAAI,CAAC,WAAW,EAAE,CAAC;oBACnB,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;iBACzC;gBAEO,QAAQ;oBACd,IAAI,MAAM,CAAC,OAAO,CAAC,SAAS,CAAC,EAAE;wBAC7B,IAAI,CAAC,WAAW,EAAE,CAAC;wBACnB,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;qBACxC;iBACF;gBAEM,WAAW;oBAChB,IAAI,UAAmC,CAAC;oBACxC,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,SAAS,EAAE;wBAC/B,UAAU,GAAGC,wBAAM,SAAS,EAAC,WAAW;4BAACA,cAAC,eAAe,IAAC,IAAI,EAAES,YAAuB,GAAI,CAAO,CAAC;qBACpG;oBAED,QACET,cAAC,WAAW;wBACVA,cAAC,eAAe,IAAC,IAAI,EAAEU,MAAiB,GAAI;;wBAAE,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI;wBACnE,UAAU,CACC,EACd;iBACH;gBAEM,iBAAiB;oBACtB,QACEV,cAAC,aAAa,IAAC,SAAS,EAAC,aAAa,IACnC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,WAAW,IAAI,gBAAgB,CACpC,EAChB;iBACH;gBAEM,YAAY;oBACjB,IAAI,UAAU,GAAuB,SAAS,CAAC;oBAC/C,IAAI,UAA8B,CAAC;oBACnC,IAAI,OAAO,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,MAAM,KAAK,QAAQ,EAAE;wBAChD,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC;qBACvC;yBAAM,IAAI,OAAO,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,MAAM,KAAK,QAAQ,EAAE;wBACvD,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC;wBAC7E,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC;qBAC7C;oBACD,MAAM,MAAM,GAAG,CAAC,UAAU,KAAKA,qBAAG,IAAI,EAAE,WAAW,GAAG,UAAU,IAAG,UAAU,CAAK,IAAI,UAAU,CAAC;oBAEjG,QACEA,cAAC,aAAa,IAAC,SAAS,EAAC,QAAQ;;wBAAK,MAAM,CAAiB,EAC7D;iBACH;gBAEM,YAAY;oBACjB,IAAI,QAAQ,GAAGA,0BAAO,CAAC;oBACvB,IAAI,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,UAAU,EAAE;wBAChC,QAAQ,IACNA,qBAAG,SAAS,EAAC,WAAW,EAAC,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,UAAU,EAAE,MAAM,EAAC,QAAQ;4BAC1EA,cAAC,eAAe,IAAC,IAAI,EAAEW,QAAmB,GAAI;sCAC5C,CACL,CAAC;qBACH;oBAED,MAAM,SAAS,GAAGV,UAAS,CAAC,QAAQ,EAAE,SAAS,EAAE,EAAE,MAAM,EAAE,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC,CAAC;oBAErF,QACED,cAAC,eAAe,IAAC,SAAS,EAAE,SAAS,EAAE,OAAO,EAAC,MAAM;wBACnDA,uBAAK,SAAS,EAAC,SAAS,IAAE,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,OAAO,CAAO;wBACzD,QAAQ;wBACTA,cAAC,QAAQ,IAAC,OAAO,EAAE,IAAI,CAAC,WAAW;4BAAEA,cAAC,eAAe,IAAC,IAAI,EAAEY,KAAgB,GAAI;sCAAkB,CAClF,EAClB;iBACH;gBAEM,aAAa;oBAClB,MAAM,SAAS,GAAGX,UAAS,CAAC,QAAQ,EAAE,SAAS,EAAE,EAAE,MAAM,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,CAAC,CAAC;oBAEtF,QACED,cAAC,eAAe,IAAC,SAAS,EAAE,SAAS,EAAE,OAAO,EAAC,MAAM;wBACnDA,cAAC,QAAQ,IAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,SAAS,EAAE,OAAO,EAAE,IAAI,CAAC,QAAQ;4BACtEA,cAAC,eAAe,IAAC,IAAI,EAAEa,UAAqB,GAAI;sCACvC;wBAEXb,cAAC,QAAQ,IAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,SAAS,EAAE,OAAO,EAAE,IAAI,CAAC,QAAQ;4BACtEA,cAAC,eAAe,IAAC,IAAI,EAAEc,UAAqB,GAAI;sCACvC;wBACXd,cAAC,QAAQ,IAAC,OAAO,EAAE,IAAI,CAAC,WAAW;4BACjCA,cAAC,eAAe,IAAC,IAAI,EAAEK,OAAkB,GAAI;qCACpC,CACK,EAClB;iBACH;gBAEM,MAAM;oBACX,QACEL,cAAC,MAAM,IAAC,SAAS,EAAC,YAAY;wBAC3B,IAAI,CAAC,WAAW,EAAE;wBAClB,IAAI,CAAC,iBAAiB,EAAE;wBACxB,IAAI,CAAC,YAAY,EAAE;wBACnB,IAAI,CAAC,YAAY,EAAE;wBACnB,IAAI,CAAC,aAAa,EAAE,CACd,EACT;iBACH;aACF;;YCpJD;AACA,YAAO,MAAM,OAAO,GAAyB,CAAC;oBAC5C,IAAI,EAAE,yBAAyB;oBAC/B,KAAK,EAAE,8BAA8B;oBACrC,GAAG,EAAE,qDAAqD;iBAC3D,EAAE;oBACD,IAAI,EAAE,uBAAuB;oBAC7B,KAAK,EAAE,cAAc;oBACrB,GAAG,EAAE,mDAAmD;iBACzD,EAAE;oBACD,IAAI,EAAE,0BAA0B;oBAChC,KAAK,EAAE,iBAAiB;oBACxB,GAAG,EAAE,sDAAsD;iBAC5D,EAAE;oBACD,IAAI,EAAE,8BAA8B;oBACpC,KAAK,EAAE,8BAA8B;oBACrC,GAAG,EAAE,0DAA0D;iBAChE,EAAE;oBACD,IAAI,EAAE,wBAAwB;oBAC9B,KAAK,EAAE,2BAA2B;oBAClC,GAAG,EAAE,oDAAoD;iBAC1D,EAAE;oBACD,IAAI,EAAE,oBAAoB;oBAC1B,KAAK,EAAE,yBAAyB;oBAChC,GAAG,EAAE,gDAAgD;iBACtD,EAAE;oBACD,IAAI,EAAE,mBAAmB;oBACzB,KAAK,EAAE,UAAU;oBACjB,GAAG,EAAE,+CAA+C;iBACrD,CAAC,CAAC;;;;;kBClBkB,aAAc,SAAQD,SAAoC;gBACrE,kBAAkB;oBACxB,MAAM,KAAK,GAAkB,OAAO,CAAC,GAAG,CAAC,IAAI;wBAC3C,MAAM,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,KAAK,IAAI,CAAC,IAAI,CAAC,CAAC;wBACrE,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;wBACjD,QACEC,uBAAK,SAAS,EAAC,mBAAmB,EAAC,GAAG,EAAE,IAAI,CAAC,IAAI;4BAC/CA,qBAAG,SAAS,EAAC,WAAW,EAAC,IAAI,EAAE,IAAI,CAAC,GAAG,EAAE,MAAM,EAAC,QAAQ;gCACtDA,cAAC,eAAe,IAAC,IAAI,EAAEW,QAAmB,GAAI;;gCAAE,IAAI,CAAC,KAAK,CACxD;4BACJX,cAAC,QAAQ,IAAC,QAAQ,EAAE,SAAS,EAAE,OAAO,EAAE,OAAO;gCAC7CA,cAAC,eAAe,IAAC,IAAI,EAAEa,UAAqB,GAAI;uCACvC,CACP,EACN;qBACH,CAAC,CAAC;oBAEH,OAAO,KAAK,CAAC;iBACd;gBAEM,MAAM;oBACX,QACEb,cAAC,MAAM,IAAC,SAAS,EAAC,eAAe;wBAC/BA,cAAC,WAAW;4BAACA,cAAC,eAAe,IAAC,IAAI,EAAEe,OAAkB,GAAI;8CAA6B;wBACtF,IAAI,CAAC,kBAAkB,EAAE,CACnB,EACT;iBACH;aACF;;;;;kBC3BoB,iBAAkB,SAAQhB,SAAwC;gBAC9E,MAAM;oBACX,MAAM,kBAAkB,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,SAAS,CAAC,CAAC;oBACvE,MAAM,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,SAAS,KAAK,SAAS,CAAC,CAAC;oBAC1E,MAAM,YAAY,GAAG,SAAS,GAAG,kBAAkB,CAAC,MAAM,GAAG,GAAG,CAAC;oBAEjE,QACEC,cAAC,MAAM,IAAC,SAAS,EAAC,mBAAmB;wBACnCA,cAAC,eAAe,IAAC,OAAO,EAAC,MAAM;4BAC7BA;;gCAAe,YAAY,CAAO;4BAClCA,cAAC,QAAQ,IAAC,SAAS,EAAC,oBAAoB,EAAC,OAAO,EAAE,IAAI,CAAC,KAAK,CAAC,cAAc,EAAE,QAAQ,EAAE,IAAI,CAAC,KAAK,CAAC,eAAe;gCAC/GA,cAAC,eAAe,IAAC,IAAI,EAAEgB,SAAoB,EAAE,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,eAAe,GAAI;yCACxE;4BACXhB,cAAC,QAAQ,IAAC,SAAS,EAAC,iBAAiB,EAAC,OAAO,EAAE,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,QAAQ,EAAE,CAAC,kBAAkB,CAAC,MAAM;gCACzGA,cAAC,eAAe,IAAC,IAAI,EAAEa,UAAqB,GAAI;8CACvC,CACK,CACX,EACT;iBACH;aACF;;;;;kBCboB,iBAAkB,SAAQd,SAA6C;gBAI1F,YAAY,KAAU;oBACpB,KAAK,CAAC,KAAK,CAAC,CAAC;oBAEb,IAAI,CAAC,KAAK,GAAG;wBACX,OAAO,EAAE,KAAK;wBACd,eAAe,EAAE,KAAK;wBACtB,UAAU,EAAE,KAAK;wBACjB,OAAO,EAAE,EAAE;wBACX,OAAO,EAAE,EAAE;qBACZ,CAAC;oBAEF,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBAC/C,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBACjD,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBAC3C,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBACjD,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBACjD,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBACnD,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBAC3C,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;iBAC9C;gBAEM,iBAAiB;oBACtB,IAAI,CAAC,WAAW,EAAE,CAAC;iBACpB;gBAEM,WAAW;oBAChB,OAAO,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,EAAE;yBAC1C,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,QAAQ,CAAC,EAAE,OAAO,EAAE,CAAC,CAAC;yBAC3C,KAAK,EAAE,CAAC;iBACZ;gBAEY,YAAY;;wBACvB,IAAI,CAAC,QAAQ,CAAC,EAAE,eAAe,EAAE,IAAI,EAAE,CAAC,CAAC;wBACzC,MAAM,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,YAAY,EAAE,CAAC;wBACnD,IAAI,CAAC,QAAQ,CAAC,EAAE,eAAe,EAAE,KAAK,EAAE,CAAC,CAAC;wBAC1C,MAAM,IAAI,CAAC,WAAW,EAAE,CAAC;qBAC1B;iBAAA;gBAEY,SAAS;;wBACpB,MAAM,kBAAkB,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,SAAS,CAAC,CAAC;wBACvE,IAAI,CAAC,kBAAkB,CAAC,MAAM,EAAE;4BAC9B,OAAO;yBACR;wBAED,MAAM,OAAO,GAAqB,EAAE,CAAC;wBACrC,IAAI,CAAC,QAAQ,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC;wBACjC,IAAI;4BACF,KAAK,MAAM,MAAM,IAAI,kBAAkB,EAAE;gCACvC,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;gCACvE,OAAO,CAAC,IAAI,CAAC,GAAG,MAAM,CAAC,CAAC;6BACzB;4BACD,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;yBAC1B;wBAAC,OAAO,KAAK,EAAE;4BACd,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;yBACvB;wBACD,MAAM,IAAI,CAAC,WAAW,EAAE,CAAC;qBAC1B;iBAAA;gBAEY,YAAY,CAAC,MAA6B;;wBACrD,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE;4BACrB,OAAO;yBACR;wBAED,IAAI,CAAC,QAAQ,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC;wBACjC,IAAI;4BACF,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;4BACvE,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC;yBACzB;wBAAC,OAAO,KAAK,EAAE;4BACd,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;yBACvB;wBACD,MAAM,IAAI,CAAC,WAAW,EAAE,CAAC;qBAC1B;iBAAA;gBAEY,aAAa,CAAC,MAA6B;;wBACtD,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE;4BACpB,OAAO;yBACR;wBAED,IAAI,CAAC,QAAQ,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC;wBACjC,IAAI;4BACF,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;4BACxE,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC;yBACzB;wBAAC,OAAO,KAAK,EAAE;4BACd,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;yBACvB;wBACD,MAAM,IAAI,CAAC,WAAW,EAAE,CAAC;qBAC1B;iBAAA;gBAEY,YAAY,CAAC,MAA6B;;wBACrD,IAAI,CAAC,MAAM,CAAC,SAAS,EAAE;4BACrB,OAAO;yBACR;wBAED,IAAI,CAAC,QAAQ,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC;wBACjC,IAAI;4BACF,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;4BACvE,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC;yBACzB;wBAAC,OAAO,KAAK,EAAE;4BACd,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;yBACvB;wBACD,MAAM,IAAI,CAAC,WAAW,EAAE,CAAC;qBAC1B;iBAAA;gBAEY,SAAS,CAAC,UAAyB;;wBAC9C,IAAI,CAAC,UAAU,IAAI,CAAC,UAAU,CAAC,IAAI,EAAE,EAAE;4BACrC,OAAO;yBACR;wBAED,IAAI,CAAC,QAAQ,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC;wBACjC,IAAI;4BACF,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;4BACnE,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC;yBACzB;wBAAC,OAAO,KAAK,EAAE;4BACd,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;yBACvB;wBACD,MAAM,IAAI,CAAC,WAAW,EAAE,CAAC;qBAC1B;iBAAA;gBAEO,SAAS,CAAC,GAAQ;oBACxB,MAAM,OAAO,GAAG,GAAG,IAAI,GAAG,CAAC,OAAO,IAAI,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;oBAC1D,MAAM,MAAM,GAAG,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,KAAK,EAAE,GAAG,EAAE,CAAC,OAAO,CAAC,EAAoB,CAAC;oBACtF,IAAI,CAAC,QAAQ,CAAC,EAAE,OAAO,EAAE,KAAK,EAAE,UAAU,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;iBACxE;gBAEO,UAAU,CAAC,OAAyB;oBAC1C,IAAI,CAAC,QAAQ,CAAC,EAAE,OAAO,EAAE,KAAK,EAAE,UAAU,EAAE,IAAI,EAAE,OAAO,EAAE,CAAC,CAAC;iBAC9D;gBAEM,UAAU;oBACf,IAAI,CAAC,QAAQ,CAAC,EAAE,UAAU,EAAE,KAAK,EAAE,CAAC,CAAC;iBACtC;gBAEM,MAAM;oBACX,QACEC,2BAAS,SAAS,EAAC,mBAAmB;wBACnC,IAAI,CAAC,KAAK,CAAC,OAAO,KACjBA,cAAC,SAAS;4BAACA,cAAC,OAAO,IAAC,MAAM,EAAE,IAAI,GAAI,CAAY,CACjD;wBACA,IAAI,CAAC,KAAK,CAAC,UAAU,KACpBA,cAAC,SAAS;4BACRA,cAAC,aAAa,IAAC,OAAO,EAAE,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,OAAO,EAAE,IAAI,CAAC,UAAU,GAAI,CAC9D,CACb;wBAEDA,cAAC,MAAM;4BACLA,cAAC,KAAK,IAAC,KAAK,EAAC,WAAW;gCACtBA,cAAC,YAAY;oCACXA,cAAC,iBAAiB,IAChB,eAAe,EAAE,IAAI,CAAC,KAAK,CAAC,eAAe,EAC3C,OAAO,EAAE,IAAI,CAAC,KAAK,CAAC,OAAO,EAC3B,cAAc,EAAE,IAAI,CAAC,YAAY,EACjC,WAAW,EAAE,IAAI,CAAC,SAAS,EAC3B,cAAc,EAAE,IAAI,CAAC,YAAY,GAAI,CAC1B;gCACd,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,MAAM,KACzBA,cAAC,YAAY;oCACXA,cAAC,aAAa,OAAG,CACJ,CAChB;gCACDA,cAAC,YAAY,QACV,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,IAC1BA,cAAC,UAAU,IAAC,GAAG,EAAE,IAAI,CAAC,IAAI,EACxB,MAAM,EAAE,IAAI,EACZ,QAAQ,EAAE,IAAI,CAAC,YAAY,EAC3B,SAAS,EAAE,IAAI,CAAC,aAAa,EAC7B,QAAQ,EAAE,IAAI,CAAC,YAAY,GAAI,CAAC,CACvB,CACT;4BACRA,cAAC,KAAK,IAAC,KAAK,EAAC,SAAS;gCACpBA,cAAC,YAAY;oCACXA,cAAC,aAAa,IAAC,KAAK,EAAE,IAAI,CAAC,SAAS,GAAI,CAC3B;gCACfA,cAAC,YAAY;oCACXA,cAAC,aAAa,IAAC,KAAK,EAAE,IAAI,CAAC,SAAS,EAAE,OAAO,EAAE,IAAI,CAAC,KAAK,CAAC,OAAO,GAAI,CACxD,CACT,CACD,CAED,EACV;iBACH;;YAvLa,6BAAW,GAAG,gBAAgB,CAAC;;;;;kBCrB1B,UAAW,SAAQD,SAAe;gBAC9C,MAAM;oBACX,QACEC,2BAAS,SAAS,EAAC,YAAY;wBAC7BA,cAAC,OAAO,IAAC,eAAe,EAAC,QAAQ,EAAC,EAAE,EAAC,sBAAsB,EAAC,IAAI,EAAC,QAAQ,cAAkB;wBAC3FA,cAAC,OAAO,IAAC,eAAe,EAAC,QAAQ,EAAC,EAAE,EAAC,uBAAuB,EAAC,IAAI,EAAC,QAAQ,eAAmB;wBAC7FA,cAAC,OAAO,IAAC,eAAe,EAAC,QAAQ,EAAC,EAAE,EAAC,cAAc,EAAC,IAAI,EAAC,QAAQ,YAAgB;wBACjFA,cAAC,OAAO,IAAC,eAAe,EAAC,QAAQ,EAAC,EAAE,EAAC,iBAAiB,EAAC,IAAI,EAAC,QAAQ,eAAmB;wBACvFA,cAAC,OAAO,IAAC,eAAe,EAAC,QAAQ,EAAC,EAAE,EAAC,eAAe,EAAC,IAAI,EAAC,QAAQ,aAAiB,CAC3E,EACV;iBACH;aACF;;YCjBM,MAAM,OAAO,GAAG,CAAc,QAA+B,EAAE,IAAY;gBAC9E,OAAO,CAAC,IAAY;oBAChB,IAAI,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;wBACtB,OAAO,QAAQ,CAAC,IAAI,CAAC,CAAC;qBACzB;iBACJ,CAAA;YACL,CAAC,CAAC;;YCJK,MAAM,oBAAoB,GAAG,CAAC,KAAuB;gBAC1D,MAAM,YAAY,GAAG,KAAK,CAAC,YAAY,CAAC;gBAExC,IAAI,KAAK,CAAC,OAAO,EAAE;oBACjB,IAAI,YAAY,IAAI,KAAK,CAAC,OAAO,CAAC,YAAY,CAAC,EAAE;wBAC/C,OAAO,YAAY,CAAC;qBACrB;oBACD,OAAO,EAAE,CAAC;iBACX;gBAED,QAAQ,KAAK,CAAC,SAAS;oBACrB,KAAK,QAAQ;wBACX,IAAI,MAAM,GAAQ,YAAY,CAAC;wBAE/B,IAAI,MAAM,KAAK,SAAS,EAAE;4BACxB,MAAM,GAAG,qBAAqB,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;yBAC9C;wBAED,OAAO,MAAM,CAAC;oBAChB,KAAK,QAAQ;wBACX,OAAO,YAAY,IAAI,CAAC,CAAC;oBAC3B,KAAK,SAAS;wBACZ,OAAO,YAAY,IAAI,KAAK,CAAC;oBAC/B,KAAK,QAAQ;wBACX,OAAO,YAAY,IAAI,EAAE,CAAC;oBAC5B,KAAK,OAAO;wBACV,OAAO,YAAY,IAAI,EAAE,CAAC;oBAC5B,KAAK,cAAc;wBACjB,OAAO,SAAS,CAAC;iBACpB;gBACD,OAAO,SAAS,CAAC;YACnB,CAAC,CAAC;AAEF,YAAO,MAAM,qBAAqB,GAAG,CAAC,MAA2B;gBAC/D,MAAM,MAAM,GAAG,EAAE,CAAC;gBAClB,IAAI,MAAM,EAAE;oBACV,MAAM,CAAC,OAAO,CAAC,CAAC;wBACd,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,oBAAoB,CAAC,CAAC,CAAC,CAAC;qBAC1C,CAAC,CAAC;iBACJ;gBACD,OAAO,MAAM,CAAC;YAChB,CAAC,CAAC;;kBCrCmB,aAAc,SAAQD,SAAyC;gBAClF,YAAY,KAAU;oBACpB,KAAK,CAAC,KAAK,CAAC,CAAC;oBACb,IAAI,CAAC,KAAK,GAAG,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC;iBAC9B;gBAEM,iBAAiB,CAAC,KAAU,EAAE,IAAS;oBAC5C,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;oBACnB,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;oBAClB,IAAI,CAAC,QAAQ,CAAC,EAAE,KAAK,EAAE,CAAC,CAAC;iBAC1B;gBAEM,MAAM;oBACX,IAAI,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE;wBACpB,OAAOC,kDAA8B,CAAC;qBACvC;oBACD,OAAO,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC;iBAC5B;aACF;;;ACxBD,AACAiB,gCAAkB,GAAG,IAAI,CAAC;YAC1B,IAAI,IAAI,kBAAkB,YAAY;gBAClC,SAAS,IAAI,CAAC,IAAI,EAAE;oBAChB,IAAI,CAAC,IAAI,EAAE;wBACP,MAAM,IAAI,SAAS,CAAC,yCAAyC,CAAC,CAAC;qBAClE;oBACD,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;oBACxB,IAAI,IAAI,IAAI,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE;wBAC3B,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;qBACrB;iBACJ;gBACD,IAAI,CAAC,MAAM,GAAG,UAAU,IAAI,EAAE;oBAC1B,IAAI,KAAK,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC;oBAC5B,OAAO,IAAI,KAAK,IAAI,YAAY,IAAI,IAAI,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC;iBACvE,CAAC;gBACF,IAAI,CAAC,MAAM,GAAG,YAAY;oBACtB,OAAO,IAAI,IAAI,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC;iBAChG,CAAC;gBACF,IAAI,CAAC,WAAW,GAAG,YAAY;oBAC3B,OAAO,IAAI,IAAI,CAAC,WAAW,CAAC,CAAC;iBAChC,CAAC;gBACF,IAAI,CAAC,KAAK,GAAG,UAAU,IAAI,EAAE;oBACzB,OAAO,IAAI,IAAI,CAAC,IAAI,CAAC,CAAC;iBACzB,CAAC;gBACF,IAAI,CAAC,GAAG,GAAG,YAAY;oBACnB,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;iBACtF,CAAC;gBACF,IAAI,CAAC,GAAG,GAAG,UAAU,KAAK,EAAE;oBACxB,IAAI,GAAG,GAAG,EAAE,CAAC;oBACb,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,EAAE,CAAC,EAAE,EAAE;;wBAE5B,GAAG,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,IAAI,OAAO,IAAI,CAAC,EAAE,QAAQ,CAAC,EAAE,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;qBAC1E;oBACD,OAAO,GAAG,CAAC;iBACd,CAAC;gBACF,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,UAAU,KAAK,EAAE;;;oBAGrC,OAAO,IAAI,CAAC,MAAM,CAAC,KAAK,CAAC,IAAI,IAAI,CAAC,KAAK,KAAK,KAAK,CAAC,QAAQ,EAAE,CAAC;iBAChE,CAAC;gBACF,IAAI,CAAC,SAAS,CAAC,OAAO,GAAG,YAAY;oBACjC,OAAO,IAAI,CAAC,KAAK,KAAK,IAAI,CAAC,KAAK,CAAC;iBACpC,CAAC;gBACF,IAAI,CAAC,SAAS,CAAC,QAAQ,GAAG,YAAY;oBAClC,OAAO,IAAI,CAAC,KAAK,CAAC;iBACrB,CAAC;gBACF,IAAI,CAAC,SAAS,CAAC,MAAM,GAAG,YAAY;oBAChC,OAAO;wBACH,KAAK,EAAE,IAAI,CAAC,KAAK;qBACpB,CAAC;iBACL,CAAC;gBACF,IAAI,CAAC,SAAS,GAAG,IAAI,MAAM,CAAC,gEAAgE,EAAE,GAAG,CAAC,CAAC;gBACnG,IAAI,CAAC,KAAK,GAAG,sCAAsC,CAAC;gBACpD,OAAO,IAAI,CAAC;aACf,EAAE,CAAC,CAAC;AACLA,0BAAY,GAAG,IAAI,CAAC;;;;;;;;;kBCtDP,WAAW;gBAAxB;oBACY,kBAAa,GAA2B,EAAE,CAAC;iBAkBtD;gBAhBU,SAAS,CAAC,QAAyB;oBACtC,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;iBACrC;gBAEM,WAAW,CAAC,QAAyB;oBACxC,MAAM,KAAK,GAAG,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC;oBACnD,IAAI,KAAK,IAAI,CAAC,EAAE;wBACZ,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC;qBACpC;iBACJ;gBAEY,OAAO,CAAC,IAAY;;wBAC7B,KAAK,MAAM,GAAG,IAAI,IAAI,CAAC,aAAa,EAAE;4BAClC,MAAM,OAAO,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC;yBACpC;qBACJ;iBAAA;aACJ;;kBCXY,sBAAsB;gBASjC,YAAmB,gBAA4C;oBAA5C,qBAAgB,GAAhB,gBAAgB,CAA4B;oBAR/C,WAAM,GAAG,IAAI,WAAW,EAAE,CAAC;oBAC3B,aAAQ,GAAG,IAAI,WAAW,EAA0B,CAAC;oBAC7D,yBAAoB,GAA2B,EAAE,CAAC;oBAClD,yBAAoB,GAA2B,EAAE,CAAC;oBAClD,yBAAoB,GAA2B,EAAE,CAAC;oBAClD,eAAU,GAA2B,EAAE,CAAC;oBACxC,yBAAoB,GAAuC,EAAE,CAAC;oBAGpE,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBACzD,IAAI,CAAC,0BAA0B,GAAG,IAAI,CAAC,0BAA0B,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBAC7E,IAAI,CAAC,sBAAsB,GAAG,IAAI,CAAC,sBAAsB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBACrE,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBAC3D,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC;iBAC/C;gBAEY,IAAI;;wBACf,IAAI,IAAI,CAAC,gBAAgB,EAAE;;4BAEzB,IAAI,CAAC,UAAU,GAAG,MAAM,IAAI,CAAC,gBAAgB,CAAC,QAAQ,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC;;4BAG3E,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC;;4BAG9D,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,gBAAgB,CAAC,eAAe,CAAC,gBAAgB,EAAE,CAAC;4BAC9E,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,OAAO,CAAC,UAAU;gCACpC,MAAM,UAAU,GAAG,MAAM,CAAC,UAAU,CAAC,CAAC;gCACtC,UAAU,CAAC,OAAO,CAAC,UAAU;oCAC3B,MAAM,GAAG,GAAG,UAAU,GAAG,GAAG,GAAG,UAAU,CAAC,IAAI,CAAC;oCAC/C,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,EAAE,UAAU,EAAE,UAAU,EAAE,GAAG,EAAE,CAAC,CAAC;iCACjE,CAAC,CAAC;6BACJ,CAAC,CAAC;yBACJ;qBACF;iBAAA;gBAEM,sBAAsB;oBAC3B,OAAO,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC;iBACjD;gBAEM,gBAAgB;oBACrB,OAAO,IAAI,CAAC,UAAU,CAAC;iBACxB;gBAEM,0BAA0B;oBAC/B,OAAO,IAAI,CAAC,oBAAoB,CAAC;iBAClC;gBAEM,sBAAsB,CAAC,WAAmB;oBAC/C,IAAI,CAAC,WAAW,EAAE;wBAChB,OAAO,SAAS,CAAC;qBAClB;oBACD,MAAM,SAAS,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,KAAK,WAAW,CAAC,CAAC;oBAClE,IAAI,CAAC,SAAS,EAAE;wBACd,OAAO,SAAS,CAAC;qBAClB;oBAED,MAAM,YAAY,GAAG,SAAS,CAAC,UAAU,GAAG,GAAG,GAAG,SAAS,CAAC,aAAa,CAAC;oBAC1E,MAAM,mBAAmB,GAAG,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,KAAK,YAAY,CAAC,CAAC;oBACxF,OAAO,mBAAmB,IAAI,mBAAmB,CAAC,UAAU,CAAC;iBAC9D;gBAEa,iBAAiB;;wBAC7B,OAAO,CAAC,GAAG,CAAC,sBAAsB,EAAE,IAAI,CAAC,oBAAoB,CAAC,CAAC;wBAC/D,OAAO,CAAC,GAAG,CAAC,sBAAsB,EAAE,IAAI,CAAC,oBAAoB,CAAC,CAAC;wBAC/D,OAAO,CAAC,GAAG,CAAC,sBAAsB,EAAE,IAAI,CAAC,oBAAoB,CAAC,CAAC;wBAE/D,IAAI,IAAI,CAAC,gBAAgB,EAAE;;4BAEzB,KAAK,MAAM,IAAI,IAAI,IAAI,CAAC,oBAAoB,EAAE;gCAC5C,MAAM,IAAI,CAAC,gBAAgB,CAAC,QAAQ,CAAC,UAAU,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;6BACtE;;4BAGD,KAAK,MAAM,IAAI,IAAI,IAAI,CAAC,oBAAoB,EAAE;gCAC5C,MAAM,IAAI,CAAC,gBAAgB,CAAC,QAAQ,CAAC,UAAU,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;6BACtE;;4BAGD,KAAK,MAAM,IAAI,IAAI,IAAI,CAAC,oBAAoB,EAAE;gCAC5C,MAAM,IAAI,CAAC,gBAAgB,CAAC,QAAQ,CAAC,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;6BACjE;yBACF;;wBAGD,IAAI,CAAC,oBAAoB,GAAG,EAAE,CAAC;wBAC/B,IAAI,CAAC,oBAAoB,GAAG,EAAE,CAAC;wBAC/B,IAAI,CAAC,oBAAoB,GAAG,EAAE,CAAC;qBAChC;iBAAA;gBAEM,sBAAsB,CAAC,EAAU;oBACtC,MAAM,SAAS,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,KAAK,EAAE,CAAC,CAAC;oBACzD,IAAI,SAAS,EAAE;wBACb,IAAI,CAAC,mBAAmB,CAAC,SAAS,CAAC,CAAC;qBACrC;iBACF;gBAEM,mBAAmB,CAAC,IAA0B;oBACnD,OAAO,CAAC,GAAG,CAAC,qBAAqB,EAAE,IAAI,CAAC,CAAC;;oBAGzC,MAAM,gBAAgB,GAAG,IAAI,CAAC,oBAAoB,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,KAAK,IAAI,CAAC,EAAE,CAAC,CAAC;oBACpF,IAAI,gBAAgB,IAAI,CAAC,EAAE;;wBAEzB,IAAI,CAAC,oBAAoB,CAAC,MAAM,CAAC,gBAAgB,EAAE,CAAC,CAAC,CAAC;qBACvD;yBAAM;;wBAEL,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;qBACtC;;oBAGD,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,KAAK,IAAI,CAAC,EAAE,CAAC,CAAC;oBAChE,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;iBACxC;gBAEM,mBAAmB,CAAC,IAA0B;oBACnD,OAAO,CAAC,GAAG,CAAC,qBAAqB,EAAE,IAAI,CAAC,CAAC;;oBAGzC,MAAM,gBAAgB,GAAG,IAAI,CAAC,oBAAoB,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,KAAK,IAAI,CAAC,EAAE,CAAC,CAAC;oBACpF,IAAI,gBAAgB,IAAI,CAAC,EAAE;;wBAEzB,IAAI,CAAC,oBAAoB,CAAC,MAAM,CAAC,gBAAgB,EAAE,CAAC,CAAC,CAAC;;wBAEtD,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;qBACtC;yBAAM;;wBAEL,IAAI,CAAC,oBAAoB,GAAG,IAAI,CAAC,oBAAoB,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,KAAK,IAAI,CAAC,EAAE,CAAC,CAAC;;wBAEpF,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;qBACtC;;oBAGD,MAAM,gBAAgB,GAAG,IAAI,CAAC,oBAAoB,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,KAAK,IAAI,CAAC,EAAE,CAAC,CAAC;oBACpF,IAAI,gBAAgB,IAAI,CAAC,EAAE;;wBAEzB,IAAI,CAAC,oBAAoB,CAAC,MAAM,CAAC,gBAAgB,EAAE,CAAC,CAAC,CAAC;qBACvD;;oBAGD,MAAM,sBAAsB,GAAG,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,KAAK,IAAI,CAAC,EAAE,CAAC,CAAC;oBAChF,IAAI,sBAAsB,IAAI,CAAC,EAAE;wBAC/B,IAAI,CAAC,UAAU,CAAC,sBAAsB,CAAC,GAAG,IAAI,CAAC;qBAChD;yBAAM;wBACL,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;qBAC5B;oBACD,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;iBACxC;gBAEM,mBAAmB,CAAC,IAA0B;oBACnD,OAAO,CAAC,GAAG,CAAC,qBAAqB,EAAE,IAAI,CAAC,CAAC;;oBAGzC,IAAI,CAAC,oBAAoB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;;oBAGrC,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBAC3B,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;iBACxC;aACF;AAED,YAAO,MAAM,iBAAiB,GAAGnB,aAAmB,CAAyB,IAAI,sBAAsB,EAAE,CAAC,CAAC;;kBC/JtF,SAAU,SAAQC,SAAqC;gBAK1E,YAAY,KAA2B;oBACrC,KAAK,CAAC,KAAK,CAAC,CAAC;oBAHP,cAAS,GAAa,EAAE,CAAC;oBAK/B,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBACjD,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBACvD,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBACvD,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;iBAC5D;gBAEO,eAAe,CAAC,KAAa,EAAE,UAA4B,EAAE,QAAa;oBAChF,IAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,IAAI,EAAE,CAAC;oBACnC,KAAK,GAAG,KAAK,CAAC,KAAK,EAAE,CAAC;oBACtB,KAAK,CAAC,KAAK,CAAC,GAAG,QAAQ,CAAC;oBACxB,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;iBACtD;gBAEO,eAAe,CAAC,KAAa;oBACnC,IAAI,KAAK,GAAU,IAAI,CAAC,KAAK,CAAC,KAAK,IAAI,EAAE,CAAC;oBAC1C,KAAK,GAAG,KAAK,CAAC,KAAK,EAAE,CAAC;oBACtB,MAAM,OAAO,GAAG,KAAK,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;oBACvC,IAAI,CAAC,0BAA0B,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;oBAEnE,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;oBAChC,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;iBACtD;gBAEO,0BAA0B,CAAC,IAAS,EAAE,UAA4B;oBACxE,IAAI,UAAU,CAAC,SAAS,KAAK,cAAc,EAAE;wBAC3C,IAAI,CAAC,OAAO,CAAC,sBAAsB,CAAC,IAAI,CAAC,CAAC;qBAC3C;yBAAM,IAAI,UAAU,CAAC,SAAS,KAAK,QAAQ,EAAE;wBAC5C,IAAI,UAAU,CAAC,MAAM,EAAE;4BACrB,UAAU,CAAC,MAAM,CAAC,OAAO,CAAC,KAAK;gCAC7B,MAAM,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;gCACpC,IAAI,UAAU,EAAE;oCACd,IAAI,KAAK,CAAC,OAAO,EAAE;wCACjB,UAAU,CAAC,OAAO,CAAC,CAAC,SAAc;4CAChC,IAAI,CAAC,0BAA0B,CAAC,SAAS,EAAE,KAAK,CAAC,CAAC;yCACnD,CAAC,CAAC;qCACJ;yCAAM;wCACL,IAAI,CAAC,0BAA0B,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;qCACpD;iCACF;6BACF,CAAC,CAAC;yBACJ;qBACF;iBACF;gBAEO,eAAe,CAAC,KAAa;oBACnC,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,IAAI,EAAE,CAAC;oBACrC,IAAI,KAAK,GAAG,CAAC,EAAE;wBACb,MAAM,IAAI,GAAG,KAAK,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;wBACvC,KAAK,CAAC,MAAM,CAAC,KAAK,GAAG,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;wBAEjC,MAAM,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;wBACnD,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,KAAK,GAAG,CAAC,EAAE,CAAC,EAAE,OAAO,CAAC,CAAC;wBAE7C,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;qBACtD;iBACF;gBAEO,iBAAiB,CAAC,KAAa;oBACrC,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,IAAI,EAAE,CAAC;oBACrC,IAAI,KAAK,GAAG,KAAK,CAAC,MAAM,GAAG,CAAC,EAAE;wBAC5B,MAAM,IAAI,GAAG,KAAK,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;wBACvC,KAAK,CAAC,MAAM,CAAC,KAAK,GAAG,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC,CAAC;wBAEjC,MAAM,OAAO,GAAG,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;wBACnD,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,KAAK,GAAG,CAAC,EAAE,CAAC,EAAE,OAAO,CAAC,CAAC;wBAE7C,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;qBACtD;iBACF;gBAEO,YAAY;oBAClB,MAAM,mBAAmB,qBAAQ,IAAI,CAAC,KAAK,CAAC,UAAU,CAAE,CAAC;oBACzD,mBAAmB,CAAC,OAAO,GAAG,KAAK,CAAC;oBACpC,MAAM,OAAO,GAAG,oBAAoB,CAAC,mBAAmB,CAAC,CAAC;oBAE1D,IAAI,OAAO,OAAO,KAAK,QAAQ,EAAE;wBAC/B,OAAO,CAAC,KAAK,GAAG,IAAI,CAAC;qBACtB;oBAED,IAAI,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,IAAI,EAAE,CAAC;oBACnC,KAAK,GAAG,KAAK,CAAC,KAAK,EAAE,CAAC;oBACtB,KAAK,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;oBACpB,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;iBACtD;gBAEO,eAAe,CAAC,KAAU,EAAE,KAAa;oBAC/C,MAAM,mBAAmB,qBAAQ,IAAI,CAAC,KAAK,CAAC,UAAU,CAAE,CAAC;oBACzD,mBAAmB,CAAC,OAAO,GAAG,KAAK,CAAC;oBACpC,mBAAmB,CAAC,WAAW,GAAG,OAAO,IAAI,KAAK,GAAG,CAAC,CAAC,CAAC;oBAExD,IAAI,GAAG,GAAG,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;oBAChC,IAAI,CAAC,GAAG,EAAE;wBACR,GAAG,GAAG,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,GAAGmB,MAAI,CAAC,GAAG,EAAE,CAAC;qBAC1C;oBAED,QACElB,cAACQ,QAAc,IAAC,GAAG,EAAE,GAAG;wBACtBR,cAAC,UAAU,IAAC,UAAU,EAAE,mBAAmB,EAAE,KAAK,EAAE,KAAK,EACvD,WAAW,EAAE,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,EAAE,KAAK,CAAC;4BACnDA,cAAC,QAAQ,IAAC,OAAO,EAAE,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,EAAE,KAAK,CAAC;gCACvDA,cAAC,eAAe,IAAC,IAAI,EAAEmB,YAAuB,GAAI,CACzC;4BACXnB,cAAC,QAAQ,IAAC,OAAO,EAAE,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,EAAE,KAAK,CAAC;gCACvDA,cAAC,eAAe,IAAC,IAAI,EAAEoB,kBAA+B,GAAI,CACjD;4BACXpB,cAAC,QAAQ,IAAC,OAAO,EAAE,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,EAAE,KAAK,CAAC;gCACzDA,cAAC,eAAe,IAAC,IAAI,EAAEqB,oBAAiC,GAAI,CACnD,CACA,CACE,EACjB;iBACH;gBAEM,MAAM;oBACX,MAAM,KAAK,GAAU,IAAI,CAAC,KAAK,CAAC,KAAK,IAAI,EAAE,CAAC;oBAC5C,QACErB,cAACQ,QAAc;wBACZ,KAAK,CAAC,GAAG,CAAC,CAAC,KAAK,EAAE,KAAK,KAAK,IAAI,CAAC,eAAe,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;wBAChER,cAAC,QAAQ,IAAC,SAAS,EAAC,gBAAgB,EAAC,OAAO,EAAE,IAAI,CAAC,YAAY;4BAC7DA,cAAC,eAAe,IAAC,IAAI,EAAEI,MAAiB,GAAI;wCACnC,CACI,EACjB;iBACH;;YAlIa,qBAAW,GAAG,iBAAiB,CAAC;;kBCTnC,qBAAqB;gBACzB,KAAK,CAAC,UAA4B;oBACvC,OAAO,CAAC,CAAC,UAAU,CAAC,OAAO,CAAC;iBAC7B;gBAEM,GAAG;oBACR,OAAO;wBACL,IAAI,EAAEkB,MAAiB;wBACvB,cAAc,EAAE,SAAS;wBACzB,YAAY,EAAE,CAAC,KAA2B;4BACxC,MAAM,KAAK,GAAG,KAAK,IAAI,KAAK,CAAC,KAAc,IAAI,EAAE,CAAC;4BAClD,OAAO,GAAG,GAAG,KAAK,CAAC,MAAM,GAAG,SAAS,CAAC;yBACvC;qBACF,CAAC;iBACH;aACF;;;;;kBCfY,mBAAoB,SAAQvB,SAAqC;gBAC5E,YAAY,KAA2B;oBACrC,KAAK,CAAC,KAAK,CAAC,CAAC;oBACb,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;iBAC1D;gBAEO,gBAAgB,CAAC,CAAsC;oBAC7D,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,EAAE,CAAC,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;iBACxE;gBAEM,MAAM;oBAEX,IAAI,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,CAErB;oBACD,QACEC,yBAAO,SAAS,EAAC,qBAAqB;wBACpCA,yBAAO,IAAI,EAAC,UAAU,EAAC,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,OAAO,EAAE,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,QAAQ,EAAE,IAAI,CAAC,gBAAgB,GAAI;wBAC9GA,wBAAM,SAAS,EAAC,QAAQ,GAAG,CACrB,EACR;iBACH;aACF;;kBCvBY,uBAAuB;gBAC3B,KAAK,CAAC,UAA4B;oBACvC,OAAO,UAAU,CAAC,SAAS,KAAK,SAAS,CAAC;iBAC3C;gBAEM,GAAG;oBACR,OAAO;wBACL,YAAY,EAAE,mBAAmB;qBAClC,CAAA;iBACF;aACF;;kBCXY,kBAAmB,SAAQD,SAAqC;gBAC3E,YAAY,KAA2B;oBACrC,KAAK,CAAC,KAAK,CAAC,CAAC;oBACb,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;iBACpD;gBAEO,aAAa,CAAC,CAAsC;oBAC1D,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,EAAE,CAAC,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;iBACtE;gBAEM,MAAM;oBACX,MAAM,KAAK,GAAG,CAAC,CAAmB;wBAChC,CAAC,CAAC,cAAc,EAAE,CAAC;wBACnB,CAAC,CAAC,eAAe,EAAE,CAAC;qBACrB,CAAC;oBACF,QACEC,yBAAO,KAAK,EAAE,EAAE,KAAK,EAAE,MAAM,EAAE,EAAE,IAAI,EAAC,QAAQ,EAAC,OAAO,EAAE,KAAK,EAC3D,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,KAAK,EAChD,QAAQ,EAAE,IAAI,CAAC,aAAa,EAAE,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,QAAQ,EAClE,GAAG,EAAE,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,QAAQ,EAAE,GAAG,EAAE,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,QAAQ,GAAI,EAC9E;iBACH;aACF;;kBCtBY,iBAAkB,SAAQD,SAAqC;gBAC1E,YAAY,KAA2B;oBACrC,KAAK,CAAC,KAAK,CAAC,CAAC;oBACb,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;iBACpD;gBAEO,aAAa,CAAC,CAAsC;oBAC1D,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,EAAE,CAAC,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;iBACtE;gBAEM,MAAM;oBACX,QACEC,yBAAO,KAAK,EAAE,EAAE,KAAK,EAAE,MAAM,EAAE,EAAE,IAAI,EAAC,OAAO,EAC3C,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,KAAK,EAChD,QAAQ,EAAE,IAAI,CAAC,aAAa,EAAE,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,QAAQ,EAClE,GAAG,EAAE,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,QAAQ,EAAE,GAAG,EAAE,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,QAAQ,GAAI,EAC9E;iBACH;aACF;;kBChBY,sBAAsB;gBAC1B,KAAK,CAAC,UAA4B;oBACvC,OAAO,UAAU,CAAC,SAAS,KAAK,QAAQ,CAAC;iBAC1C;gBAEM,GAAG,CAAC,UAA4B;oBACrC,IAAI,UAAU,CAAC,QAAQ,KAAK,SAAS,IAAI,UAAU,CAAC,QAAQ,KAAK,SAAS,IAAI,UAAU,CAAC,QAAQ,KAAK,SAAS,EAAE;wBAC/G,OAAO;4BACL,YAAY,EAAE,kBAAkB;4BAChC,cAAc,EAAE,iBAAiB;yBAClC,CAAC;qBACH;oBAED,OAAO;wBACL,YAAY,EAAE,kBAAkB;qBACjC,CAAC;iBACH;aACF;;kBClBY,kBAAmB,SAAQD,SAAqC;gBAC3E,YAAY,KAA2B;oBACrC,KAAK,CAAC,KAAK,CAAC,CAAC;oBACb,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;iBAC9D;gBAEO,kBAAkB,CAAC,QAAa;oBACtC,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,EAAE,QAAQ,CAAC,CAAC;iBACzD;gBAEM,MAAM;oBACX,OAAOC,cAAC,UAAU,IAAC,MAAM,EAAE,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,MAAM,EAAE,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,WAAW,EAAE,IAAI,CAAC,kBAAkB,GAAI,CAAC;iBAC5H;aACF;;kBCbY,sBAAsB;gBAC1B,KAAK,CAAC,UAA4B;oBACvC,OAAO,UAAU,CAAC,SAAS,KAAK,QAAQ,CAAC;iBAC1C;gBAEM,GAAG;oBACR,OAAO;wBACL,cAAc,EAAE,kBAAkB;qBAEnC,CAAC;iBACH;aACF;;kBCTY,oBAAqB,SAAQD,SAAwD;gBAChG,YAAY,KAA2B;oBACrC,KAAK,CAAC,KAAK,CAAC,CAAC;oBACb,IAAI,CAAC,KAAK,GAAG,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC;oBAC7B,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBACnD,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;iBAC9C;gBAEO,aAAa,CAAC,CAAsC;oBAC1D,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,EAAE,CAAC,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;iBACtE;gBAEO,UAAU;oBAChB,IAAI,CAAC,QAAQ,CAAC,KAAK,KAAK,EAAE,IAAI,EAAE,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;iBACjD;gBAEM,MAAM;oBACX,QACEC,uBAAK,KAAK,EAAE,EAAE,OAAO,EAAE,MAAM,EAAE;wBAC7BA,yBAAO,KAAK,EAAE,EAAE,KAAK,EAAE,MAAM,EAAE,EAAE,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,IAAI,GAAG,MAAM,GAAG,UAAU,EAAE,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,QAAQ,EAAE,IAAI,CAAC,aAAa,GAAI;wBAChKA,cAAC,QAAQ,IAAC,OAAO,EAAE,IAAI,CAAC,UAAU;4BAAEA,cAAC,eAAe,IAAC,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,IAAI,GAAGuB,UAAuB,GAAGC,KAAkB,GAAI,CAAW,CACpI,EACN;iBACH;aACF;;kBC1BY,wBAAwB;gBAC5B,KAAK,CAAC,UAA4B;oBACvC,OAAO,UAAU,CAAC,SAAS,KAAK,UAAU,CAAC;iBAC5C;gBAEM,GAAG;oBACR,OAAO;wBACL,YAAY,EAAE,oBAAoB;qBACnC,CAAC;iBACH;aACF;;;;;YCJD,MAAM,eAAe,GAAG,CAAC,YAAY,EAAE,sBAAsB,EAAE,iBAAiB,EAAE,iBAAiB;gBACjG,oBAAoB,EAAE,kBAAkB,EAAE,QAAQ,EAAE,cAAc;gBAClE,mBAAmB,EAAE,mBAAmB,EAAE,mBAAmB,EAAE,aAAa;gBAC5E,YAAY,EAAE,iBAAiB,EAAE,iBAAiB,EAAE,iBAAiB;gBACrE,aAAa,EAAE,kBAAkB,EAAE,kBAAkB,EAAE,kBAAkB;gBACzE,aAAa,EAAE,WAAW,EAAE,gBAAgB,EAAE,gBAAgB;gBAC9D,gBAAgB,EAAE,aAAa,EAAE,OAAO,EAAE,MAAM;gBAChD,OAAO,EAAE,QAAQ,EAAE,SAAS,EAAE,QAAQ;gBACtC,OAAO,EAAE,MAAM,EAAE,YAAY,EAAE,UAAU,EAAE,aAAa,EAAE,YAAY;gBACtE,UAAU,EAAE,cAAc,EAAE,kBAAkB,EAAE,qBAAqB,EAAE,kBAAkB;gBACzF,QAAQ,EAAE,MAAM,EAAE,eAAe,EAAE,YAAY,EAAE,WAAW,EAAE,gBAAgB;gBAC9E,mBAAmB,EAAE,eAAe,EAAE,QAAQ,EAAE,cAAc;gBAC9D,YAAY,EAAE,aAAa,EAAE,WAAW,EAAE,WAAW,EAAE,WAAW,EAAE,UAAU,EAAE,UAAU;gBAC1F,UAAU,EAAE,SAAS,EAAE,eAAe,EAAE,aAAa,EAAE,cAAc;gBACrE,YAAY,EAAE,gBAAgB,EAAE,iBAAiB,EAAE,UAAU;gBAC7D,iBAAiB,EAAE,kBAAkB,EAAE,aAAa,EAAE,WAAW;gBACjE,gBAAgB,EAAE,YAAY,EAAE,eAAe,EAAE,KAAK;gBACtD,eAAe,EAAE,YAAY,EAAE,OAAO,EAAE,QAAQ,CAAC,CAAC;AAMpD,kBAAqB,SAAU,SAAQzB,SAAsD;gBAG3F,YAAY,KAA2B;oBACrC,KAAK,CAAC,KAAK,CAAC,CAAC;oBAEb,IAAI,CAAC,KAAK,GAAG;wBACX,MAAM,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC;qBACzC,CAAC;oBAEF,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBACzC,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;iBAChD;gBAEM,kBAAkB,CAAC,SAA+B;oBACvD,IAAI,SAAS,KAAK,IAAI,CAAC,KAAK,EAAE;wBAC5B,IAAI,CAAC,QAAQ,CAAC,EAAE,MAAM,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;qBAC7D;iBACF;gBAEO,SAAS,CAAC,GAAW;oBAC3B,MAAM,MAAM,GAAuB,EAAE,CAAC;oBAEtC,IAAI,GAAG,EAAE;wBACP,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,IAAI;4BAC3B,MAAM,KAAK,GAAqB;gCAC9B,IAAI;gCACJ,WAAW,EAAE,IAAI;gCACjB,SAAS,EAAE,QAAQ;6BACpB,CAAC;4BACF,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;yBACpB,CAAC,CAAC;qBACJ;oBAED,OAAO,MAAM,CAAC;iBACf;gBAEO,WAAW,CAAC,KAAuB,EAAE,KAAU;oBACrD,MAAM,QAAQ,qBAAQ,IAAI,CAAC,KAAK,CAAC,KAAK,CAAE,CAAC;oBACzC,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,KAAK,CAAC;oBAC7B,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,EAAE,QAAQ,CAAC,CAAC;iBACzD;gBAEO,WAAW,CAAC,SAAiB;oBACnC,MAAM,QAAQ,qBAAQ,IAAI,CAAC,KAAK,CAAC,KAAK,CAAE,CAAC;oBACzC,QAAQ,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC;oBAC7B,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,EAAE,QAAQ,CAAC,CAAC;iBACzD;gBAEO,QAAQ;oBACd,IAAI,CAAC,IAAI,CAAC,iBAAiB,EAAE;wBAC3B,OAAO;qBACR;oBAED,MAAM,SAAS,GAAG,IAAI,CAAC,iBAAiB,CAAC,KAAK,CAAC;oBAE/C,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,KAAK,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,cAAc,CAAC,SAAS,CAAC,EAAE;wBAChF,OAAO;qBACR;oBAED,MAAM,QAAQ,qBAAQ,IAAI,CAAC,KAAK,CAAC,KAAK,CAAE,CAAC;oBACzC,QAAQ,CAAC,SAAS,CAAC,GAAG,EAAE,CAAC;oBACzB,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,EAAE,QAAQ,CAAC,CAAC;iBACzD;gBAEM,MAAM;oBACX,QACEC,uBAAK,SAAS,EAAC,WAAW;wBACvB,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,GAAG,CAAC,KAAK;4BAC1B,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;4BAC/D,QACEA,cAAC,UAAU,IAAC,GAAG,EAAE,KAAK,CAAC,IAAI,EAAE,UAAU,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,WAAW,EAAE,IAAI,CAAC,WAAW;gCACzFA,cAAC,QAAQ,IAAC,OAAO,EAAE,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,EAAE,KAAK,CAAC,IAAI,CAAC;oCACxDA,cAAC,eAAe,IAAC,IAAI,EAAEmB,YAAuB,GAAI,CACzC,CACA,EACb;yBACH,CAAC;wBACFnB,uBAAK,SAAS,EAAC,gBAAgB;4BAC7BA,0BAAQ,GAAG,EAAE,EAAE,IAAI,IAAI,CAAC,iBAAiB,GAAG,EAAE,IAC3C,eAAe,CAAC,GAAG,CAAC,QAAQ,IAAIA,0BAAQ,GAAG,EAAE,QAAQ,EAAE,KAAK,EAAE,QAAQ,IAAG,QAAQ,CAAU,CAAC,CACtF;4BACTA,cAAC,QAAQ,IAAC,OAAO,EAAE,IAAI,CAAC,QAAQ;gCAC9BA,cAAC,eAAe,IAAC,IAAI,EAAEI,MAAiB,GAAI;uCACnC,CACP,CACF,EACN;iBACH;aACF;;kBCrHY,qBAAqB;gBACzB,KAAK,CAAC,UAA4B;oBACvC,OAAO,UAAU,CAAC,SAAS,KAAK,OAAO,CAAC;iBACzC;gBAEM,GAAG;oBACR,OAAO;wBACL,IAAI,EAAEqB,MAAiB;wBACvB,cAAc,EAAE,SAAS;wBACzB,YAAY,EAAE,CAAC,KAA2B;4BACxC,MAAM,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,KAAK,IAAI,KAAK,CAAC,KAAK,CAAC,IAAI,EAAE,CAAC;4BACxD,OAAO,IAAI,KAAK,IAAI,GAAG,EAAE,GAAG,IAAI,CAAC;yBAClC;qBACF,CAAC;iBACH;aACF;;kBCjBY,oBAAqB,SAAQ1B,SAAqC;gBAC7E,YAAY,KAA2B;oBACrC,KAAK,CAAC,KAAK,CAAC,CAAC;oBACb,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;iBAC1D;gBAEO,gBAAgB,CAAC,CAAyC;oBAChE,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,EAAE,CAAC,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;iBACtE;gBAEM,MAAM;oBACX,OAAOC,4BAAU,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,QAAQ,EAAE,IAAI,CAAC,gBAAgB,EAAE,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,QAAQ,GAAI,CAAC;iBAC9I;aACF;;kBCbY,mBAAoB,SAAQD,SAAqC;gBAC5E,YAAY,KAA2B;oBACrC,KAAK,CAAC,KAAK,CAAC,CAAC;oBACb,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;iBACpD;gBAEO,aAAa,CAAC,CAAsC;oBAC1D,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,EAAE,CAAC,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;iBACtE;gBAEM,MAAM;oBACX,OAAOC,yBAAO,IAAI,EAAC,MAAM,EAAC,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,QAAQ,EAAE,IAAI,CAAC,aAAa,GAAI,CAAC;iBAC9G;aACF;;kBCXY,oBAAoB;gBACxB,KAAK,CAAC,UAA4B;oBACvC,OAAO,UAAU,CAAC,SAAS,KAAK,QAAQ,CAAC;iBAC1C;gBAEM,GAAG,CAAC,UAA4B;oBACrC,IAAI,UAAU,CAAC,QAAQ,KAAK,SAAS,IAAI,UAAU,CAAC,QAAQ,GAAG,CAAC,EAAE;wBAChE,OAAO;4BACL,cAAc,EAAE,oBAAoB;4BACpC,YAAY,EAAE,CAAC,KAA2B,KAAK,KAAK,IAAI,KAAK,CAAC,KAAK;yBACpE,CAAC;qBACH;oBAED,OAAO;wBACL,YAAY,EAAE,mBAAmB;qBAClC,CAAC;iBACH;aACF;;kBCfY,kBAAmB,SAAQD,SAA+D;gBACrG,YAAY,KAA2B;oBACrC,KAAK,CAAC,KAAK,CAAC,CAAC;oBAKP,wBAAmB,GAAG,CAAC,CAAuC;wBACpE,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,EAAE,CAAC,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;qBACtE,CAAC;oBANA,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC;oBAChB,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;iBAChE;gBAMM,iBAAiB;oBACtB,IAAI,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,MAAM,IAAI,EAAE,CAAC;oBAEhD,IAAI,OAAO,MAAM,KAAK,UAAU,EAAE;wBAChC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,MAAM,IAAI,IAAI,CAAC,QAAQ,CAAC,EAAE,MAAM,EAAE,CAAC,CAAC,CAAC;qBACtE;yBAAM;wBACL,IAAI,CAAC,QAAQ,CAAC,EAAE,MAAM,EAAE,CAAC,CAAC;qBAC3B;iBACF;gBAEM,MAAM;oBACX,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,MAAM,EAAE;wBACnD,OAAO,IAAI,CAAC;qBACb;oBAED,MAAM,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,KAAK,KAAKC,0BAAQ,GAAG,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,CAAC,KAAK,IAAG,IAAI,CAAC,IAAI,CAAU,CAAC,CAAC;oBACpH,QACEA,0BAAQ,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,QAAQ,EAAE,IAAI,CAAC,mBAAmB;wBAC1FA,+CAA+B;wBAC9B,OAAO,CACD,EACT;iBACH;aACF;;kBCrCY,sBAAsB;gBAC1B,KAAK,CAAC,UAA4B;oBACvC,OAAO,CAAC,EAAE,UAAU,CAAC,MAAM,IAAI,UAAU,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;iBAC1D;gBAEM,GAAG;oBACR,OAAO;wBACL,YAAY,EAAE,kBAAkB;qBACjC,CAAC;iBACH;aACF;;kBCXY,2BAA2B;gBACtC,YAAmB,eAAsC,EAAS,UAA4B;oBAA3E,oBAAe,GAAf,eAAe,CAAuB;oBAAS,eAAU,GAAV,UAAU,CAAkB;iBAAK;gBAE5F,WAAW;oBAChB,OAAO,IAAI,CAAC,eAAe,IAAI,IAAI,CAAC,eAAe,CAAC,EAAE,IAAI,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,UAAU,CAAC,EAAE,IAAI,EAAE,CAAC;iBACvG;aACF;AAED,YAAO,MAAM,uBAAuB,GAAGF,aAAmB,CAA8B,IAAI,2BAA2B,EAAE,CAAC,CAAC;;;;;kBCQtG,gBAAiB,SAAQC,SAA6D;gBAKzG,YAAY,KAA2B;oBACrC,KAAK,CAAC,KAAK,CAAC,CAAC;oBAEb,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC;oBAEhB,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBACvD,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBAC7D,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBACvD,IAAI,CAAC,yBAAyB,GAAG,IAAI,CAAC,yBAAyB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBAC3E,IAAI,CAAC,mCAAmC,GAAG,IAAI,CAAC,mCAAmC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;iBAChG;gBAEO,yBAAyB;oBAC/B,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,2BAA2B,EAAE;wBAC3C,IAAI,CAAC,WAAW,EAAE,CAAC;qBACpB;iBACF;gBAEM,iBAAiB;oBACtB,IAAI,CAAC,oBAAoB,EAAE,CAAC;oBAC5B,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,SAAS,CAAC,IAAI,CAAC,yBAAyB,CAAC,CAAC;iBACjE;gBAEM,kBAAkB,CAAC,SAA+B;oBACvD,IAAI,SAAS,CAAC,KAAK,KAAK,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE;wBACxC,IAAI,CAAC,oBAAoB,EAAE,CAAC;qBAC7B;iBACF;gBAEM,oBAAoB;oBACzB,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,WAAW,CAAC,IAAI,CAAC,yBAAyB,CAAC,CAAC;iBACnE;gBAEO,oBAAoB;oBAC1B,IAAI,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE;wBACpB,MAAM,2BAA2B,GAAG,IAAI,CAAC,OAAO,CAAC,gBAAgB,EAAE,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,KAAK,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;wBACzG,IAAI,2BAA2B,EAAE;4BAC/B,MAAM,GAAG,GAAG,2BAA2B,CAAC,UAAU,GAAG,GAAG,GAAG,2BAA2B,CAAC,aAAa,CAAC;4BACrG,MAAM,2BAA2B,GAAG,IAAI,CAAC,OAAO,CAAC,0BAA0B,EAAE,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,KAAK,GAAG,CAAC,CAAC;4BACvG,IAAI,2BAA2B,EAAE;gCAC/B,IAAI,CAAC,QAAQ,CAAC,EAAE,2BAA2B,EAAE,2BAA2B,EAAE,CAAC,CAAC;6BAC7E;yBACF;qBACF;iBACF;gBAEO,mCAAmC,CAAC,CAAuC;oBACjF,MAAM,MAAM,GAAG,CAAC,CAAC,aAAa,CAAC,KAAK,CAAC;oBAErC,MAAM,2BAA2B,GAAG,IAAI,CAAC,OAAO,CAAC,0BAA0B,EAAE,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,GAAG,KAAK,MAAM,CAAC,CAAC;oBAE1G,IAAI,CAAC,2BAA2B,EAAE;wBAChC,MAAM,iBAAiB,GAAG,IAAI,CAAC,OAAO,CAAC,sBAAsB,EAAE,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,KAAK,MAAM,CAAC,CAAC;wBAC3F,IAAI,iBAAiB,EAAE;;4BAErB,iBAAiB,CAAC,QAAQ,GAAG,IAAI,CAAC,uBAAuB,CAAC,WAAW,EAAE,CAAC;;4BAExE,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,iBAAiB,CAAC,CAAC;;4BAEpD,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,EAAE,MAAM,CAAC,CAAC;yBACvD;wBACD,OAAO;qBACR;oBAED,MAAM,0BAA0B,GAAG,IAAI,CAAC,KAAK,CAAC,2BAA2B,CAAC;oBAC1E,IAAI,sBAAwD,CAAC;oBAE7D,IAAI,2BAA2B,EAAE;wBAC/B,MAAM,EAAE,GAAG,0BAA0B,IAAI,0BAA0B,CAAC,EAAE;4BACpE,2BAA2B,CAAC,UAAU,CAAC,IAAI,GAAG,GAAG,GAAGmB,MAAI,CAAC,GAAG,EAAE,CAAC;wBAEjE,sBAAsB,GAAG;4BACvB,EAAE;4BACF,QAAQ,EAAE,IAAI,CAAC,uBAAuB,CAAC,WAAW,EAAE;4BACpD,UAAU,EAAE,2BAA2B,CAAC,UAAU;4BAClD,aAAa,EAAE,2BAA2B,CAAC,UAAU,CAAC,IAAI;4BAC1D,OAAO,EAAE,qBAAqB,CAAC,2BAA2B,CAAC,UAAU,CAAC,MAAM,CAAC;yBAC9E,CAAC;qBACH;;oBAGD,MAAM,KAAK,GAAG,sBAAsB,IAAI,sBAAsB,CAAC,EAAE,CAAC;oBAClE,IAAI,IAAI,CAAC,KAAK,CAAC,KAAK,KAAK,KAAK,EAAE;wBAC9B,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;wBAErD,IAAI,sBAAsB,EAAE;;4BAE1B,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,sBAAsB,CAAC,CAAC;yBAC1D;6BAAM,IAAI,0BAA0B,EAAE;;4BAErC,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,0BAA0B,CAAC,CAAC;yBAC9D;qBACF;oBAED,IAAI,CAAC,QAAQ,CAAC,EAAE,2BAA2B,EAAE,sBAAsB,EAAE,2BAA2B,EAAE,CAAC,CAAC;iBACrG;gBAEO,eAAe;oBACrB,IAAI,IAAI,CAAC,KAAK,CAAC,2BAA2B,EAAE;;wBAE1C,MAAM,YAAY,GAAG,IAAI,CAAC,KAAK,CAAC,2BAA2B,CAAC;wBAC5D,YAAY,CAAC,QAAQ,GAAG,EAAE,CAAC;wBAC3B,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,YAAY,CAAC,CAAC;wBAE/C,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,EAAE,SAAS,CAAC,CAAC;wBACzD,IAAI,CAAC,QAAQ,CAAC,EAAE,2BAA2B,EAAE,SAAS,EAAE,2BAA2B,EAAE,SAAS,EAAE,CAAC,CAAC;qBACnG;iBACF;gBAEO,kBAAkB;oBACxB,IAAI,IAAI,CAAC,KAAK,CAAC,2BAA2B,EAAE;;wBAE1C,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,IAAI,CAAC,KAAK,CAAC,2BAA2B,CAAC,CAAC;wBACzE,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,EAAE,SAAS,CAAC,CAAC;wBACzD,IAAI,CAAC,QAAQ,CAAC,EAAE,2BAA2B,EAAE,SAAS,EAAE,2BAA2B,EAAE,SAAS,EAAE,CAAC,CAAC;qBACnG;iBACF;gBAEO,eAAe,CAAC,UAAe;oBACrC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,2BAA2B,EAAE;wBAC3C,OAAO;qBACR;oBACD,MAAM,sBAAsB,qBAA8B,IAAI,CAAC,KAAK,CAAC,2BAA2B,CAAE,CAAC;oBACnG,sBAAsB,CAAC,OAAO,GAAG,UAAU,CAAC;oBAC5C,IAAI,CAAC,QAAQ,CAAC,EAAE,2BAA2B,EAAE,sBAAsB,EAAE,CAAC,CAAC;;oBAGvE,IAAI,CAAC,OAAO,CAAC,mBAAmB,CAAC,sBAAsB,CAAC,CAAC;iBAC1D;gBAEM,wBAAwB;oBAC7B,MAAM,oBAAoB,GAAG,IAAI,CAAC,KAAK,CAAC,2BAA2B,IAAI,IAAI,CAAC,KAAK,CAAC,2BAA2B,CAAC,GAAG,IAAI,EAAE,CAAC;oBAExH,IAAI,IAAI,CAAC,KAAK,CAAC,2BAA2B,EAAE;wBAC1C,QACElB,uBAAK,SAAS,EAAC,gBAAgB;4BAC7BA,cAAC,QAAQ;gCACPA,cAAC,eAAe,IAAC,IAAI,EAAEU,MAAiB,GAAI,CACnC;4BACXV;gCACG,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,WAAW;;gCAAI,IAAI,CAAC,KAAK,CAAC,2BAA2B,CAAC,UAAU,CAAC,WAAW;;gCAAI,IAAI,CAAC,KAAK,CAAC,2BAA2B,CAAC,UAAU;oCAClJ;4BACRA,cAAC,QAAQ,IAAC,OAAO,EAAE,IAAI,CAAC,eAAe;gCACrCA,cAAC,eAAe,IAAC,IAAI,EAAE0B,iBAA4B,GAAI,CAC9C;4BACX1B,cAAC,QAAQ,IAAC,OAAO,EAAE,IAAI,CAAC,kBAAkB;gCACxCA,cAAC,eAAe,IAAC,IAAI,EAAEmB,YAAuB,GAAI,CACzC,CACP,EACN;qBACH;oBAED,MAAM,YAAY,GAA2D,EAAE,CAAC;oBAChF,IAAI,CAAC,OAAO,CAAC,0BAA0B,EAAE;yBACtC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,UAAU,CAAC,IAAI,KAAK,aAAa,IAAI,CAAC,CAAC,UAAU,CAAC,IAAI,KAAK,UAAU,CAAC;yBACpF,OAAO,CAAC,IAAI;wBACX,MAAM,IAAI,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,IAAI,SAAS,CAAC;wBAC/C,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,EAAE;4BACvB,YAAY,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC;yBACzB;wBACD,YAAY,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;qBAC/B,CAAC,CAAC;oBAEL,QACEnB,uBAAK,SAAS,EAAC,iBAAiB;wBAC9BA,cAAC,QAAQ;4BACPA,cAAC,eAAe,IAAC,IAAI,EAAEU,MAAiB,GAAI,CACnC;wBACXV,yBAAO,OAAO,EAAE,IAAI,CAAC,KAAK,CAAC,QAAQ,IAAG,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,WAAW,CAAS;wBAChFA,0BAAQ,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,KAAK,EAAE,oBAAoB,EAAE,QAAQ,EAAE,IAAI,CAAC,mCAAmC;4BAC9GA,0BAAQ,KAAK,EAAC,EAAE,0BAA6B;4BAC7CA,4BAAU,KAAK,EAAC,WAAW,IACxB,IAAI,CAAC,OAAO,CAAC,sBAAsB,EAAE,CAAC,GAAG,CAAC,IAAI,KAC7CA,0BAAQ,GAAG,EAAE,IAAI,CAAC,EAAE,EAAE,KAAK,EAAE,IAAI,CAAC,EAAE;gCAAG,IAAI,CAAC,aAAa;;gCAAI,IAAI,CAAC,UAAU;oCAAW,CACxF,CAAC,CACO;4BACV,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,GAAG,CAAC,IAAI,IACjCA,4BAAU,GAAG,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,IAC7B,YAAY,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,IAAI,IAC1BA,0BAAQ,GAAG,EAAE,IAAI,CAAC,GAAG,EAAE,KAAK,EAAE,IAAI,CAAC,GAAG;gCAAG,IAAI,CAAC,UAAU,CAAC,WAAW;;gCAAI,IAAI,CAAC,UAAU;oCAAW,CACnG,CACQ,CACZ,CACM,CACL,EACN;iBACH;gBAEO,mBAAmB;oBACzB,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,2BAA2B,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,2BAA2B,EAAE;wBACtF,OAAO,IAAI,CAAC;qBACb;oBAED,QACEA,cAAC,uBAAuB,CAAC,QAAQ,IAAC,KAAK,EAAE,IAAI,2BAA2B,CAAC,IAAI,CAAC,KAAK,CAAC,2BAA2B,EAAE,IAAI,CAAC,uBAAuB,CAAC,UAAU,CAAC;wBACvJA,cAAC,UAAU,IAAC,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,2BAA2B,CAAC,OAAO,EAC/D,MAAM,EAAE,IAAI,CAAC,KAAK,CAAC,2BAA2B,CAAC,UAAU,CAAC,MAAM,EAChE,WAAW,EAAE,IAAI,CAAC,eAAe,GAAI,CACN,EACnC;iBACH;gBAEM,MAAM;oBACX,QACEA,uBAAK,SAAS,EAAC,kBAAkB;wBAC/BA,cAAC,uBAAuB,CAAC,QAAQ,QAAE,KAAK,IAAI,CAAC,IAAI,CAAC,uBAAuB,GAAG,KAAK,KAAK,IAAI,CAAoC;wBAC7H,IAAI,CAAC,wBAAwB,EAAE;wBAC/B,IAAI,CAAC,mBAAmB,EAAE,CACvB,EACN;iBACH;;YAtNa,4BAAW,GAAG,iBAAiB,CAAC;;kBCjB3B,iBAAkB,SAAQD,SAA6C;gBACnF,MAAM;oBACX,MAAM,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,sBAAsB,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;oBACvE,OAAO,UAAU,IAAI,UAAU,CAAC,WAAW,IAAI,IAAI,CAAC;iBACrD;aACF;;kBCFY,4BAA4B;gBAChC,KAAK,CAAC,UAA4B;oBACvC,OAAO,UAAU,CAAC,SAAS,KAAK,cAAc,CAAC;iBAChD;gBAEM,GAAG;oBACR,OAAO;wBACL,IAAI,EAAEW,MAAiB;wBACvB,cAAc,EAAE,gBAAgB;wBAChC,YAAY,EAAE,iBAAiB;qBAChC,CAAC;iBACH;aACF;;YCND,MAAM,SAAS,GAA6B;gBAC1C,IAAI,qBAAqB,EAAE;gBAC3B,IAAI,sBAAsB,EAAE;gBAC5B,IAAI,sBAAsB,EAAE;gBAC5B,IAAI,qBAAqB,EAAE;gBAC3B,IAAI,4BAA4B,EAAE;gBAClC,IAAI,uBAAuB,EAAE;gBAC7B,IAAI,oBAAoB,EAAE;gBAC1B,IAAI,sBAAsB,EAAE;gBAC5B,IAAI,wBAAwB,EAAE;aAC/B,CAAC;AAEF,YAAO,MAAM,gBAAgB,GAAG,CAAC,UAA4B,EAAE,OAAkC;gBAC/F,MAAM,QAAQ,GAAG,SAAS,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC,CAAC;gBAC1D,MAAM,MAAM,GAAG,QAAQ,IAAI,QAAQ,CAAC,GAAG,CAAC,UAAU,CAAC,IAAI,EAAE,CAAC;gBAE1D,IAAI,CAAC,UAAU,CAAC,OAAO,EAAE;oBACvB,IAAI,UAAU,CAAC,YAAY,EAAE;wBAC3B,IAAI,OAAO,UAAU,CAAC,YAAY,KAAK,UAAU,EAAE;4BACjD,MAAM,CAAC,YAAY,GAAG,UAAU,CAAC,YAAY,CAAC;yBAC/C;6BAAM,IAAI,UAAU,CAAC,YAAY,CAAC,MAAM,IAAI,UAAU,CAAC,YAAY,CAAC,SAAS,EAAE;4BAC9E,MAAM,UAAU,GAAG,UAAU,CAAC,YAAY,CAAC,MAAM,CAAC;4BAClD,MAAM,aAAa,GAAG,UAAU,CAAC,YAAY,CAAC,SAAS,CAAC;4BACxD,MAAM,CAAC,YAAY,GAAG,CAAC,KAA2B,KAAK,OAAO,CAAC,eAAe,CAAC,EAAE,UAAU,EAAE,aAAa,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC,CAAC;yBAC/H;qBACF;oBAED,IAAI,UAAU,CAAC,SAAS,EAAE;wBACxB,IAAI,OAAO,UAAU,CAAC,SAAS,KAAK,UAAU,EAAE;4BAC9C,MAAM,CAAC,cAAc,GAAG,UAAU,CAAC,SAAS,CAAC;yBAC9C;6BAAM,IAAI,UAAU,CAAC,SAAS,CAAC,MAAM,IAAI,UAAU,CAAC,SAAS,CAAC,SAAS,EAAE;4BACxE,MAAM,UAAU,GAAG,UAAU,CAAC,SAAS,CAAC,MAAM,CAAC;4BAC/C,MAAM,aAAa,GAAG,UAAU,CAAC,SAAS,CAAC,SAAS,CAAC;4BACrD,MAAM,CAAC,cAAc,GAAG,CAAC,KAA2B,KAAK,OAAO,CAAC,eAAe,CAAC,EAAE,UAAU,EAAE,aAAa,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC,CAAC;yBACjI;qBACF;iBACF;gBAED,OAAO,MAAM,CAAC;YAChB,CAAC,CAAC;;;;;YCtCF,IAAI,OAAO,GAAG,CAAC,CAAC;AAchB,kBAAqB,UAAW,SAAQX,SAAmD;gBAIzF,YAAY,KAAuB;oBACjC,KAAK,CAAC,KAAK,CAAC,CAAC;oBAEb,IAAI,CAAC,KAAK,GAAG;wBACX,QAAQ,EAAE,IAAI,IAAI,OAAO,EAAE,CAAC;wBAC5B,cAAc,EAAE,KAAK,CAAC,cAAc;qBACrC,CAAC;oBAEF,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;iBAC5D;gBAEM,iBAAiB;oBACtB,MAAM,aAAa,GAAG,gBAAgB,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,EAAE,IAAI,CAAC,OAAO,CAAC,gBAAiB,CAAQ,CAAC;oBACrG,MAAM,cAAc,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,KAAK,CAAC;;oBAGlE,IAAI,cAAc,EAAE;wBAClB,aAAa,CAAC,cAAc,GAAG,IAAI,CAAC;qBACrC;oBAED,IAAI,CAAC,QAAQ,CAAC,aAAa,EAAE;wBAC3B,IAAI,cAAc,EAAE;4BAClB,QAAQ,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;4BAChC,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,EAAE,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;yBACjE;qBACF,CAAC,CAAC;iBACJ;gBAEO,iBAAiB;oBACvB,IAAI,CAAC,QAAQ,CAAC,KAAK,KAAK,EAAE,cAAc,EAAE,CAAC,KAAK,CAAC,cAAc,EAAE,CAAC,CAAC,CAAC;iBACrE;gBAEO,cAAc;oBACpB,MAAM,KAAK,IACTC,yBAAO,OAAO,EAAE,IAAI,CAAC,KAAK,CAAC,QAAQ;wBAChC,IAAI,CAAC,KAAK,CAAC,QAAQ;wBACnB,IAAI,CAAC,KAAK,CAAC,IAAI,KAAKA,cAAC,QAAQ;4BAACA,cAAC,eAAe,IAAC,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,IAAI,GAAI,CAAW,CAAC;wBACrFA,wBAAM,SAAS,EAAC,aAAa,IAAE,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,WAAW,CAAQ,CAClE,CACT,CAAC;oBAEF,IAAI,KAAK,GAAyB,EAAE,CAAC;oBAErC,IAAI,IAAI,CAAC,KAAK,CAAC,YAAY,EAAE;wBAC3B,KAAK,IACHA,cAAC,aAAa;4BACZA,cAAC,IAAI,CAAC,KAAK,CAAC,YAAY,oBAAK,IAAI,CAAC,KAAK,IAAE,QAAQ,EAAE,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,gBAAiB,EAC7G,gBAAgB,EAAE,IAAI,CAAC,OAAO,CAAC,gBAAgB,EAC/C,0BAA0B,EAAE,IAAI,CAAC,OAAO,CAAC,0BAA0B,EACnE,sBAAsB,EAAE,IAAI,CAAC,OAAO,CAAC,sBAAsB,IAAI,CACnD,CACjB,CAAC;qBACH;oBAED,IAAI,IAAI,CAAC,KAAK,CAAC,cAAc,EAAE;wBAC7B,QACEA,cAAC,QAAQ,IAAC,SAAS,EAAC,aAAa,EAAC,OAAO,EAAE,IAAI,CAAC,iBAAiB;4BAC9D,KAAK;4BACNA,uBAAK,SAAS,EAAC,iBAAiB,IAAE,KAAK,CAAO;4BAC9CA,cAAC,QAAQ;gCACPA,cAAC,eAAe,IAAC,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,cAAc,GAAG2B,WAAsB,GAAGC,YAAuB,GAAI,CAC9F,CACF,EACX;qBACH;oBAED,QACE5B,cAACQ,QAAc;wBACZ,KAAK;wBACL,KAAK,CACS,EACjB;iBACH;gBAEO,iBAAiB;oBACvB,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,cAAc,EAAE;wBAC9B,OAAO,IAAI,CAAC;qBACb;oBACD,QACER,uBAAK,SAAS,EAAC,cAAc,EAAC,MAAM,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,cAAc;wBAC9DA,cAAC,aAAa;4BACZA,cAAC,IAAI,CAAC,KAAK,CAAC,cAAc,oBAAK,IAAI,CAAC,KAAK,IAAE,QAAQ,EAAE,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,OAAO,EAAE,IAAI,CAAC,OAAO,CAAC,gBAAiB,EAC/G,gBAAgB,EAAE,IAAI,CAAC,OAAO,CAAC,gBAAgB,EAC/C,0BAA0B,EAAE,IAAI,CAAC,OAAO,CAAC,0BAA0B,EACnE,sBAAsB,EAAE,IAAI,CAAC,OAAO,CAAC,sBAAsB,IAAI,CACnD,CACZ,EACN;iBACH;gBAEM,MAAM;oBACX,QACEA,uBAAK,SAAS,EAAC,YAAY,qBACR,IAAI,CAAC,KAAK,CAAC,cAAc,GAAG,MAAM,GAAG,OAAO,yBACxC,IAAI,CAAC,KAAK,CAAC,cAAc,GAAG,MAAM,GAAG,OAAO,kBACnD,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,OAAO,GAAG,MAAM,GAAG,OAAO,oBAC9C,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,SAAS;wBAC9C,IAAI,CAAC,cAAc,EAAE;wBACrB,IAAI,CAAC,iBAAiB,EAAE,CACrB,EACN;iBACH;;YAxGa,sBAAW,GAAG,iBAAiB,CAAC;;;;;kBCf3B,UAAW,SAAQD,SAAiC;gBACvE,YAAY,KAAuB;oBACjC,KAAK,CAAC,KAAK,CAAC,CAAC;oBAEb,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;iBAChD;gBAEO,WAAW,CAAC,KAAuB,EAAE,KAAU;oBACrD,MAAM,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,qBAAQ,IAAI,CAAC,KAAK,CAAC,KAAK,IAAK,EAAE,CAAC;oBACjE,QAAQ,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,KAAK,CAAC;oBAC7B,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC;iBAClC;gBAEM,WAAW;oBAChB,QACEC,cAAC,aAAa,IAAC,SAAS,EAAC,OAAO,IAC7B,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,SAAS,EAAE,CAAC,CAAC,CACjC,EAChB;iBACH;gBAEM,MAAM;oBACX,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,MAAM,EAAE;wBACnD,OAAO,IAAI,CAAC;;qBAEb;oBAED,QACEA,uBAAK,SAAS,EAAC,YAAY;wBACxB,IAAI,CAAC,WAAW,EAAE;wBAClB,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,GAAG,CAAC,KAAK;4BAC1B,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;4BAC/D,MAAM,cAAc,GAAG,CAAC,KAAK,CAAC,SAAS,KAAK,cAAc,IAAI,CAAC,KAAK,CAAC,OAAO,KAAK,SAAS,CAAC;4BAC3F,OAAOA,cAAC,UAAU,IAAC,GAAG,EAAE,KAAK,CAAC,IAAI,EAAE,cAAc,EAAE,cAAc,EAAE,UAAU,EAAE,KAAK,EAAE,KAAK,EAAE,KAAK,EAAE,WAAW,EAAE,IAAI,CAAC,WAAW,GAAI,CAAC;yBACxI,CAAC,CACE,EACN;iBACH;aACF;;;;;kBCfoB,UAAW,SAAQD,SAAmD;gBAIzF,YAAY,KAAuB;oBACjC,KAAK,CAAC,KAAK,CAAC,CAAC;oBAEb,MAAM,UAAU,GAAG,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,OAAO,IAAI,EAAE,CAAC,CAAC;oBAE9D,IAAI,CAAC,KAAK,GAAG;wBACX,UAAU;wBACV,SAAS,EAAE,KAAK;wBAChB,iBAAiB,EAAE,KAAK;qBACzB,CAAC;oBAEF,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBACrC,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBACjC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBACnC,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBACnD,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBAC7D,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;iBAChD;gBAEY,iBAAiB;;wBAC5B,MAAM,WAAW,GAAG,IAAI,sBAAsB,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;wBAC7D,MAAM,WAAW,CAAC,IAAI,EAAE,CAAC;wBACzB,IAAI,CAAC,QAAQ,CAAC,EAAE,WAAW,EAAE,CAAC,CAAC;qBAChC;iBAAA;;gBAGO,gBAAgB,CAAC,OAAe;oBACtC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,OAAO,CAAC,KAAK;wBAC7B,IAAI,KAAK,GAAG,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;wBAEhC,IAAI,KAAK,KAAK,SAAS,EAAE;4BACvB,KAAK,GAAG,oBAAoB,CAAC,KAAK,CAAC,CAAC;4BACpC,IAAI,KAAK,KAAK,SAAS,EAAE;gCACvB,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,KAAK,CAAC;6BAC7B;yBACF;qBACF,CAAC,CAAC;oBACH,OAAO,OAAO,CAAC;iBAChB;gBAEO,KAAK;oBACX,MAAM,UAAU,GAAG,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,IAAI,EAAE,CAAC,CAAC;oBACnE,IAAI,CAAC,QAAQ,CAAC,EAAE,UAAU,EAAE,CAAC,CAAC;iBAC/B;gBAEa,IAAI;;wBAChB,IAAI,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE;4BAC1B,MAAM,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC;4BAC9C,OAAO,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;yBACjD;qBACF;iBAAA;gBAEO,MAAM;oBACZ,OAAO,IAAI,CAAC,KAAK,CAAC,QAAQ,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC;iBACrD;gBAEO,aAAa,CAAC,QAAa;oBACjC,IAAI,CAAC,QAAQ,CAAC,EAAE,UAAU,EAAE,QAAQ,EAAE,CAAC,CAAC;iBACzC;gBAEO,kBAAkB;oBACxB,IAAI,CAAC,QAAQ,CAAC,SAAS,KAAK,EAAE,iBAAiB,EAAE,CAAC,SAAS,CAAC,iBAAiB,EAAE,CAAC,CAAC,CAAC;iBACnF;gBAEO,WAAW;oBACjB,IAAI,CAAC,QAAQ,CAAC,SAAS,KAAK,EAAE,SAAS,EAAE,CAAC,SAAS,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;iBACnE;gBAEM,WAAW;oBAChB,QACEC,cAAC,WAAW;wBACVA,cAAC,eAAe,IAAC,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,IAAI,GAAI;;wBAAE,IAAI,CAAC,KAAK,CAAC,KAAK;wBAC5DA,uBAAK,SAAS,EAAC,SAAS;4BACrB,IAAI,CAAC,KAAK,CAAC,sBAAsB,KAChCA,cAAC,QAAQ,IAAC,OAAO,EAAE,IAAI,CAAC,kBAAkB;;gCAC1BA,cAAC,eAAe,IAAC,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,iBAAiB,GAAGwB,KAAkB,GAAGD,UAAuB,GAAI,CAC3G,CACZ;4BACDvB,cAAC,QAAQ,IAAC,OAAO,EAAE,IAAI,CAAC,WAAW;;gCAC3BA,cAAC,eAAe,IAAC,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC,SAAS,GAAGwB,KAAkB,GAAGD,UAAuB,GAAI,CAC3F,CACP,CACM,EACd;iBACH;gBAEM,aAAa;oBAClB,IAAG,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,EAAC;wBACzB,OAAO,IAAI,CAAC;qBACb;oBACD,QACEvB,cAAC,iBAAiB,CAAC,QAAQ,IAAC,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,WAAW;wBACvDA,cAAC,UAAU,IAAC,MAAM,EAAE,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,UAAU,EAAE,WAAW,EAAE,IAAI,CAAC,aAAa,GAAI,CAC7E,EAC7B;iBACH;gBAEM,uBAAuB;oBAC5B,IAAI,IAAI,CAAC,KAAK,CAAC,iBAAiB,EAAE;wBAChC,OAAO,IAAI,CAAC;qBACb;oBACD,OAAOA,6BAAQ,6CAA6C,CAAS,CAAC;iBACvE;gBAEM,gBAAgB;oBACrB,IAAI,IAAI,CAAC,KAAK,CAAC,SAAS,EAAE;wBACxB,OAAO,IAAI,CAAC;qBACb;oBACD,OAAOA,6BAAQ,2BAA2B,CAAS,CAAC;iBACrD;gBAEM,YAAY;oBACjB,QACEA,cAAC,eAAe,IAAC,OAAO,EAAC,MAAM;wBAC5B,IAAI,CAAC,KAAK,CAAC,QAAQ,KAClBA,cAAC,QAAQ,IAAC,OAAO,EAAE,IAAI,CAAC,MAAM;4BAC5BA,cAAC,eAAe,IAAC,IAAI,EAAEK,OAAkB,GAAI;sCACpC,CACZ;wBACA,IAAI,CAAC,KAAK,CAAC,SAAS,KACnBL,cAAC,QAAQ,IAAC,OAAO,EAAE,IAAI,CAAC,KAAK;4BAC3BA,cAAC,eAAe,IAAC,IAAI,EAAE6B,MAAiB,GAAI;qCACnC,CACZ;wBACD7B,cAAC,QAAQ,IAAC,OAAO,EAAE,IAAI,CAAC,IAAI;4BAC1BA,cAAC,eAAe,IAAC,IAAI,EAAE8B,MAAiB,GAAI;oCACnC,CACK,EAClB;iBACH;gBAEM,MAAM;oBACX,MAAM,SAAS,GAAG,aAAa,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC;oBAEvD,QACE9B,cAAC,MAAM,IAAC,SAAS,EAAE,SAAS;wBACzB,IAAI,CAAC,WAAW,EAAE;wBAClB,IAAI,CAAC,aAAa,EAAE;wBACpB,IAAI,CAAC,YAAY,EAAE;wBACnB,IAAI,CAAC,uBAAuB,EAAE;wBAC9B,IAAI,CAAC,gBAAgB,EAAE,CACjB,EACT;iBACH;;YAlJa,sBAAW,GAAG,gBAAgB,CAAC;;;;;kBClB1B,QAAS,SAAQD,SAA+B;gBACnE,YAAY,KAAqB;oBAC/B,KAAK,CAAC,KAAK,CAAC,CAAC;oBAEb,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBACrC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;iBAC1C;gBAEO,MAAM;oBACZ,OAAO,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;iBAC3C;gBAEO,QAAQ;oBACd,OAAO,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;iBAC7C;gBAEM,WAAW;oBAChB,QACEC,cAAC,WAAW;wBACVA,cAAC,eAAe,IAAC,IAAI,EAAE+B,MAAmB,GAAI;;wBAAE,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK;;wBAAI,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI;4BACjF,EACd;iBACH;gBAEM,UAAU;oBACf,QACE/B,cAAC,aAAa,IAAC,SAAS,EAAC,MAAM,IAC5B,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CACP,EAChB;iBACH;gBAEM,YAAY;oBACjB,QACEA,cAAC,eAAe,IAAC,OAAO,EAAC,MAAM;wBAC7BA,cAAC,IAAI,IAAC,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI;4BAC5BA,cAAC,eAAe,IAAC,IAAI,EAAEgC,qBAAkC,GAAI;oCACxD;wBACPhC,cAAC,QAAQ,IAAC,OAAO,EAAE,IAAI,CAAC,MAAM;4BAC5BA,cAAC,eAAe,IAAC,IAAI,EAAEiC,MAAmB,GAAI;oCACrC;wBACXjC,cAAC,QAAQ,IAAC,OAAO,EAAE,IAAI,CAAC,QAAQ;4BAC9BA,cAAC,eAAe,IAAC,IAAI,EAAEmB,YAAuB,GAAI;sCACzC,CACK,EAClB;iBACH;gBAEM,MAAM;oBACX,QACEnB,cAAC,MAAM,IAAC,SAAS,EAAC,UAAU;wBACzB,IAAI,CAAC,WAAW,EAAE;wBAElB,IAAI,CAAC,YAAY,EAAE,CACb,EACT;iBACH;aACF;;YC1EM,MAAM,iBAAiB,GAAuB,CAAC;oBACpD,WAAW,EAAE,MAAM;oBACnB,YAAY,EAAE,GAAG;oBACjB,WAAW,EAAE,MAAM;oBACnB,IAAI,EAAE,MAAM;oBACZ,SAAS,EAAE,QAAQ;iBACpB,EAAE;oBACD,WAAW,EAAE,OAAO;oBACpB,YAAY,EAAE,UAAU;oBACxB,WAAW,EAAE,OAAO;oBACpB,IAAI,EAAE,OAAO;oBACb,SAAS,EAAE,QAAQ;iBACpB,EAAE;oBACD,WAAW,EAAE,SAAS;oBACtB,WAAW,EAAE,SAAS;oBACtB,IAAI,EAAE,gBAAgB;oBACtB,SAAS,EAAE,cAAc;iBAC1B,EAAE;oBACD,WAAW,EAAE,YAAY;oBACzB,WAAW,EAAE,YAAY;oBACzB,IAAI,EAAE,OAAO;oBACb,SAAS,EAAE,OAAO;iBACnB,CAAC,CAAC;;;;;kBCEkB,eAAgB,SAAQD,SAA6C;gBAIxF,YAAY,KAAU;oBACpB,KAAK,CAAC,KAAK,CAAC,CAAC;oBAEb,IAAI,CAAC,KAAK,GAAG;wBACX,OAAO,EAAE,IAAI;wBACb,KAAK,EAAE,EAAE;wBACT,qBAAqB,EAAE,KAAK;qBAC7B,CAAC;oBAEF,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBAC3C,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBACzC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBAC7C,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBACrD,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBAC7D,IAAI,CAAC,iBAAiB,GAAG,IAAI,CAAC,iBAAiB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;iBAC5D;gBAEM,iBAAiB;oBACtB,IAAI,CAAC,SAAS,EAAE,CAAC;iBAClB;gBAEO,SAAS;oBACf,IAAI,CAAC,QAAQ,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC;oBAEjC,OAAO,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,KAAK,CAAC,MAAM,EAAE;yBACxC,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,QAAQ,CAAC,EAAE,KAAK,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC,CAAC;yBACvD,KAAK,CAAC,GAAG,IAAI,IAAI,CAAC,QAAQ,CAAC,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC;iBACpD;gBAEO,QAAQ,CAAC,IAAqB;oBACpC,OAAO,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,KAAK,CAAC,cAAc,CAAC,IAAI,CAAC;yBACpD,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC;yBACzB,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC;yBACpB,KAAK,CAAC,GAAG,IAAI,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;iBACnC;gBAEO,UAAU,CAAC,IAAqB;oBACtC,OAAO,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC;yBAC/C,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC;yBACzB,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC;yBACpB,KAAK,CAAC,GAAG,IAAI,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;iBACnC;gBAEO,kBAAkB,CAAC,IAAqB;oBAC9C,IAAI,CAAC,QAAQ,CAAC,EAAE,qBAAqB,EAAE,IAAI,EAAE,YAAY,EAAE,IAAI,EAAE,CAAC,CAAC;iBACpE;gBAEO,iBAAiB;oBACvB,IAAI,CAAC,QAAQ,CAAC,EAAE,qBAAqB,EAAE,IAAI,EAAE,YAAY,EAAE,SAAS,EAAE,CAAC,CAAC;iBACzE;gBAEO,cAAc;oBACpB,IAAI,CAAC,QAAQ,CAAC,EAAE,qBAAqB,EAAE,KAAK,EAAE,YAAY,EAAE,SAAS,EAAE,CAAC,CAAC;iBAC1E;gBAEO,eAAe;oBACrB,IAAI,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE;wBACtB,OAAOC,cAAC,YAAY;4BAACA,cAAC,aAAa,OAAG,CAAe,CAAC;qBACvD;oBAED,QACEA,cAAC,YAAY,QACV,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,IAAI,EAAE,KAAK,KAChCA,cAAC,QAAQ,IAAC,GAAG,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,CAAC,kBAAkB,EAC/D,QAAQ,EAAE,OAAO,CAAC,IAAI,CAAC,UAAU,EAAE,SAAS,CAAC,GAAI,CACpD,CACY,EACf;iBACH;gBAEO,iBAAiB;oBACvB,QACEA,cAAC,YAAY;wBACXA,cAAC,MAAM,IAAC,SAAS,EAAC,aAAa;4BAC7BA,cAAC,QAAQ,IAAC,SAAS,EAAC,WAAW,EAAC,OAAO,EAAE,IAAI,CAAC,iBAAiB;gCAC7DA,cAAC,eAAe,IAAC,IAAI,EAAEI,MAAiB,GAAI;4CACnC,CACJ,CACI,EACf;iBACH;gBAEO,uBAAuB;oBAC7B,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,qBAAqB,EAAE;wBACrC,OAAO,IAAI,CAAC;qBACb;oBAED,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC;oBACrC,MAAM,KAAK,GAAG,IAAI,GAAG,WAAW,GAAG,UAAU,CAAC;oBAE9C,QACEJ,cAAC,SAAS;wBACRA,cAAC,uBAAuB,CAAC,QAAQ,IAAC,KAAK,EAAE,IAAI,2BAA2B,CAAC,SAAS,EAAE,IAAI,CAAC;4BACvFA,cAAC,UAAU,IAAC,IAAI,EAAE+B,MAAmB,EAAE,sBAAsB,EAAE,IAAI,EACjE,KAAK,EAAE,KAAK,EAAE,MAAM,EAAE,iBAAiB,EACvC,MAAM,EAAE,IAAI,CAAC,QAAQ,EAAE,QAAQ,EAAE,IAAI,CAAC,cAAc,EAAE,OAAO,EAAE,IAAI,IAAI,EAAE,GAAI,CAC9C,CACzB,EACZ;iBACH;gBAEM,MAAM;oBACX,QACE/B,2BAAS,SAAS,EAAC,iBAAiB;wBACjC,IAAI,CAAC,iBAAiB,EAAE;wBACxB,IAAI,CAAC,eAAe,EAAE;wBACtB,IAAI,CAAC,uBAAuB,EAAE,CACvB,EACV;iBACH;;YAhHa,2BAAW,GAAG,gBAAgB,CAAC;;;;;kBClB1B,WAAY,SAAQD,SAAkC;gBAClE,MAAM;oBACX,OAAOC,cAAC,IAAI,IAAC,SAAS,EAAC,aAAa,EAAC,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,EAAE,EAAE,IAAI,EAAC,QAAQ,IAAE,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAQ,CAAC;iBACpG;aACF;;;;;kBCAoB,eAAgB,SAAQD,SAAsC;gBACjF,YAAY,KAA4B;oBACtC,KAAK,CAAC,KAAK,CAAC,CAAC;oBAEb,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;iBAChD;gBAEO,WAAW;oBACjB,OAAO,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;iBACrD;gBAEM,MAAM;oBACX,QACEC,cAAC,QAAQ,IAAC,SAAS,EAAC,+BAA+B,EAAC,OAAO,EAAE,IAAI,CAAC,WAAW;wBAC3EA,cAAC,eAAe,IAAC,IAAI,EAAEkC,MAAiB,GAAI;;wBAAE,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,WAAW;wBAC5ElC,cAAC,QAAQ;4BACPA,cAAC,eAAe,IAAC,IAAI,EAAE4B,YAAuB,GAAI,CACzC,CACF,EACX;iBACH;aACF;;;;;kBClBoB,gBAAiB,SAAQ7B,SAAuC;gBAC5E,MAAM;oBACX,QACEC,cAAC,MAAM,IAAC,SAAS,EAAC,kBAAkB;wBAClCA,cAAC,WAAW;4BACVA,cAAC,eAAe,IAAC,IAAI,EAAEU,MAAiB,GAAI;;4BAAE,IAAI,CAAC,KAAK,CAAC,UAAU,CACvD;wBACb,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,IAC3BV,cAAC,eAAe,IAAC,GAAG,EAAE,IAAI,CAAC,IAAI,EAAE,OAAO,EAAE,IAAI,EAAE,aAAa,EAAE,IAAI,CAAC,KAAK,CAAC,aAAa,GAAI,CAC5F,CACM,EACT;iBACH;aACF;;;;;kBCCoB,cAAe,SAAQD,SAA2D;gBAMrG,YAAY,KAAU;oBACpB,KAAK,CAAC,KAAK,CAAC,CAAC;oBAEb,IAAI,CAAC,KAAK,GAAG;wBACX,GAAG,EAAE,EAAE;wBACP,OAAO,EAAE,IAAI;wBACb,SAAS,EAAE,IAAI;wBACf,QAAQ,EAAE,IAAI;wBACd,WAAW,EAAE,IAAI;wBACjB,SAAS,EAAE,IAAI;qBAChB,CAAC;oBAEF,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBACnC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBACvC,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBAC/C,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBAC7C,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBACnD,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBAC/C,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBAC/C,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;iBACtD;gBAEO,WAAW;oBACjB,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC;iBACtC;gBAEO,cAAc;oBACpB,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,IAAI,CAAC,cAAc,EAAE,CAAC;iBACzC;gBAEO,KAAK;oBACX,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE,CAAC;iBACtB;gBAEM,iBAAiB;oBACtB,IAAI,CAAC,OAAO,EAAE,CAAC;iBAChB;;;;;;gBAQO,OAAO;oBACb,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,UAAU,GAAG,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC;oBAC7E,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,aAAa,CAAC,MAAM,CAAC;yBAC5C,IAAI,CAAC,GAAG,IAAI,IAAI,CAAC,QAAQ,CAAC,EAAE,GAAG,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC;iBACxD;gBAEO,WAAW;oBACjB,IAAI,CAAC,QAAQ,CAAC,SAAS,KAAK,EAAE,SAAS,EAAE,CAAC,SAAS,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;iBACnE;gBAEO,UAAU;oBAChB,IAAI,CAAC,QAAQ,CAAC,SAAS,KAAK,EAAE,QAAQ,EAAE,CAAC,SAAS,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;iBACjE;gBAEO,aAAa;oBACnB,IAAI,CAAC,QAAQ,CAAC,SAAS,KAAK,EAAE,WAAW,EAAE,CAAC,SAAS,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC;iBACvE;gBAEO,WAAW;oBACjB,IAAI,CAAC,QAAQ,CAAC,SAAS,KAAK,EAAE,SAAS,EAAE,CAAC,SAAS,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;iBACnE;gBAEO,oBAAoB;oBAC1B,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,QAAQ,KAAK,OAAO,CAAC,CAAC,MAAM,CAAC;oBACxE,MAAM,WAAW,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,QAAQ,KAAK,aAAa,CAAC,CAAC,MAAM,CAAC;oBACpF,MAAM,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,QAAQ,KAAK,SAAS,CAAC,CAAC,MAAM,CAAC;oBAC5E,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,QAAQ,KAAK,OAAO,CAAC,CAAC,MAAM,CAAC;oBAExE,QACEC;;wBAEEA,wBAAM,SAAS,EAAE,kCAAkC,IAAI,IAAI,CAAC,KAAK,CAAC,SAAS,GAAG,QAAQ,GAAG,EAAE,CAAC,EAAE,OAAO,EAAE,IAAI,CAAC,WAAW;4BAAG,KAAK;qCAAc;wBAC7IA,wBAAM,SAAS,EAAE,iCAAiC,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,GAAG,QAAQ,GAAG,EAAE,CAAC,EAAE,OAAO,EAAE,IAAI,CAAC,UAAU;4BAAG,WAAW;oCAAa;wBAC/IA,wBAAM,SAAS,EAAE,oCAAoC,IAAI,IAAI,CAAC,KAAK,CAAC,WAAW,GAAG,QAAQ,GAAG,EAAE,CAAC,EAAE,OAAO,EAAE,IAAI,CAAC,aAAa;4BAAG,OAAO;uCAAgB;wBACvJA,wBAAM,SAAS,EAAE,kCAAkC,IAAI,IAAI,CAAC,KAAK,CAAC,SAAS,GAAG,QAAQ,GAAG,EAAE,CAAC,EAAE,OAAO,EAAE,IAAI,CAAC,WAAW;4BAAG,KAAK;qCAAc,CACzI,EACN;iBACH;gBAEO,aAAa;oBACnB,QACEA,cAAC,eAAe,IAAC,OAAO,EAAC,MAAM;wBAC7BA,cAAC,QAAQ,IAAC,OAAO,EAAE,IAAI,CAAC,KAAK;4BAAEA,cAAC,eAAe,IAAC,IAAI,EAAEK,OAAkB,GAAI;qCAAiB;wBAC7FL,cAAC,QAAQ,IAAC,OAAO,EAAE,IAAI,CAAC,WAAW;4BAAEA,cAAC,eAAe,IAAC,IAAI,EAAEmC,SAAoB,GAAI;mCAAe;wBACnGnC,cAAC,QAAQ,IAAC,OAAO,EAAE,IAAI,CAAC,cAAc;4BAAEA,cAAC,eAAe,IAAC,IAAI,EAAE2B,WAAsB,GAAI;sCAAkB,CAC3F,EAClB;iBACH;gBAEO,aAAa;oBACnB,IAAI,IAAI,CAAC,KAAK,CAAC,OAAO,EAAE;wBACtB,OAAO3B,cAAC,aAAa;4BAACA,cAAC,OAAO,OAAG,CAAgB,CAAC;qBACnD;oBACD,QACEA,cAACQ,QAAc;wBACbR,cAAC,aAAa,QACX,IAAI,CAAC,oBAAoB,EAAE,CACd;wBAChBA,cAAC,aAAa,QACX,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,KAAK,KAC3BA,uBAAK,SAAS,EAAC,UAAU,mBAAgB,KAAK,CAAC,QAAQ;4BACrDA,uBAAK,SAAS,EAAC,WAAW,IAAE,MAAM,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,WAAW,EAAE,CAAO;4BACxEA,uBAAK,SAAS,EAAC,SAAS,IAAE,KAAK,CAAC,OAAO,CAAO;4BAC7C,KAAK,CAAC,IAAI,KAAKA,uBAAK,SAAS,EAAC,MAAM,IAAE,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,CAAO,CAAC,CACrE,CACP,CAAC,CACY,CACD,EACjB;iBACH;gBAED,IAAY,aAAa;oBACvB,MAAM,MAAM,GAAG,CAAC,IAAe;wBAC7B,OAAO,IAAI,CAAC,QAAQ,KAAK,OAAO,IAAI,IAAI,CAAC,KAAK,CAAC,SAAS;4BACtD,IAAI,CAAC,QAAQ,KAAK,aAAa,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ;4BACtD,IAAI,CAAC,QAAQ,KAAK,SAAS,IAAI,IAAI,CAAC,KAAK,CAAC,WAAW;4BACrD,IAAI,CAAC,QAAQ,KAAK,OAAO,IAAI,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC;qBACrD,CAAC;oBACF,OAAO,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;iBACtC;gBAEM,MAAM;oBACX,QACEA,cAAC,MAAM,IAAC,SAAS,EAAC,gBAAgB,EAAC,GAAG,EAAE,EAAE,IAAI,IAAI,CAAC,IAAI,GAAG,EAAG;wBAC3DA,cAAC,WAAW;4BACVA,cAAC,eAAe,IAAC,IAAI,EAAE+B,MAAmB,GAAI;;4BAAU,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,WAAW,CAC1E;wBACb,IAAI,CAAC,aAAa,EAAE;wBACpB,IAAI,CAAC,aAAa,EAAE,CACd,EACT;iBACH;;YA5Ia,0BAAW,GAAG,gBAAgB,CAAC;;;;;kBCC1B,kBAAmB,SAAQhC,SAA6C;gBAI3F,YAAY,KAAU;oBACpB,KAAK,CAAC,KAAK,CAAC,CAAC;oBAEb,IAAI,CAAC,KAAK,GAAG;wBACX,eAAe,EAAE,IAAI;wBACrB,qBAAqB,EAAE,KAAK;wBAC5B,QAAQ,EAAE,EAAE;wBACZ,WAAW,EAAE,KAAK;wBAClB,OAAO,EAAE,KAAK;wBACd,WAAW,EAAE,KAAK;wBAClB,eAAe,EAAE,SAAS;wBAC1B,sBAAsB,EAAE,SAAS;qBAClC,CAAC;oBAEF,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBAC/C,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBACjD,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBACvC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBACzC,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBAC/C,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBACjD,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBAC/C,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBAC/C,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;iBACpD;gBAEM,iBAAiB;oBACtB,IAAI,CAAC,YAAY,EAAE,CAAC;iBACrB;gBAEM,YAAY;oBACjB,OAAO,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,QAAQ,CAAC,cAAc,EAAE;yBACnD,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,EAAE,QAAQ,EAAE,eAAe,EAAE,KAAK,EAAE,CAAC,CAAC;yBACrE,KAAK,CAAC,GAAG,IAAI,IAAI,CAAC,QAAQ,CAAC,EAAE,eAAe,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC;iBAC5D;gBAEO,WAAW,CAAC,OAA+B;oBACjD,IAAI,CAAC,QAAQ,CAAC,EAAE,WAAW,EAAE,IAAI,EAAE,eAAe,EAAE,OAAO,EAAE,CAAC,CAAC;iBAChE;gBAEO,OAAO;oBACb,IAAI,CAAC,QAAQ,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC,CAAC;iBAClC;gBAEO,WAAW;oBACjB,IAAI,CAAC,QAAQ,CAAC,EAAE,WAAW,EAAE,IAAI,EAAE,sBAAsB,EAAE,SAAS,EAAE,EAAE,IAAI,CAAC,WAAW,CAAC,CAAC;iBAC3F;gBAEO,YAAY;oBAClB,IAAI,CAAC,QAAQ,CAAC,EAAE,WAAW,EAAE,KAAK,EAAE,eAAe,EAAE,SAAS,EAAE,CAAC,CAAC;iBACnE;gBAEO,YAAY;oBAClB,IAAI,CAAC,QAAQ,CAAC,EAAE,WAAW,EAAE,KAAK,EAAE,WAAW,EAAE,IAAI,EAAE,CAAC,CAAC;iBAC1D;gBAEO,QAAQ;oBACd,IAAI,CAAC,QAAQ,CAAC,EAAE,OAAO,EAAE,KAAK,EAAE,WAAW,EAAE,IAAI,EAAE,CAAC,CAAC;iBACtD;gBAEO,WAAW;oBACjB,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,eAAe,EAAE;wBAC/B,OAAO;qBACR;oBAED,IAAI,CAAC,QAAQ,CAAC,EAAE,qBAAqB,EAAE,IAAI,EAAE,CAAC,CAAC;oBAE/C,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,QAAQ,CAAC,iBAAiB,CAAC,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC,UAAU,EAAE,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC,IAAI,CAAC;yBACrH,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,QAAQ,CAAC,EAAE,sBAAsB,EAAE,OAAO,EAAE,qBAAqB,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC;iBACtG;gBAEO,aAAa,CAAC,UAAe;oBACnC,IAAI,CAAC,QAAQ,CAAC,EAAE,sBAAsB,EAAE,UAAU,EAAE,CAAC,CAAA;iBACtD;gBAEO,WAAW,CAAC,UAAe;oBACjC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,eAAe,EAAE;wBAC/B,OAAO;qBACR;oBAED,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,QAAQ,CAAC,iBAAiB,CAAC,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC,UAAU,EAAE,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC,IAAI,EAAE,UAAU,CAAC;yBACjI,IAAI,CAAC,MAAM,IAAI,CAAC,YAAY,EAAE,CAAC,CAAC;iBACpC;gBAEO,0BAA0B;oBAChC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,eAAe,EAAE;wBAC1D,OAAO,IAAI,CAAC;qBACb;oBACD,IAAI,IAAI,CAAC,KAAK,CAAC,qBAAqB,EAAE;wBACpC,OAAOC,cAAC,SAAS;4BAACA,cAAC,aAAa,OAAG,CAAY,CAAC;qBACjD;oBAED,MAAM,KAAK,GAAG,cAAc,GAAG,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC,WAAW,CAAC;oBAEtE,QACEA,cAAC,SAAS;wBACRA,cAAC,UAAU,IAAC,IAAI,EAAEY,KAAgB,EAAE,SAAS,EAAE,IAAI,EACjD,KAAK,EAAE,KAAK,EAAE,MAAM,EAAE,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC,MAAM,IAAI,EAAE,EAC7D,OAAO,EAAE,IAAI,CAAC,KAAK,CAAC,sBAAsB,EAC1C,MAAM,EAAE,IAAI,CAAC,WAAW,EAAE,QAAQ,EAAE,IAAI,CAAC,YAAY,GACrD,CACQ,EACZ;iBACH;gBAEO,sBAAsB;oBAC5B,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,eAAe,EAAE;wBACtD,OAAO,IAAI,CAAC;qBACb;oBAED,QACEZ,cAAC,SAAS;wBACRA,cAAC,cAAc,IAAC,OAAO,EAAE,IAAI,CAAC,KAAK,CAAC,eAAe,EAAE,OAAO,EAAE,IAAI,CAAC,QAAQ,GAAI,CACrE,EACZ;iBACH;gBAEO,0BAA0B;oBAChC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,eAAe,EAAE;wBAC1D,OAAO,IAAI,CAAC;qBACb;oBAED,MAAM,UAAU,GAAG,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC,MAAM,IAAI,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC,MAAM,CAAC,MAAM,CAAC;oBAEjG,QACEA,cAAC,SAAS;wBACRA,cAAC,MAAM,IAAC,SAAS,EAAC,oBAAoB;4BACpCA,cAAC,WAAW;gCACVA,cAAC,eAAe,IAAC,IAAI,EAAEkC,MAAiB,GAAI;;gCAAE,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC,WAAW,CACxE;4BACdlC,cAAC,aAAa,QACX,IAAI,CAAC,KAAK,CAAC,eAAe,CAAC,WAAW,CACzB;4BAChBA,cAAC,eAAe,IAAC,OAAO,EAAC,MAAM;gCAC7BA,cAAC,QAAQ,IAAC,OAAO,EAAE,IAAI,CAAC,YAAY;oCAClCA,cAAC,eAAe,IAAC,IAAI,EAAEK,OAAkB,GAAI;6CACpC;gCACXL,cAAC,QAAQ,IAAC,OAAO,EAAE,IAAI,CAAC,OAAO;oCAC7BA,cAAC,eAAe,IAAC,IAAI,EAAE+B,MAAmB,GAAI;2CACrC;gCACX/B,cAAC,QAAQ,IAAC,OAAO,EAAE,IAAI,CAAC,WAAW,EAAE,QAAQ,EAAE,CAAC,UAAU;oCACxDA,cAAC,eAAe,IAAC,IAAI,EAAEY,KAAgB,GAAI;+CAClC,CACK,CACX,CACC,EACZ;iBACH;gBAEO,mBAAmB;oBACzB,IAAI,IAAI,CAAC,KAAK,CAAC,eAAe,EAAE;wBAC9B,OAAOZ,cAAC,OAAO,IAAC,MAAM,EAAE,IAAI,GAAI,CAAC;qBAClC;oBAED,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,UAAU,CAAC,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC;oBAE7E,MAAM,UAAU,GAAG,MAAM,CAAC,GAAG,CAAC,UAAU;wBACtC,MAAM,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,IAAI,CAAC,CAAC,UAAU,KAAK,UAAU,CAAC,CAAC;wBAC9E,QACEA,cAAC,gBAAgB,IAAC,GAAG,EAAE,UAAU,EAAE,UAAU,EAAE,UAAU,EAAE,QAAQ,EAAE,QAAQ,EAC3E,aAAa,EAAE,IAAI,CAAC,WAAW,GAAI,EACrC;qBACH,CAAC,CAAC;oBAEH,OAAOA,cAAC,YAAY,QAAE,UAAU,CAAgB,CAAC;iBAClD;gBAEM,MAAM;oBACX,QACEA,2BAAS,SAAS,EAAC,oBAAoB;wBACpC,IAAI,CAAC,mBAAmB,EAAE;wBAC1B,IAAI,CAAC,0BAA0B,EAAE;wBACjC,IAAI,CAAC,sBAAsB,EAAE;wBAC7B,IAAI,CAAC,0BAA0B,EAAE,CAC1B,EACV;iBACH;;YAlLa,8BAAW,GAAG,gBAAgB,CAAC;YAqL/C,SAAS,UAAU,CAAC,KAAU,EAAE,KAAa,EAAE,IAAW;gBACxD,OAAO,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,KAAK,CAAC;YACvC,CAAC;;kBCjNY,gBAAiB,SAAQD,SAA6D;gBACjG,YAAY,KAA2B;oBACrC,KAAK,CAAC,KAAK,CAAC,CAAC;oBAWP,wBAAmB,GAAG,CAAC,CAAuC;wBACpE,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,UAAU,EAAE,CAAC,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;qBACtE,CAAC;oBAXA,IAAI,CAAC,KAAK,GAAG,EAAE,KAAK,EAAE,EAAE,EAAE,CAAC;oBAE3B,IAAI,CAAC,mBAAmB,GAAG,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;iBAChE;gBAEM,iBAAiB;oBACtB,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,QAAQ,CAAC,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC;iBACpF;gBAMM,MAAM;oBACX,MAAM,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,GAAG,CAAC,IAAI,IAAIC,0BAAQ,GAAG,EAAE,IAAI,CAAC,EAAE,EAAE,KAAK,EAAE,IAAI,CAAC,IAAI;wBAAG,IAAI,CAAC,KAAK;;wBAAI,IAAI,CAAC,IAAI;4BAAW,CAAC,CAAC;oBAC1H,QACEA,0BAAQ,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,QAAQ,EAAE,IAAI,CAAC,mBAAmB;wBAC1FA,+CAA+B;wBAC9B,OAAO,CACD,EACT;iBACH;aACF;;YCtBD,MAAM,aAAa,GAAG,cAAc,CAAC,EAAE,CAAC,KAAK,EAAE,CAAC;YAChD,MAAM,SAAS,GAAgB,EAAE,CAAC;YAElC,aAAa,CAAC,OAAO,CAAC,QAAQ;gBAC5B,SAAS,CAAC,IAAI,CAAC;oBACb,IAAI,EAAE,MAAM,GAAG,MAAM,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC,MAAM,CAAC,GAAG,CAAC,GAAG,IAAI,GAAG,QAAQ,CAAC,OAAO,CAAC,GAAG,EAAE,GAAG,CAAC;oBAClF,KAAK,EAAE,QAAQ;iBAChB,CAAC,CAAC;YACL,CAAC,CAAC,CAAC;YAEH,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,aAAa,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC;YAEvD,MAAM,mBAAmB,GAAG,CAAC,KAAa;gBACxC,KAAK,GAAG,KAAK,IAAI,CAAC,CAAC;gBACnB,IAAI,IAAI,GAAQ,IAAI,CAAC,KAAK,CAAC,KAAK,GAAG,EAAE,CAAC,CAAC;gBACvC,IAAI,OAAO,GAAQ,KAAK,GAAG,EAAE,CAAC;gBAE9B,IAAI,IAAI,GAAG,EAAE,EAAE;oBACb,IAAI,GAAG,GAAG,GAAG,IAAI,CAAC;iBACnB;gBACD,IAAI,OAAO,GAAG,EAAE,EAAE;oBAChB,OAAO,GAAG,GAAG,GAAG,OAAO,CAAC;iBACzB;gBAED,OAAOA;oBAAO,IAAI;;oBAAG,OAAO,CAAQ,CAAC;YACvC,CAAC,CAAC;AAEF,YAAO,MAAM,oBAAoB,GAAuB,CAAC;oBACvD,WAAW,EAAE,+CAA+C;oBAC5D,WAAW,EAAE,UAAU;oBACvB,IAAI,EAAE,MAAM;oBACZ,SAAS,EAAE,QAAQ;oBACnB,MAAM,EAAE;wBACN,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,EAAE,QAAQ,EAAE;wBAC/B,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE;wBAChC,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,EAAE,QAAQ,EAAE;wBAC/B,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE;wBAChC,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE;wBAChC,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,EAAE,SAAS,EAAE;qBACjC;;;;;;iBAMF,EAAE;oBACD,WAAW,EAAE,UAAU;oBACvB,WAAW,EAAE,UAAU;oBACvB,IAAI,EAAE,UAAU;oBAChB,SAAS,EAAE,QAAQ;oBACnB,MAAM,EAAE,CAAC,GAAG,SAAS,CAAC;iBACvB,EAAE;oBACD,WAAW,EAAE,yBAAyB;oBACtC,WAAW,EAAE,cAAc;oBAC3B,IAAI,EAAE,aAAa;oBACnB,SAAS,EAAE,QAAQ;oBACnB,YAAY,EAAE,gBAAgB;iBAC/B,EAAE;oBACD,WAAW,EAAE,aAAa;oBAC1B,WAAW,EAAE,aAAa;oBAC1B,IAAI,EAAE,aAAa;oBACnB,OAAO,EAAE,IAAI;oBACb,SAAS,EAAE,QAAQ;oBACnB,MAAM,EAAE,CAAC;4BACP,WAAW,EAAE,MAAM;4BACnB,WAAW,EAAE,MAAM;4BACnB,IAAI,EAAE,MAAM;4BACZ,SAAS,EAAE,QAAQ;4BACnB,QAAQ,EAAE,CAAC;4BACX,QAAQ,EAAE,IAAI;4BACd,QAAQ,EAAE,EAAE;4BACZ,YAAY,EAAE,GAAG;4BACjB,YAAY,EAAE,KAAK,IAAI,mBAAmB,CAAC,KAAK,CAAC,KAAK,CAAC;yBACxD,EAAE;4BACD,WAAW,EAAE,IAAI;4BACjB,WAAW,EAAE,IAAI;4BACjB,IAAI,EAAE,IAAI;4BACV,SAAS,EAAE,QAAQ;4BACnB,QAAQ,EAAE,CAAC;4BACX,QAAQ,EAAE,IAAI;4BACd,QAAQ,EAAE,EAAE;4BACZ,YAAY,EAAE,GAAG;4BACjB,YAAY,EAAE,KAAK,IAAI,mBAAmB,CAAC,KAAK,CAAC,KAAK,CAAC;yBACxD,EAAE;4BACD,WAAW,EAAE,iBAAiB;4BAC9B,WAAW,EAAE,iBAAiB;4BAC9B,IAAI,EAAE,UAAU;4BAChB,SAAS,EAAE,QAAQ;4BACnB,QAAQ,EAAE,CAAC;4BACX,QAAQ,EAAE,GAAG;4BACb,QAAQ,EAAE,CAAC;4BACX,YAAY,EAAE,EAAE;yBACjB,CAAC;oBACF,YAAY,EAAE,CAAC,KAA2B;wBACxC,MAAM,OAAO,GAAG,KAAK,CAAC,KAAmC,CAAC;wBAC1D,OAAOA;4BAAO,mBAAmB,CAAC,OAAO,CAAC,IAAI,CAAC;;4BAAK,mBAAmB,CAAC,OAAO,CAAC,EAAE,CAAC;;4BAAS,OAAO,CAAC,QAAQ;mCAAY,CAAC;qBAC1H;iBACF,CAAC,CAAC;;;;;kBC5FkB,mBAAoB,SAAQD,SAA6C;gBAI5F,YAAY,KAAU;oBACpB,KAAK,CAAC,KAAK,CAAC,CAAC;oBAEb,IAAI,CAAC,KAAK,GAAG,EAAE,OAAO,EAAE,IAAI,EAAE,CAAC;oBAE/B,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBACjD,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;iBAClD;gBAEM,iBAAiB;oBACtB,IAAI,CAAC,YAAY,EAAE,CAAC;iBACrB;gBAEM,YAAY;oBACjB,OAAO,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,WAAW,CAAC,WAAW,EAAE;yBACnD,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,QAAQ,CAAC,EAAE,QAAQ,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC,CAAC;yBAC7D,KAAK,EAAE,CAAC;iBACZ;gBAEM,YAAY,CAAC,WAA4B;oBAC9C,OAAO,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,WAAW,CAAC,WAAW,CAAC,WAAW,CAAC;yBAC9D,KAAK,EAAE,CAAC;iBACZ;gBAEM,MAAM;oBACX,QACEC,2BAAS,SAAS,EAAC,qBAAqB;wBACrC,IAAI,CAAC,KAAK,CAAC,OAAO,KACjBA,cAAC,YAAY;4BACXA,cAAC,aAAa,OAAG,CACJ,CAChB;wBACA,IAAI,CAAC,KAAK,CAAC,QAAQ,KAClBA,cAAC,YAAY;4BACXA,cAAC,UAAU,IAAC,OAAO,EAAE,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,MAAM,EAAE,IAAI,CAAC,YAAY,EACjE,MAAM,EAAE,oBAAoB,EAAE,IAAI,EAAEkC,MAAiB,EACrD,KAAK,EAAC,UAAU,EAAC,SAAS,EAAE,IAAI,GAChC,CACW,CAChB,CACO,EACV;iBACH;;YA7Ca,+BAAW,GAAG,gBAAgB,CAAC;;;;;kBCG1B,UAAW,SAAQnC,SAAsC;gBAI5E,YAAY,KAAU;oBACpB,KAAK,CAAC,KAAK,CAAC,CAAC;oBACb,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC;oBAEhB,IAAI,CAAC,eAAe,GAAG,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBACvD,IAAI,CAAC,kBAAkB,GAAG,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBAC7D,IAAI,CAAC,cAAc,GAAG,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBACrD,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;oBACjD,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;iBAC1D;gBAEM,iBAAiB;oBACtB,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,WAAW,CAAC,aAAa,EAAE,CAAC,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC,QAAQ,CAAC,EAAE,IAAI,EAAE,CAAC,CAAC,CAAC;iBACzF;;gBAIO,eAAe;oBACrB,OAAO,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,WAAW,CAAC,eAAe,EAAE,CAAC;iBAC5D;gBAEO,kBAAkB;oBACxB,OAAO,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,WAAW,CAAC,kBAAkB,EAAE,CAAC;iBAC/D;gBAEO,cAAc;oBACpB,OAAO,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,WAAW,CAAC,cAAc,EAAE,CAAC;iBAC3D;gBAEO,YAAY;oBAClB,OAAO,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,WAAW,CAAC,YAAY,EAAE,CAAC;iBACzD;gBAEO,gBAAgB;oBACtB,OAAO,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,WAAW,CAAC,gBAAgB,EAAE,CAAC;iBAC7D;gBAEO,iBAAiB;oBACvB,OAAOC,wBAAM,SAAS,EAAC,aAAa,GAAG,CAAC;iBACzC;gBAEO,qBAAqB;oBAC3B,QACEA,cAAC,MAAM;wBACLA,cAAC,WAAW,sBAA0B;wBACtCA,cAAC,aAAa;4BACZA,uBAAK,SAAS,EAAC,SAAS;gCACpBA,sCAAoB;gCACpBA,4BAAO,IAAI,CAAC,KAAK,CAAC,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,iBAAiB,EAAE,CAAQ,CACjF,CACQ;wBAChBA,cAAC,eAAe,IAAC,OAAO,EAAC,MAAM;4BAC7BA,cAAC,QAAQ,IAAC,OAAO,EAAE,IAAI,CAAC,eAAe;gCACrCA,cAACE,eAA2B,IAAC,IAAI,EAAEkC,YAAqB,GAAI;wCACnD;4BACXpC,cAAC,QAAQ,IAAC,OAAO,EAAE,IAAI,CAAC,kBAAkB;gCACxCA,cAACE,eAA2B,IAAC,IAAI,EAAEmC,MAAe,GAAI;2CAC7C,CACK,CACX,EACT;iBACH;gBAEO,gBAAgB;oBACtB,MAAM,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,GAAG,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC;oBACzF,MAAM,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,KAAK,GAAG,IAAI,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC;oBAC3F,MAAM,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,IAAI,IAAI,GAAG,OAAO,GAAG,KAAK,GAAG,IAAI,IAAI,EAAE,CAAC;oBACvE,MAAM,OAAO,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,IAAI,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,GAAG,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,GAAG,KAAK,IAAI,EAAE,CAAC;oBAE7G,QACErC,cAAC,MAAM;wBACLA,cAAC,WAAW,iBAAqB;wBACjCA,cAAC,aAAa;4BACZA,uBAAK,SAAS,EAAC,SAAS;gCACtBA,kCAAgB;gCAChBA,4BAAO,IAAI,CAAC,KAAK,CAAC,IAAI,GAAG,OAAO,GAAG,IAAI,CAAC,iBAAiB,EAAE,CAAQ,CAC/D;4BACNA,uBAAK,SAAS,EAAC,SAAS;gCACtBA,qCAAmB;gCACnBA,4BAAO,IAAI,CAAC,KAAK,CAAC,IAAI,GAAG,OAAO,GAAG,IAAI,CAAC,iBAAiB,EAAE,CAAQ,CAC/D;4BACNA,uBAAK,SAAS,EAAC,SAAS;gCACtBA,iCAAe;gCACfA,4BAAO,IAAI,CAAC,KAAK,CAAC,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,iBAAiB,EAAE,CAAQ,CAC1E;4BACNA,uBAAK,SAAS,EAAC,SAAS;gCACtBA,uCAAqB;gCACrBA,4BAAO,IAAI,CAAC,KAAK,CAAC,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,iBAAiB,EAAE,CAAQ,CAChF,CACQ;wBAChBA,cAAC,eAAe,IAAC,OAAO,EAAC,MAAM;4BAC7BA,cAAC,QAAQ,IAAC,OAAO,EAAE,IAAI,CAAC,cAAc;gCACpCA,cAACE,eAA2B,IAAC,IAAI,EAAEoC,UAAmB,GAAI;4CACjD;4BACXtC,cAAC,QAAQ,IAAC,OAAO,EAAE,IAAI,CAAC,YAAY;gCAClCA,cAACE,eAA2B,IAAC,IAAI,EAAEmC,MAAe,GAAI;0CAC7C,CACK,CACX,EACT;iBACH;gBAEO,gBAAgB;oBACtB,QACErC,cAAC,MAAM,IAAC,SAAS,EAAC,QAAQ;wBACxBA,cAAC,WAAW,sBAA0B;wBACtCA,cAAC,eAAe;4BACdA,cAAC,QAAQ,IAAC,OAAO,EAAE,OAAO,CAAC,IAAI,CAAC,gBAAgB,EAAE,QAAQ,CAAC;gCACzDA,cAACE,eAA2B,IAAC,IAAI,EAAEqC,qBAA8B,GAAI;qDAC5D,CACK,CACX,EACT;iBACH;gBAEM,MAAM;oBACX,QACEvC,2BAAS,SAAS,EAAC,YAAY;wBAC7BA,cAAC,YAAY;4BACV,IAAI,CAAC,qBAAqB,EAAE;4BAC5B,IAAI,CAAC,gBAAgB,EAAE;4BACvB,IAAI,CAAC,gBAAgB,EAAE,CACX,CACP,EACV;iBACH;;YAhIa,sBAAW,GAAG,gBAAgB,CAAC;;;;;kBCL1B,KAAM,SAAQD,SAAe;gBAGzC,MAAM;oBACX,QACEC,cAAC,gBAAgB,CAAC,QAAQ,IAAC,KAAK,EAAE,IAAI,CAAC,OAAO;wBAC5CA,2BAAS,SAAS,EAAC,OAAO;4BACxBA;gCACEA,cAAC,WAAW,IAAC,EAAE,EAAE,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,WAAW;oCAChDA,cAACE,eAA2B,IAAC,IAAI,EAAEsC,MAAe,GAAI;4CAC1C;gCACdxC,uBAAK,SAAS,EAAC,OAAO,qBAAqB,CACpC;4BACTA,cAAC,UAAU,OAAG;4BACdA,uBAAK,SAAS,EAAC,SAAS;gCACtBA,cAAC,MAAM;oCACLA,cAAC,KAAK,IAAC,IAAI,EAAC,sBAAsB,EAAC,SAAS,EAAE,iBAAiB,GAAI;oCACnEA,cAAC,KAAK,IAAC,IAAI,EAAC,uBAAuB,EAAC,SAAS,EAAE,kBAAkB,GAAI;oCACrEA,cAAC,KAAK,IAAC,IAAI,EAAC,cAAc,EAAC,SAAS,EAAE,eAAe,GAAI;oCACzDA,cAAC,KAAK,IAAC,IAAI,EAAC,iBAAiB,EAAC,SAAS,EAAE,mBAAmB,GAAI;oCAChEA,cAAC,KAAK,IAAC,IAAI,EAAC,eAAe,EAAC,SAAS,EAAE,UAAU,GAAI;oCACrDA,cAAC,QAAQ,IAAC,EAAE,EAAC,sBAAsB,GAAG,CAC/B,CACL,CACE,CACgB,EAC5B;iBACH;aACF;;kBCzCY,UAAU,yBAAmC,CAAC;oBACvD,SAAS,EAAE,KAAK;oBAChB,WAAW,EAAE,iBAAiB;oBAC9B,WAAW,EAAE,gBAAgB;oBAC7B,IAAI,EAAE,OAAO;oBACb,MAAM,EAAE,EAAE;iBACb,CAAC;;;;;;"}